<!-- Screen Location component://coarchy/screen/coarchy/cointernal/ViewActors.xml --><screen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/xml-screen-3.xsd" default-menu-title="View Actors" default-menu-index="22" menu-image="/ssstatic/images/Sales.png" default-menu-include="false"><parameter name="showActivities" from="showActivities?:'Y'"/><always-actions><if condition="!activeOrgId"><message><![CDATA[Select an Organization before moving forward.]]></message><script><![CDATA[sri.sendRedirectAndStopRender('/settings/Organizations')]]></script></if><entity-find-count entity-name="mantle.party.PartyActivation" count-field="partyActivationCount"><date-filter/><econdition field-name="partyId" from="activeOrgId"/></entity-find-count></always-actions><transition-include name="getCloneOrganizationList" location="component://coarchy/screen/coarchy/cointernal/Home.xml"/><transition-include name="upgradeParty" location="component://coarchy/screen/coarchy/cointernal/Home.xml"/><actions><entity-find-one entity-name="coarchy.ProcessStory" value-field="processStory"/><entity-find entity-name="coarchy.Actor" list="prepPrepActorList"><order-by field-name="name"/></entity-find><set field="actorList" from="[]"/><set field="hasActivities" from="false"/><iterate list="prepPrepActorList" entry="actor"><entity-find entity-name="coarchy.ActivityActorDetail" list="actorActivityList" distinct="true"><econdition field-name="actorId" from="actor.actorId"/><select-field field-name="actorId,name,description,activityId,condition,action,implementationId,"/><order-by field-name="sequenceNum"/></entity-find><set field="processStoryActivityList" from="[]"/><iterate list="actorActivityList" entry="actorActivity"><entity-find entity-name="coarchy.ActivityActorDetail" list="activityActorList"><econdition field-name="activityId" from="actorActivity.activityId"/><order-by field-name="name"/></entity-find><entity-find-one entity-name="coarchy.Activity" value-field="activity" auto-field-map="[activityId:actorActivity.activityId]"/><set field="actorActivity" from="activity.getMap() + [actorNames:activityActorList*.name]"/><script><![CDATA[processStoryActivityList.add(actorActivity)]]></script></iterate><if condition="!hasActivities && processStoryActivityList?.size() > 0"><set field="hasActivities" from="true"/></if><script><![CDATA[actorList.add([actorId:actor.actorId, name:actor.name, description:actor.description, processStoryActivityList:processStoryActivityList])]]></script></iterate></actions><widgets><section name="FreemiumBanner" condition="partyActivationCount == 0"><widgets><container type="q-banner inline-actions rounded dense" style="bg-grey-3 text-black q-mb-md"><label text="To enable all the features upgrade organization '${activeOrg.organizationName}' to Premium" type="b"/><container type="template v-slot:action"><form-single name="UpgradeForm" transition="upgradeParty"><field name="upgrade"><default-field><submit text="Upgrade" type="success" confirmation="Activating will cost 1 Organization-Month Credit per month while ${activeOrg.organizationName} is upgraded. Are you sure?"/></default-field></field></form-single></container></container></widgets></section><container-row><row-col md="2"/><row-col md="8"><label text="View Actors" type="h4" style="q-pb-md"/><link url="." text="Hide Activities" parameter-map="[showActivities:'N']" btn-type="success" condition="showActivities == 'Y' && partyActivationCount > 0 && hasActivities"/><link url="." text="Show Activities" parameter-map="[showActivities:'Y']" btn-type="success" condition="showActivities != 'Y' && partyActivationCount > 0 && hasActivities"/><render-mode><text><![CDATA[<h5 v-pre>]]></text></render-mode><render-mode><text type="html,vuet,qvt" location="component://coarchy/template/Actors.html.ftl"/></render-mode><render-mode><text><![CDATA[</h5>]]></text></render-mode></row-col><row-col md="2"/></container-row></widgets></screen>