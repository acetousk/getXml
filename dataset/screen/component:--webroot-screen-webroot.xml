<!-- Screen Location component://webroot/screen/webroot.xml --><screen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/xml-screen-3.xsd" require-authentication="false"><always-actions><set field="html_scripts" from="new LinkedHashSet()"/><set field="footer_scripts" from="new LinkedHashSet()"/><set field="html_stylesheets" from="new LinkedHashSet()"/></always-actions><transition name="status"><actions><set field="allowed_ips" from="System.getProperty('webapp_status_ips')? System.getProperty('webapp_status_ips').replaceAll('\\s', '').split(',')+['127.0.0.1','0:0:0:0:0:0:0:1']: ['127.0.0.1','0:0:0:0:0:0:0:1']"/><if condition="ec.user.getClientIp() in allowed_ips"><then><script><![CDATA[ec.web.sendJsonResponse(ec.factory.getStatusMap())]]></script></then><else><log message="Rejecting /status from ${ec.web.getRequest().getRemoteAddr()}"/></else></if></actions><default-response type="none"/></transition><transition name="menuData" read-only="true" begin-transaction="false"><actions><script><![CDATA[List menuDataList = sri.getMenuData(sri.screenUrlInfo.extraPathNameList)
            if (menuDataList != null) ec.web.sendJsonResponse(menuDataList)]]></script></actions><default-response type="none" save-parameters="true"/></transition><transition name="email"><path-parameter name="emailMessageId"/><actions><script><![CDATA[ec.web.viewEmailMessage()]]></script></actions><default-response type="none"/></transition><transition name="robots.txt" read-only="true"><actions><script><![CDATA[List disallowList = ['apps', 'vapps', 'qapps', 'rest', 'rpc', 'status', 'menuData']
            def outWriter = new StringWriter()
            outWriter.append("user-agent: *\n")
            for (disPath in disallowList) outWriter.append("disallow: /${disPath}\n")
            ec.web.sendTextResponse(outWriter.toString())]]></script></actions><default-response type="none"/></transition><transition name="favicon.ico"><actions><script><![CDATA[iconList = sri.getThemeValues("STRT_SHORTCUT_ICON")
                if (!iconList || iconList[0] == "") iconList = ["/favicon.ico"]
                ec.web.sendResourceResponse("component://webroot/screen/webroot" + iconList[0])]]></script></actions><default-response type="none"/></transition><subscreens default-item="qapps"><subscreens-item name="toolstatic" location="component://tools/screen/toolstatic.xml" menu-include="false"/></subscreens><widgets><render-mode><text type="html" location="component://webroot/screen/includes/Header.html.ftl" no-boundary-comment="true"/><text type="xsl-fo" location="component://webroot/screen/includes/Header.xsl-fo.ftl" no-boundary-comment="true"/></render-mode><render-mode><text template="true"><![CDATA[${sri.renderSubscreen()}]]></text></render-mode><render-mode><text type="html" location="component://webroot/screen/includes/Footer.html.ftl"/><text type="xsl-fo"><![CDATA[${sri.getAfterScreenWriterText()}</fo:flow></fo:page-sequence></fo:root>]]></text></render-mode></widgets></screen>