<!-- Screen Location component://SimpleScreens/screen/SimpleScreens/Facility/FacilityCalendar.xml --><screen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/xml-screen-3.xsd" default-menu-title="Calendar" default-menu-index="3"><parameter name="facilityId" required="true"/><transition name="eventDetail"><default-response url="."/></transition><transition name="getCalendarEvents"><service-call name="mantle.work.EventServices.get#FullCalendarData" web-send-json-response="eventList" in-map="context + [urlGString:(sri.buildUrl('eventDetail').url + '?workEffortId=${workEffort.workEffortId}')]" out-map="context" multi="parameter"/><default-response type="none"/></transition><actions><entity-find-one entity-name="mantle.facility.Facility" value-field="facility"/></actions><widgets><render-mode><text type="html,vuet,qvt"><![CDATA[<div id="calendar"></div><script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.1.0/fullcalendar.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.1.0/locale-all.js" type="text/javascript"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.1.0/fullcalendar.min.css" type="text/css"/><script>
    $('#calendar').fullCalendar({ timezone: false, defaultView: 'agendaWeek',
        header: { left: 'prev,next today', center: 'title', right: 'month,agendaWeek,agendaDay' },
        eventSources: [ { url: "${sri.buildUrl('getCalendarEvents').url}", type: 'POST', data: { moquiSessionToken:'${ec.web.sessionToken}', facilityId: '${facilityId}' } } ]
    });
                </script>]]></text></render-mode></widgets></screen>