<!--Transition Screen Location component://SimpleScreens/screen/SimpleScreens/Asset/Asset/FindSummary.xml Transition Name getContainerList--><transition name="getContainerList"><parameter name="term"/><parameter name="mfgPartyId"/><parameter name="term"/><parameter name="ownerPartyId"/><parameter name="partyId"/><parameter name="productStoreId"/><parameter name="term"/><parameter name="roleTypeId"/><parameter name="indexName"/><parameter name="documentType"/><parameter name="partyTypeEnumId"/><parameter name="includeDisabled"/><parameter name="restrictActiveOrg"/><parameter name="pageIndex"/><parameter name="term"/><parameter name="facilityTypeEnumId"/><parameter name="parentFacilityId"/><parameter name="ownerPartyId"/><parameter name="term"/><parameter name="facilityId"/><parameter name="locationSeqId"/><actions><!--always-actions at component://webroot/screen/webroot.xml--><set field="html_scripts" from="new LinkedHashSet()"/><set field="footer_scripts" from="new LinkedHashSet()"/><set field="html_stylesheets" from="new LinkedHashSet()"/><!--always-actions at component://PopCommerce/screen/PopCommerceAdmin.xml--><set field="appRoot" value="PopcAdmin"/><set field="searchIndexName" value="mantle"/><set field="searchLinkSets" value="PopcAdmin"/><set field="searchProductDocType" value="MantleProduct"/><set field="searchPartyDocType" value="MantleParty"/><set field="appUserGroupTypeEnumId" value="UgtPopcAdmin"/><service-call name="mantle.party.PartyServices.setup#UserOrganizationInfo" out-map="context"/><!--transition actions--><entity-find-one entity-name="mantle.product.asset.Container" value-field="container"><field-map field-name="serialNumber" from="term"/></entity-find-one><if condition="container == null"><entity-find-one entity-name="mantle.product.asset.Container" value-field="container"><field-map field-name="containerId" from="term"/></entity-find-one></if><if condition="container != null"><then><set field="containerList" from="[container]"/></then><else><entity-find entity-name="mantle.product.asset.Container" list="containerList" limit="20"><econdition field-name="facilityId" ignore-if-empty="true"/><econdition field-name="locationSeqId" ignore-if-empty="true"/><econditions combine="or"><econdition field-name="serialNumber" operator="like" value="%${term}%" ignore-case="true"/><econdition field-name="description" operator="like" value="%${term}%" ignore-case="true"/><econdition field-name="externalId" operator="like" value="%${term}%" ignore-case="true"/></econditions><order-by field-name="serialNumber,description"/></entity-find></else></if><script><![CDATA[def outList = []
                for (def container in containerList)
                    outList.add([value:container.containerId, label:ec.resource.expand('ContainerNameTemplate','',container?:[:])])
                ec.web.sendJsonResponse(outList)]]></script></actions></transition>