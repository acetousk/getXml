<!--Transition Screen Location component://SimpleScreens/screen/SimpleScreens/Task/TaskSummary.xml Transition Name getTaskStatuses--><transition name="getTaskStatuses"><parameter name="workEffortId" required="true"/><parameter name="workEffortContentId"/><parameter name="term"/><parameter name="rootWorkEffortId"/><parameter name="assignedPartyId"/><parameter name="indexName"/><parameter name="documentType"/><actions><!--always-actions at component://webroot/screen/webroot.xml--><set field="html_scripts" from="new LinkedHashSet()"/><set field="footer_scripts" from="new LinkedHashSet()"/><set field="html_stylesheets" from="new LinkedHashSet()"/><!--always-actions at component://HiveMind/screen/HiveMindRoot.xml--><set field="appRoot" value="hm"/><set field="searchIndexName" value="mantle"/><set field="searchLinkSets" value="hm"/><set field="searchTaskDocType" value="MantleTask"/><set field="searchPartyDocType" value="MantleParty"/><!--transition actions--><entity-find-one entity-name="mantle.work.effort.WorkEffort" value-field="task"/><entity-find-one entity-name="mantle.work.effort.WorkEffort" value-field="project"><field-map field-name="workEffortId" from="task.rootWorkEffortId"/></entity-find-one><set field="statusFlowId" from="(task.statusFlowId ?: project?.statusFlowId) ?: 'Default'"/><entity-find-one entity-name="StatusItem" value-field="currentStatus"><field-map field-name="description" from="currentValue?.trim()"/><field-map field-name="statusTypeId" value="WorkEffort"/></entity-find-one><if condition="currentStatus == null"><entity-find entity-name="moqui.basic.LocalizedEntityField" list="currentStatusList"><econdition field-name="localized" from="currentValue?.trim()"/><econdition field-name="entityName" value="moqui.basic.StatusItem"/></entity-find><entity-find list="statusItemList" entity-name="moqui.basic.StatusItem"><econdition field-name="statusId" operator="in" from="currentStatusList.pkValue"/><econdition field-name="statusTypeId" value="WorkEffort"/></entity-find><if condition="statusItemList"><set field="currentStatus" from="statusItemList.first"/></if></if><entity-find entity-name="moqui.basic.StatusFlowTransitionToDetail" list="svctdList" cache="true"><econdition field-name="statusFlowId" from="statusFlowId"/><econdition field-name="statusId" from="currentStatus?.statusId"/></entity-find><set field="optionsMap" from="[:]"/><iterate list="svctdList" entry="svctd"><set field="optionsMap[svctd.toStatusId]" value="${svctd.transitionName} (${svctd.description})"/></iterate><script><![CDATA[ec.web.sendJsonResponse(optionsMap)]]></script></actions></transition>