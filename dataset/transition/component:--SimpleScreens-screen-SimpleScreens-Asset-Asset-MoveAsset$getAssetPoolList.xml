<!--Transition Screen Location component://SimpleScreens/screen/SimpleScreens/Asset/Asset/MoveAsset.xml Transition Name getAssetPoolList--><transition name="getAssetPoolList"><parameter name="assetId" required="true"/><parameter name="term"/><parameter name="facilityTypeEnumId"/><parameter name="parentFacilityId"/><parameter name="ownerPartyId"/><parameter name="term"/><parameter name="facilityId"/><parameter name="locationSeqId"/><parameter name="term"/><parameter name="ownerPartyId"/><parameter name="partyId"/><parameter name="productStoreId"/><actions><!--always-actions at component://webroot/screen/webroot.xml--><set field="html_scripts" from="new LinkedHashSet()"/><set field="footer_scripts" from="new LinkedHashSet()"/><set field="html_stylesheets" from="new LinkedHashSet()"/><!--always-actions at component://SimpleScreens/screen/BasicHandheld/Warehouse.xml--><set field="appRoot" value="hhwh"/><set field="searchIndexName" value="mantle"/><set field="searchProductDocType" value="MantleProduct"/><set field="searchPartyDocType" value="MantleParty"/><service-call name="mantle.party.PartyServices.setup#UserOrganizationInfo" out-map="context"/><!--transition actions--><entity-find-one entity-name="mantle.product.asset.AssetPool" value-field="pkPool"><field-map field-name="assetPoolId" from="term"/></entity-find-one><if condition="pkPool == null"><entity-find-one entity-name="mantle.product.asset.AssetPool" value-field="pkPool"><field-map field-name="pseudoId" from="term"/></entity-find-one></if><if condition="pkPool != null"><then><set field="poolList" from="[pkPool]"/></then><else><set field="term" from="term ?: ''"/><entity-find entity-name="mantle.product.asset.AssetPoolDetail" list="poolList" limit="20"><econdition field-name="ownerPartyId" ignore-if-empty="true"/><econdition field-name="partyId" ignore-if-empty="true"/><econdition field-name="productStoreId" ignore-if-empty="true"/><econditions combine="or"><econdition field-name="assetPoolId" operator="like" value="${term}%" ignore-case="true"/><econdition field-name="pseudoId" operator="like" value="${term}%" ignore-case="true"/><econdition field-name="description" operator="like" value="%${term}%" ignore-case="true"/></econditions><select-field field-name="assetPoolId,pseudoId,description"/><order-by field-name="assetPoolId"/></entity-find></else></if><script><![CDATA[def outList = []
                for (pool in poolList) {
                    outList.add([value:pool.assetPoolId, label:ec.resource.expand('${pseudoId}: ${description}', '', pool)])
                }
                ec.web.sendJsonResponse(outList)]]></script></actions></transition>