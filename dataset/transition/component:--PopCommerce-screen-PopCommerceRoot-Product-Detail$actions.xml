<!--Transition Screen Location component://PopCommerce/screen/PopCommerceRoot/Product/Detail.xml Transition Name actions--><transition name="actions"><parameter name="productId" required="true"/><parameter name="productContentId"/><actions><!--always-actions at component://webroot/screen/webroot.xml--><set field="html_scripts" from="new LinkedHashSet()"/><set field="footer_scripts" from="new LinkedHashSet()"/><set field="html_stylesheets" from="new LinkedHashSet()"/><!--always-actions at component://PopCommerce/screen/PopCommerceRoot.xml--><set field="productStoreId" value="POPC_DEFAULT"/><entity-find-one entity-name="mantle.product.store.ProductStore" value-field="productStore"/><set field="currencyUomId" from="productStore?.defaultCurrencyUomId"/><set field="priceUomId" from="productStore?.defaultCurrencyUomId"/><set field="defaultLocale" from="productStore?.defaultLocale"/><set field="organizationPartyId" from="productStore?.organizationPartyId"/><set field="vendorPartyId" from="productStore?.organizationPartyId"/><set field="wikiSpaceId" from="productStore?.wikiSpaceId"/><set field="cartOrderId" from="ec.web.sessionAttributes.cartOrderId" set-if-empty="false"/><set field="customerPartyId" from="ec.user.userAccount?.partyId"/><set field="defaultOrderParameters" from="[orderId:cartOrderId, customerPartyId:customerPartyId, currencyUomId:currencyUomId,                 productStoreId:productStoreId, salesChannelEnumId:'ScWeb']"/><!--pre-actions--><set field="extraPathNameList" from="sri.screenUrlInfo.extraPathNameList"/><if condition="extraPathNameList && !productId"><set field="productId" from="extraPathNameList[0]"/></if><entity-find-one entity-name="mantle.product.Product" value-field="product"/><set field="html_title" from="product?.productName ?: ''"/><script><![CDATA[html_stylesheets.add("static/rating/star-rating.min.css")]]></script><script><![CDATA[footer_scripts.add("static/rating/star-rating.min.js")]]></script><!--actions--><service-call name="mantle.product.PriceServices.get#ProductPrice" out-map="priceMap" in-map="[productId:productId, priceUomId:priceUomId, productStoreId:productStoreId,                     vendorPartyId:vendorPartyId, customerPartyId:customerPartyId]"/><set field="price" from="priceMap?.price"/><set field="priceUomId" from="priceMap?.priceUomId"/><entity-find-one entity-name="moqui.basic.Enumeration" value-field="productClassEnum"><field-map field-name="enumId" from="product.productClassEnumId"/></entity-find-one><entity-find entity-name="mantle.product.feature.ProductFeatureAndAppl" list="pfaaList" cache="true"><date-filter/><econdition field-name="productId"/><econdition field-name="applTypeEnumId" value="PfatStandard"/><order-by field-name="productFeatureTypeEnumId"/><order-by field-name="description"/></entity-find><entity-find entity-name="mantle.product.ProductDimensionAndType" list="dimensionList" cache="true"><econdition field-name="productId"/><order-by field-name="description"/></entity-find><entity-find entity-name="mantle.product.ProductContent" list="contentList" cache="true"><date-filter/><econdition field-name="productId"/><order-by field-name="sequenceNum,-fromDate"/></entity-find><set field="descLongLocation" from="contentList.find({ 'PcntDescriptionLong' == it.productContentTypeEnumId })?.contentLocation"/><if condition="descLongLocation"><set field="descriptionLong" from="ec.resource.getLocationText(descLongLocation, true)"/></if><set field="imageSmallList" from="contentList.findAll({ 'PcntImageSmall' == it.productContentTypeEnumId })"/></actions></transition>