<!--Transition Screen Location component://SimpleScreens/screen/SimpleScreens/Shipment/PackageTracking.xml Transition Name actions--><transition name="actions"><parameter name="term"/><parameter name="facilityTypeEnumId"/><parameter name="parentFacilityId"/><parameter name="ownerPartyId"/><actions><!--always-actions at component://webroot/screen/webroot.xml--><set field="html_scripts" from="new LinkedHashSet()"/><set field="footer_scripts" from="new LinkedHashSet()"/><set field="html_stylesheets" from="new LinkedHashSet()"/><!--always-actions at component://PopCommerce/screen/PopCommerceAdmin.xml--><set field="appRoot" value="PopcAdmin"/><set field="searchIndexName" value="mantle"/><set field="searchLinkSets" value="PopcAdmin"/><set field="searchProductDocType" value="MantleProduct"/><set field="searchPartyDocType" value="MantleParty"/><set field="appUserGroupTypeEnumId" value="UgtPopcAdmin"/><service-call name="mantle.party.PartyServices.setup#UserOrganizationInfo" out-map="context"/><!--actions--><service-call name="org.moqui.impl.BasicServices.find#EnumerationByParent" out-map="outgoingTypeOut" in-map="[parentEnumId:'ShpTpOutgoing']"/><set field="shipmentTypeSet" from="outgoingTypeOut.enumIdSet"/><set field="defaultFacilityId" from="ec.user.getPreference('FacilityGeneralDefault')"/><set field="hoursPastEta" from="hoursPastEta ?: '12'"/><set field="hoursPastEtaInt" from="hoursPastEta as int"/><if condition="hoursPastEtaInt > 0"><set field="etaLookBack" from="new Timestamp(java.time.ZonedDateTime.now().minusHours(hoursPastEtaInt).withMinute(0).withSecond(0).toInstant().toEpochMilli())"/></if><set field="daysSincePacked" from="daysSincePacked ?: '5'"/><set field="daysSincePackedInt" from="daysSincePacked as int"/><if condition="daysSincePackedInt > 0"><set field="packedLookBack" from="new Timestamp(java.time.ZonedDateTime.now().minusDays(daysSincePackedInt).withMinute(0).withSecond(0).toInstant().toEpochMilli())"/></if><set field="daysSinceLastTrack" from="daysSinceLastTrack ?: '0'"/><set field="daysSinceLastTrackInt" from="daysSinceLastTrack as int"/><if condition="daysSinceLastTrackInt > 0"><set field="lastTrackLookBack" from="new Timestamp(java.time.ZonedDateTime.now().minusDays(daysSinceLastTrackInt).withMinute(0).withSecond(0).toInstant().toEpochMilli())"/></if><set field="summaryString" value=""/><if condition="etaLookBack != null"><set field="summaryString" value="with ETA or Orig ETA before ${ec.l10n.format(etaLookBack, null)}"/></if><if condition="packedLookBack != null"><set field="summaryString" from="(summaryString ? summaryString + ' OR ' : '') + 'Packed before ' + ec.l10n.format(packedLookBack, null)"/></if><if condition="lastTrackLookBack != null"><set field="summaryString" from="(summaryString ? summaryString + ' OR ' : '') + 'Last Track before ' + ec.l10n.format(lastTrackLookBack, null)"/></if></actions></transition>