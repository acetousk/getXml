<!--Transition Screen Location component://SimpleScreens/screen/SimpleScreens/Shipment/ShipmentDetail/UpdateItemAsset.xml Transition Name getLocationList--><transition name="getLocationList"><parameter name="shipmentId" required="true"/><parameter name="productId" required="true"/><parameter name="assetId" required="true"/><parameter name="statusId"/><parameter name="filterProductId"/><parameter name="onlyRemaining"/><parameter name="pageIndex"/><parameter name="term"/><parameter name="facilityId"/><parameter name="locationSeqId"/><parameter name="term"/><parameter name="mfgPartyId"/><parameter name="term"/><parameter name="ownerPartyId"/><parameter name="partyId"/><parameter name="productStoreId"/><parameter name="term"/><parameter name="facilityId"/><parameter name="locationTypeEnumId"/><actions><!--always-actions at component://webroot/screen/webroot.xml--><set field="html_scripts" from="new LinkedHashSet()"/><set field="footer_scripts" from="new LinkedHashSet()"/><set field="html_stylesheets" from="new LinkedHashSet()"/><!--always-actions at component://PopCommerce/screen/PopCommerceAdmin.xml--><set field="appRoot" value="PopcAdmin"/><set field="searchIndexName" value="mantle"/><set field="searchLinkSets" value="PopcAdmin"/><set field="searchProductDocType" value="MantleProduct"/><set field="searchPartyDocType" value="MantleParty"/><set field="appUserGroupTypeEnumId" value="UgtPopcAdmin"/><service-call name="mantle.party.PartyServices.setup#UserOrganizationInfo" out-map="context"/><!--transition actions--><entity-find entity-name="mantle.facility.FacilityLocation" list="locList" limit="20"><econdition field-name="facilityId" ignore-if-empty="true"/><econditions combine="or"><econdition field-name="locationSeqId" operator="like" value="%${term}%" ignore-case="true"/><econdition field-name="description" operator="like" value="%${term}%" ignore-case="true"/><econdition field-name="areaId" operator="like" value="%${term}%" ignore-case="true"/><econdition field-name="aisleId" operator="like" value="%${term}%" ignore-case="true"/><econdition field-name="sectionId" operator="like" value="%${term}%" ignore-case="true"/><econdition field-name="levelId" operator="like" value="%${term}%" ignore-case="true"/><econdition field-name="positionId" operator="like" value="%${term}%" ignore-case="true"/></econditions><order-by field-name="areaId,aisleId,sectionId,levelId,positionId,description"/></entity-find><script><![CDATA[def outList = []
                for (def facLoc in locList) {
                    if (facLoc.locationTypeEnumId) {
                        def locType = facLoc.type
                        facLoc = facLoc.getMap()
                        facLoc.put("type", locType)
                    }
                    outList.add([value:facLoc.locationSeqId, label:ec.resource.expand('FacilityLocationNameTemplate','',facLoc?:[:])])
                }
                ec.web.sendJsonResponse(outList)]]></script></actions></transition>