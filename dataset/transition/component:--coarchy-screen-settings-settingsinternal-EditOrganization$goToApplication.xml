<!--Transition Screen Location component://coarchy/screen/settings/settingsinternal/EditOrganization.xml Transition Name goToApplication--><transition name="goToApplication"><parameter name="organizationId" required="true"/><actions><!--always-actions at component://webroot/screen/webroot.xml--><set field="html_scripts" from="new LinkedHashSet()"/><set field="footer_scripts" from="new LinkedHashSet()"/><set field="html_stylesheets" from="new LinkedHashSet()"/><!--always-actions at component://coarchy/screen/settings/settingsinternal/EditOrganization.xml--><entity-find-count entity-name="mantle.party.PartyRelationship" count-field="partyRelationshipCount"><date-filter/><econdition field-name="relationshipTypeEnumId" value="PrtMember"/><econdition field-name="toRoleTypeId" value="OrgInternal"/><econdition field-name="fromPartyId" from="ec.user.userAccount.partyId"/><econdition field-name="toPartyId" from="organizationId"/></entity-find-count><if condition="partyRelationshipCount == null || partyRelationshipCount == 0"><message type="warning"><![CDATA[${ec.resource.expand('CoarchyOrgUnauthorizedUser',null)}]]></message><script><![CDATA[sri.sendRedirectAndStopRender('/settings/Organizations')]]></script></if><entity-find-one entity-name="mantle.party.PartyDetail" value-field="organization" auto-field-map="[partyId:organizationId]"/><entity-find-count entity-name="mantle.party.PartyActivation" count-field="partyActivationCount"><date-filter/><econdition field-name="partyId" from="organizationId"/></entity-find-count><!--transition actions--><entity-find-one entity-name="moqui.security.UserPreference" value-field="userPreference" auto-field-map="[userId:ec.user.userId,preferenceKey:'ACTIVE_ORGANIZATION']"/><if condition="partyId && userPreference?.preferenceValue != partyId"><entity-find-count entity-name="mantle.party.PartyToAndRelationship" count-field="partyRelationshipCount"><date-filter/><econdition field-name="relationshipTypeEnumId" value="PrtMember"/><econdition field-name="toRoleTypeId" value="OrgInternal"/><econditions combine="or"><econdition field-name="fromPartyId" from="ec.user.userAccount.partyId"/><econdition field-name="visibilityEnumId" value="PvPublic"/></econditions><econdition field-name="toPartyId" from="partyId"/></entity-find-count><if condition="partyRelationshipCount > 0"><service-call name="org.moqui.impl.UserServices.set#Preference" in-map="[preferenceKey:'ACTIVE_ORGANIZATION',preferenceValue:partyId]"/></if></if></actions></transition>