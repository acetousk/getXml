<!--Transition Screen Location component://webroot/screen/webroot/SecondFactor.xml Transition Name verifyUserAuthcFactor--><transition name="verifyUserAuthcFactor"><actions><!--always-actions at component://webroot/screen/webroot.xml--><set field="html_scripts" from="new LinkedHashSet()"/><set field="footer_scripts" from="new LinkedHashSet()"/><set field="html_stylesheets" from="new LinkedHashSet()"/><!--transition actions--><set field="username" from="ec.web.sessionAttributes.moquiPreAuthcUsername"/><service-call name="org.moqui.impl.UserServices.validate#ExternalUserAuthcCode" in-map="[code:code]" out-map="validateOut"/><if condition="validateOut.verified"><then><script><![CDATA[ec.user.internalLoginUser(validateOut.username)]]></script></then><else><message type="danger" public="true"><![CDATA[Authentication code not valid]]></message></else></if></actions></transition>