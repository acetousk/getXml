<!--Transition Screen Location component://Sales/screen/Sales/Order/ViewOrder.xml Transition Name getShippingOptions--><transition name="getShippingOptions"><parameter name="orderId" required="true"/><parameter name="orderId"/><parameter name="orderPartSeqId"/><actions><!--always-actions at component://webroot/screen/webroot.xml--><set field="html_scripts" from="new LinkedHashSet()"/><set field="footer_scripts" from="new LinkedHashSet()"/><set field="html_stylesheets" from="new LinkedHashSet()"/><!--transition actions--><entity-find-one entity-name="mantle.order.OrderHeader" value-field="orderHeader"/><service-call name="mantle.product.StoreServices.get#StoreShippingOptions" out-map="shipOptsOut" in-map="[productStoreId:orderHeader.productStoreId, orderId:orderId, orderPartSeqId:orderPartSeqId,                             postalContactMechId:postalContactMechId, getRates:true]"/><script><![CDATA[outList = []
            for (sop in shipOptsOut.shippingOptions) outList.add([value:"${sop.carrierPartyId}:${sop.shipmentMethodEnumId}".toString(),
            label:"${sop.description ? sop.description : (sop.carrierPartyId != '_NA_' ? (sop.carrierName + ' - ') : '') + sop.shipmentMethodDescription}${sop.shippingTotal != null ? ' ' + ec.l10n.formatCurrency(sop.shippingTotal, orderHeader.currencyUomId) : ''}".toString()])
            ec.web.sendJsonResponse(outList)]]></script></actions></transition>