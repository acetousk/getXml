<!--Transition Screen Location component://SimpleScreens/screen/SimpleScreens/Accounting/Invoice/EditInvoice.xml Transition Name getItemTypeGlAccount--><transition name="getItemTypeGlAccount"><parameter name="invoiceId" required="true"/><parameter name="invoiceContentId"/><parameter name="term"/><parameter name="productFeatureIds"/><parameter name="productTypeEnumId"/><parameter name="productClassEnumId"/><parameter name="productCategoryIds"/><parameter name="assetTypeEnumId"/><parameter name="assetClassEnumId"/><parameter name="indexName"/><parameter name="documentType"/><parameter name="pageIndex"/><parameter name="itemTypeEnumId"/><parameter name="productId"/><parameter name="organizationPartyId"/><parameter name="direction"/><actions><!--always-actions at component://webroot/screen/webroot.xml--><set field="html_scripts" from="new LinkedHashSet()"/><set field="footer_scripts" from="new LinkedHashSet()"/><set field="html_stylesheets" from="new LinkedHashSet()"/><!--always-actions at component://PopCommerce/screen/PopCommerceAdmin.xml--><set field="appRoot" value="PopcAdmin"/><set field="searchIndexName" value="mantle"/><set field="searchLinkSets" value="PopcAdmin"/><set field="searchProductDocType" value="MantleProduct"/><set field="searchPartyDocType" value="MantleParty"/><set field="appUserGroupTypeEnumId" value="UgtPopcAdmin"/><service-call name="mantle.party.PartyServices.setup#UserOrganizationInfo" out-map="context"/><!--transition actions--><if condition="!itemTypeEnumId || !organizationPartyId || !direction"><script><![CDATA[ec.web.sendTextResponse("No GL Account mapping found")]]></script><return/></if><service-call name="mantle.ledger.InvoiceAutoPostServices.get#InvoiceItemGlAccount" out-map="glAccountOut" in-map="[organizationPartyId:organizationPartyId, itemTypeEnumId:itemTypeEnumId, productId:productId, direction:direction]"/><if condition="glAccountOut.glAccount"><then><set field="glAccountCodeMask" from="ec.user.getPreference('GlAccountCodeMask')"/><set field="accountCodeFormatter" from="masker(glAccountCodeMask, '0')"/><script><![CDATA[ec.web.sendTextResponse(ec.resource.expand("GlAccountNameTemplate", '', glAccountOut.glAccount.getMap()))]]></script></then><else><script><![CDATA[ec.web.sendTextResponse("No GL Account mapping found")]]></script></else></if></actions></transition>