<!--Transition Screen Location component://coarchy/screen/coarchy/cointernal/Checklist.xml Transition Name getAssignedPartyList--><transition name="getAssignedPartyList"><parameter name="checklistId" required="true"/><parameter name="pageIndex" from="pageIndex?:0"/><parameter name="pageSize"/><parameter name="orderByField" value="workEffortId"/><actions><!--always-actions at component://webroot/screen/webroot.xml--><set field="html_scripts" from="new LinkedHashSet()"/><set field="footer_scripts" from="new LinkedHashSet()"/><set field="html_stylesheets" from="new LinkedHashSet()"/><!--always-actions at component://coarchy/screen/coarchy/cointernal.xml--><service-call name="mantle.party.PartyServices.setup#UserOrganizationInfo" out-map="context"/><!--always-actions at component://coarchy/screen/coarchy/cointernal/Checklist.xml--><if condition="!activeOrgId"><message type="info"><![CDATA[Select an Organization before moving forward.]]></message><script><![CDATA[sri.sendRedirectAndStopRender('/settings/Organizations')]]></script></if><entity-find-count entity-name="mantle.party.PartyRelationship" count-field="partyRelationshipCount"><date-filter/><econdition field-name="relationshipTypeEnumId" value="PrtMember"/><econdition field-name="toRoleTypeId" value="OrgInternal"/><econdition field-name="fromPartyId" from="ec.user.userAccount.partyId"/><econdition field-name="toPartyId" from="activeOrgId"/></entity-find-count><entity-find-count entity-name="mantle.party.PartyActivation" count-field="partyActivationCount"><date-filter/><econdition field-name="partyId" from="activeOrgId"/></entity-find-count><!--transition actions--><set field="assignedPartyList" from="[]"/><if condition="term == null && assignedPartyIdList ? assignedPartyIdList?.size() > 0 : false"><then><entity-find entity-name="mantle.work.effort.WorkEffortPartyAndPerson" list="assignedPartyList" limit="50" distinct="true"><date-filter/><econdition field-name="workEffortId"/><econdition field-name="roleTypeId" value="Assignee"/><econdition field-name="partyId" operator="in" from="assignedPartyIdList"/><select-field field-name="partyId,firstName,lastName"/><order-by field-name="firstName"/></entity-find></then><else-if condition="actorIdList"><entity-find entity-name="coarchy.ActorPartyAndPerson" list="assignedPartyList" distinct="true"><econdition field-name="actorId" operator="in" from="actorIdList"/><select-field field-name="partyId,firstName,lastName"/><order-by field-name="actorId"/></entity-find></else-if></if><set field="outList" from="[]"/><iterate list="assignedPartyList" entry="assignedParty"><if condition="outList.find{it.value == assignedParty.partyId} == null"><script><![CDATA[outList.add([value:assignedParty.partyId, label:"${assignedParty.firstName} ${assignedParty.lastName}"])]]></script></if></iterate><script><![CDATA[ec.web.sendJsonResponse(outList)]]></script></actions></transition>