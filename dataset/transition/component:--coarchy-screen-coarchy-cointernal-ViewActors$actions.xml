<!--Transition Screen Location component://coarchy/screen/coarchy/cointernal/ViewActors.xml Transition Name actions--><transition name="actions"><parameter name="showActivities" from="showActivities?:'Y'"/><actions><!--always-actions at component://webroot/screen/webroot.xml--><set field="html_scripts" from="new LinkedHashSet()"/><set field="footer_scripts" from="new LinkedHashSet()"/><set field="html_stylesheets" from="new LinkedHashSet()"/><!--always-actions at component://coarchy/screen/coarchy/cointernal.xml--><service-call name="mantle.party.PartyServices.setup#UserOrganizationInfo" out-map="context"/><!--always-actions at component://coarchy/screen/coarchy/cointernal/ViewActors.xml--><if condition="!activeOrgId"><message><![CDATA[Select an Organization before moving forward.]]></message><script><![CDATA[sri.sendRedirectAndStopRender('/settings/Organizations')]]></script></if><entity-find-count entity-name="mantle.party.PartyActivation" count-field="partyActivationCount"><date-filter/><econdition field-name="partyId" from="activeOrgId"/></entity-find-count><!--actions--><entity-find-one entity-name="coarchy.ProcessStory" value-field="processStory"/><entity-find entity-name="coarchy.Actor" list="prepPrepActorList"><order-by field-name="name"/></entity-find><set field="actorList" from="[]"/><set field="hasActivities" from="false"/><iterate list="prepPrepActorList" entry="actor"><entity-find entity-name="coarchy.ActivityActorDetail" list="actorActivityList" distinct="true"><econdition field-name="actorId" from="actor.actorId"/><select-field field-name="actorId,name,description,activityId,condition,action,implementationId,"/><order-by field-name="sequenceNum"/></entity-find><set field="processStoryActivityList" from="[]"/><iterate list="actorActivityList" entry="actorActivity"><entity-find entity-name="coarchy.ActivityActorDetail" list="activityActorList"><econdition field-name="activityId" from="actorActivity.activityId"/><order-by field-name="name"/></entity-find><entity-find-one entity-name="coarchy.Activity" value-field="activity" auto-field-map="[activityId:actorActivity.activityId]"/><set field="actorActivity" from="activity.getMap() + [actorNames:activityActorList*.name]"/><script><![CDATA[processStoryActivityList.add(actorActivity)]]></script></iterate><if condition="!hasActivities && processStoryActivityList?.size() > 0"><set field="hasActivities" from="true"/></if><script><![CDATA[actorList.add([actorId:actor.actorId, name:actor.name, description:actor.description, processStoryActivityList:processStoryActivityList])]]></script></iterate></actions></transition>