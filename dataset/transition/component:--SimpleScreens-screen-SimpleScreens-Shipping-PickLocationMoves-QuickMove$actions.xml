<!--Transition Screen Location component://SimpleScreens/screen/SimpleScreens/Shipping/PickLocationMoves/QuickMove.xml Transition Name actions--><transition name="actions"><parameter name="productId" required="true"/><parameter name="facilityId" required="true"/><parameter name="locationSeqId"/><parameter name="quantity"/><actions><!--always-actions at component://webroot/screen/webroot.xml--><set field="html_scripts" from="new LinkedHashSet()"/><set field="footer_scripts" from="new LinkedHashSet()"/><set field="html_stylesheets" from="new LinkedHashSet()"/><!--always-actions at component://PopCommerce/screen/PopCommerceAdmin.xml--><set field="appRoot" value="PopcAdmin"/><set field="searchIndexName" value="mantle"/><set field="searchLinkSets" value="PopcAdmin"/><set field="searchProductDocType" value="MantleProduct"/><set field="searchPartyDocType" value="MantleParty"/><set field="appUserGroupTypeEnumId" value="UgtPopcAdmin"/><service-call name="mantle.party.PartyServices.setup#UserOrganizationInfo" out-map="context"/><!--actions--><if condition="locationSeqId"><entity-find-one entity-name="mantle.facility.FacilityLocation" value-field="facilityLocation"/><entity-find entity-name="mantle.product.asset.AssetQuantitySummary" list="locQtySummaryList"><econdition field-name="productId"/><econdition field-name="facilityId"/><econdition field-name="locationSeqId"/><select-field field-name="quantityOnHandTotal"/></entity-find><set field="quantityOnHandTotal" from="locQtySummaryList ? locQtySummaryList[0].quantityOnHandTotal : 0.0"/></if><entity-find entity-name="mantle.product.asset.AssetLocationSummary" list="pickLocQtyList"><econdition field-name="productId"/><econdition field-name="facilityId"/><econdition field-name="locationTypeEnumId" value="FltPick"/><select-field field-name="availableToPromiseTotal"/></entity-find><set field="pickAtpTotal" from="pickLocQtyList ? (pickLocQtyList[0].availableToPromiseTotal ?: 0.0) : 0.0"/><set field="reservedQuantity" from="quantity ? new BigDecimal((String) quantity) : 0.0"/><set field="needQuantity" from="reservedQuantity > pickAtpTotal ? (reservedQuantity - pickAtpTotal) : 0.0"/></actions></transition>