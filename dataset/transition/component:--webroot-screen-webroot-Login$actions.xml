<!--Transition Screen Location component://webroot/screen/webroot/Login.xml Transition Name actions--><transition name="actions"><parameter name="initialTab"/><parameter name="returnTo"/><parameter name="username" from="ec.web?.sessionAttributes?.moquiPreAuthcUsername ?: username"/><actions><!--always-actions at component://webroot/screen/webroot.xml--><set field="html_scripts" from="new LinkedHashSet()"/><set field="footer_scripts" from="new LinkedHashSet()"/><set field="html_stylesheets" from="new LinkedHashSet()"/><!--pre-actions--><script><![CDATA[// if user already logged in redirect to root
        if (ec.user.userId) sri.sendRedirectAndStopRender('/')

        // jQuery/UI
        html_scripts.add('/libs/jquery/jquery.min.js')
        // Bootstrap
        html_scripts.add('/libs/twitter-bootstrap/js/bootstrap.min.js')
        // Moqui webroot layout
        html_stylesheets.add('/css/webroot-layout.css')]]></script><!--actions--><if condition="returnTo"><then><log message="setting last path to ${returnTo}"/><script><![CDATA[ec.web.session.setAttribute('moqui.screen.last.path', returnTo)]]></script></then><else><if condition="!ec.web.session.getAttribute('moqui.screen.last.path')"><set field="referrer" from="ec.web.request.getHeader('Referer')"/><if condition="referrer"><script><![CDATA[ec.web.session.setAttribute('moqui.screen.last.path', referrer)]]></script></if></if></else></if><set field="passwordChangeRequired" from="ec.web.sessionAttributes.moquiPasswordChangeRequired ?: 'false'" type="Boolean"/><set field="expiredCredentials" from="ec.web.sessionAttributes.moquiExpiredCredentials ?: 'false'" type="Boolean"/><if condition="passwordChangeRequired || expiredCredentials"><set field="initialTab" value="#change"/></if><if condition="initialTab && !initialTab.startsWith('#')"><set field="initialTab" from="'#' + initialTab"/></if><set field="secondFactorRequired" from="false"/><if condition="ec.web.sessionAttributes.moquiPreAuthcUsername"><then><set field="username" from="ec.web.sessionAttributes.moquiPreAuthcUsername"/><service-call name="org.moqui.impl.UserServices.get#ExternalUserAuthcFactorInfo" out-map="context"/></then><else><set field="username" from="ec.web.errorParameters?.username ?: ''"/></else></if><set field="passwordNode" from="ec.ecfi.confXmlRoot.first('user-facade').first('password')"/><set field="minLength" from="passwordNode.attribute('min-length')" default-value="8" type="Integer"/><set field="minDigits" from="passwordNode.attribute('min-digits')" default-value="1" type="Integer"/><set field="minOthers" from="passwordNode.attribute('min-others')" default-value="1" type="Integer"/></actions></transition>