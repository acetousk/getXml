<!--Transition Screen Location component://coarchy/screen/settings/settingsinternal/Organizations.xml Transition Name getCloneOrganizationList--><transition name="getCloneOrganizationList"><actions><!--always-actions at component://webroot/screen/webroot.xml--><set field="html_scripts" from="new LinkedHashSet()"/><set field="footer_scripts" from="new LinkedHashSet()"/><set field="html_stylesheets" from="new LinkedHashSet()"/><!--always-actions at component://coarchy/screen/settings/settingsinternal/Organizations.xml--><entity-find entity-name="mantle.party.PartyToAndRelationship" list="organizationList" distinct="true"><date-filter/><econdition field-name="relationshipTypeEnumId" value="PrtMember"/><econditions combine="or"><econdition field-name="fromPartyId" from="ec.user.userAccount.partyId"/><econdition field-name="visibilityEnumId" value="PvPublic"/></econditions><select-field field-name="toPartyId,ownerPartyId,organizationName,visibilityEnumId"/><order-by field-name="-visibilityEnumId"/></entity-find><entity-find entity-name="mantle.party.PartyToAndRelationship" list="vendorOrganizationList" distinct="true"><date-filter/><econdition field-name="relationshipTypeEnumId" value="PrtVendorRepresentative"/><econdition field-name="toRoleTypeId" value="VendorRepresentative"/><econdition field-name="fromPartyId" from="ec.user.userAccount.partyId"/><select-field field-name="toPartyId,ownerPartyId,organizationName,visibilityEnumId"/><order-by field-name="-visibilityEnumId"/></entity-find><set field="ownerOfAnyOrganization" from="organizationList*.ownerPartyId.contains(ec.user.userAccount.partyId)"/><!--transition actions--><entity-find entity-name="mantle.party.PartyDetail" list="organizationList" distinct="true"><econdition field-name="partyTypeEnumId" value="PtyOrganization"/><econditions combine="or"><econdition field-name="ownerPartyId" from="ec.user.userAccount.partyId"/><econdition field-name="visibilityEnumId" value="PvPublic"/><econdition field-name="partyId" operator="in" from="organizationList*.toPartyId"/></econditions><select-field field-name="partyId,organizationName,visibilityEnumId"/><order-by field-name="-visibilityEnumId,organizationName"/></entity-find><set field="cloneOrganizationList" from="[]"/><iterate list="organizationList" entry="organization"><if condition="organization.visibilityEnumId == 'PvPublic'"><script><![CDATA[cloneOrganizationList.add([value:organization.partyId, label:"${organization.visibilityEnumId=='PvPublic'?organization.organizationName+' - Template':organization.organizationName}"])]]></script><continue/></if><entity-find-count entity-name="mantle.party.PartyActivation" count-field="partyActivationCount"><econdition field-name="partyId" from="organization.partyId"/><date-filter/></entity-find-count><if condition="partyActivationCount > 0"><script><![CDATA[cloneOrganizationList.add([value:organization.partyId, label:"${organization.visibilityEnumId=='PvPublic'?organization.organizationName+' - Template':organization.organizationName}"])]]></script></if></iterate><script><![CDATA[ec.web.sendJsonResponse(cloneOrganizationList)]]></script></actions></transition>