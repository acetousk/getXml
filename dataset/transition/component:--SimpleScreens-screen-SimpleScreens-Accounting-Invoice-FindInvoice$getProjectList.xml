<!--Transition Screen Location component://SimpleScreens/screen/SimpleScreens/Accounting/Invoice/FindInvoice.xml Transition Name getProjectList--><transition name="getProjectList"><parameter name="term"/><parameter name="statusId"/><actions><!--always-actions at component://webroot/screen/webroot.xml--><set field="html_scripts" from="new LinkedHashSet()"/><set field="footer_scripts" from="new LinkedHashSet()"/><set field="html_stylesheets" from="new LinkedHashSet()"/><!--always-actions at component://PopCommerce/screen/PopCommerceAdmin.xml--><set field="appRoot" value="PopcAdmin"/><set field="searchIndexName" value="mantle"/><set field="searchLinkSets" value="PopcAdmin"/><set field="searchProductDocType" value="MantleProduct"/><set field="searchPartyDocType" value="MantleParty"/><set field="appUserGroupTypeEnumId" value="UgtPopcAdmin"/><service-call name="mantle.party.PartyServices.setup#UserOrganizationInfo" out-map="context"/><!--transition actions--><set field="outList" from="[]"/><entity-find-one entity-name="mantle.work.effort.WorkEffort" value-field="workEffort"><field-map field-name="workEffortId" from="term"/></entity-find-one><if condition="workEffort != null"><script><![CDATA[outList.add([value:workEffort.workEffortId, label:ec.resource.expand("WorkEffortNameTemplate", "", workEffort)])]]></script></if><entity-find entity-name="mantle.work.effort.WorkEffortAndParty" list="projectList" limit="50"><econdition field-name="workEffortTypeEnumId" value="WetProject"/><econdition field-name="statusId" operator="in" ignore-if-empty="true"/><econditions combine="or"><econdition field-name="workEffortId" operator="like" value="%${term}%" ignore-case="true" ignore-if-empty="true"/><econdition field-name="workEffortName" operator="like" value="%${term}%" ignore-case="true" ignore-if-empty="true"/><econdition field-name="description" operator="like" value="%${term}%" ignore-case="true" ignore-if-empty="true"/></econditions><select-field field-name="workEffortId,workEffortName"/><order-by field-name="workEffortId"/></entity-find><script><![CDATA[for (def project in projectList)
                    outList.add([value:project.workEffortId, label:ec.resource.expand("WorkEffortNameTemplate", "", project)])
                ec.web.sendJsonResponse(outList)]]></script></actions></transition>