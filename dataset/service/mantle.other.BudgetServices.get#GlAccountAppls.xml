<!--Service Location mantle.other.BudgetServices.get#GlAccountAppls--><service verb="get" noun="GlAccountAppls"><in-parameters><parameter name="glAccountId" required="true"/><parameter name="ownerPartyIds" type="Set"/></in-parameters><out-parameters><parameter name="assetIdSet" type="Set"><parameter name="assetId"/></parameter><parameter name="facilityIdSet" type="Set"><parameter name="facilityId"/></parameter></out-parameters><actions><entity-find entity-name="mantle.product.asset.AssetAndGlAppl" list="assetGlApplList"><econdition field-name="glAccountId"/><econdition field-name="ownerPartyId" operator="in" from="ownerPartyIds" ignore-if-empty="true"/><select-field field-name="assetId"/></entity-find><set field="assetIdSet" from="new HashSet(assetGlApplList*.assetId)"/><entity-find entity-name="mantle.product.ProductGlAppl" list="productGlApplList"><econdition field-name="glAccountId"/></entity-find><set field="productIdSet" from="new HashSet(productGlApplList*.productId)"/><if condition="productIdSet"><entity-find entity-name="mantle.product.asset.Asset" list="assetList"><econdition field-name="productId" operator="in" from="productIdSet"/><econdition field-name="ownerPartyId" operator="in" from="ownerPartyIds" ignore-if-empty="true"/><select-field field-name="assetId"/></entity-find><script><![CDATA[assetIdSet.addAll(assetList*.assetId)]]></script></if><entity-find entity-name="mantle.facility.FacilityAndGlAppl" list="facilityGlApplList"><econdition field-name="glAccountId"/><econditions combine="or"><econdition field-name="ownerPartyId" operator="in" from="ownerPartyIds" ignore-if-empty="true"/><econdition field-name="partyId" operator="in" from="ownerPartyIds" ignore-if-empty="true"/></econditions><select-field field-name="facilityId"/></entity-find><set field="facilityIdSet" from="new HashSet(facilityGlApplList*.facilityId)"/><entity-find entity-name="mantle.ledger.account.GlAccountEnumAppl" list="glAccountEnumApplList"><econdition field-name="glAccountId"/></entity-find><if condition="glAccountEnumApplList"><set field="enumIdSet" from="new HashSet(glAccountEnumApplList*.enumId)"/><entity-find entity-name="mantle.facility.FacilityAndParty" list="facilityList"><econdition field-name="facilityTypeEnumId" operator="in" from="enumIdSet"/><econditions combine="or"><econdition field-name="ownerPartyId" operator="in" from="ownerPartyIds" ignore-if-empty="true"/><econdition field-name="partyId" operator="in" from="ownerPartyIds" ignore-if-empty="true"/></econditions><select-field field-name="facilityId"/></entity-find><script><![CDATA[facilityIdSet.addAll(facilityList*.facilityId)]]></script></if></actions></service>