<!--Service Location mantle.ledger.InvoiceAutoPostServices.get#InvoiceTypeTransType--><service verb="get" noun="InvoiceTypeTransType"><in-parameters><parameter name="invoiceTypeEnumId" required="true" entity-name="mantle.ledger.config.InvoiceTypeTransType" field-name="invoiceTypeEnumId"/><parameter name="organizationPartyId" required="true" entity-name="mantle.ledger.config.InvoiceTypeTransType" field-name="organizationPartyId"/><parameter name="isPayable" required="true" entity-name="mantle.ledger.config.InvoiceTypeTransType" field-name="isPayable"/></in-parameters><out-parameters><parameter name="acctgTransTypeEnumId" entity-name="mantle.ledger.config.InvoiceTypeTransType" field-name="acctgTransTypeEnumId"/><parameter name="glAccountId" entity-name="mantle.ledger.config.InvoiceTypeTransType" field-name="glAccountId"/><parameter name="glAccountTypeEnumId"/></out-parameters><actions><service-call name="mantle.ledger.LedgerServices.expand#ParentOrganizationList" out-map="[orgPartyIdList:context.orgPartyIdList]" in-map="[organizationPartyId:organizationPartyId]"/><entity-find entity-name="mantle.ledger.config.InvoiceTypeTransType" list="invoiceTypeTransTypeList" cache="true"><econdition field-name="organizationPartyId" operator="in" from="orgPartyIdList"/><econdition field-name="invoiceTypeEnumId"/><econdition field-name="isPayable"/></entity-find><set field="acctgTransTypeEnumId" from="invoiceTypeTransTypeList.first?.acctgTransTypeEnumId"/><set field="glAccountId" from="invoiceTypeTransTypeList.first?.glAccountId"/><if condition="glAccountId"><entity-find-one entity-name="mantle.ledger.account.GlAccount" value-field="glAccount" cache="true"><field-map field-name="glAccountId"/></entity-find-one><set field="glAccountTypeEnumId" from="glAccount?.glAccountTypeEnumId"/></if><if condition="!glAccountId"><set field="glAccountTypeEnumId" from="isPayable == 'Y' ? 'GatAccountsPayable' : 'GatAccountsReceivable'"/><service-call name="mantle.ledger.LedgerServices.get#DefaultGlAccountByType" out-map="[glAccountId:invoiceBalanceGlAccountOut.glAccountId]" in-map="[glAccountTypeEnumId:glAccountTypeEnumId, organizationPartyId:organizationPartyId]"/><set field="glAccountId" from="invoiceBalanceGlAccountOut.glAccountId"/></if></actions></service>