<!--Service Location coarchy.CoarchyServices.delete#ValueStatement--><service verb="delete" noun="ValueStatement"><in-parameters><parameter name="valueStatementId" required="true" entity-name="coarchy.ValueStatement" field-name="valueStatementId"/><parameter name="organizationId" required="true" entity-name="coarchy.ValueStatement" field-name="organizationId"/></in-parameters><out-parameters><parameter name="valueStatementId" entity-name="coarchy.ValueStatement" field-name="valueStatementId"/></out-parameters><actions><entity-find-count entity-name="coarchy.ValueStatementActivity" count-field="valueStatementActivityCount"><date-filter/><econdition field-name="valueStatementId"/></entity-find-count><if condition="valueStatementActivityCount > 0"><return type="warning" message="${ec.resource.expand('CoarchyProcessValueStatementDeleteError', null)}"/></if><entity-find entity-name="coarchy.ValueStatementTag" list="statementTagList" for-update="true"><date-filter/><econdition field-name="tagId"/><econdition field-name="valueStatementId"/><econdition field-name="organizationId"/></entity-find><iterate list="statementTagList" entry="statementTag"><set field="statementTag.thruDate" from="ec.user.nowTimestamp"/><entity-update value-field="statementTag"/></iterate><entity-find-count entity-name="coarchy.product.ProductEvaluationStatement" count-field="existingEvaluationRecordCount"><econdition field-name="statementId" from="valueStatementId"/><econdition field-name="organizationId"/></entity-find-count><if condition="existingEvaluationRecordCount > 0"><service-call name="update#coarchy.ValueStatement" in-map="[valueStatementId:valueStatementId, disabled:'Y']"/><else><service-call name="delete#coarchy.ValueStatement" in-map="[valueStatementId:valueStatementId]"/></else></if></actions></service>