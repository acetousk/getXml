<!--Service Location mantle.party.PartyServices.update#Account--><service verb="update" noun="Account"><in-parameters><parameter name="userId"/><parameter name="partyId"/><parameter name="salutation" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="salutation"/><parameter name="firstName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="firstName"/><parameter name="middleName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="middleName"/><parameter name="lastName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="lastName"/><parameter name="personalTitle" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="personalTitle"/><parameter name="suffix" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="suffix"/><parameter name="nickname" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="nickname"/><parameter name="gender" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="gender"/><parameter name="birthDate" type="java.sql.Date" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="birthDate"/><parameter name="deceasedDate" type="java.sql.Date" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="deceasedDate"/><parameter name="height" type="java.lang.Double" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="height"/><parameter name="weight" type="java.lang.Double" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="weight"/><parameter name="mothersMaidenName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="mothersMaidenName"/><parameter name="maritalStatusEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="maritalStatusEnumId"/><parameter name="employmentStatusEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="employmentStatusEnumId"/><parameter name="residenceStatusEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="residenceStatusEnumId"/><parameter name="occupation" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="occupation"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="lastUpdatedStamp"/><parameter name="disabled"/><parameter name="requirePasswordChange"/><parameter name="emailAddress"><text-email/></parameter><parameter name="username"/><parameter name="currencyUomId"/><parameter name="locale"/><parameter name="timeZone"/></in-parameters><out-parameters/><actions><if condition="!userId && !partyId"><return error="true" message="To update account must specify either userId or partyId"/></if><if condition="!userId"><then><entity-find entity-name="moqui.security.UserAccount" list="userAccountList"><econdition field-name="partyId"/></entity-find><set field="userId" from="userAccountList?.first?.userId"/></then><else-if condition="!partyId"><entity-find-one entity-name="moqui.security.UserAccount" value-field="userAccount"/><set field="partyId" from="userAccount.partyId"/></else-if></if><if condition="userId"><service-call name="org.moqui.impl.UserServices.update#UserAccount" in-map="context"/></if><set field="prePartyId" from="partyId"/><service-call name="store#mantle.party.Party" in-map="context" out-map="[partyId:context.partyId,pseudoId:context.pseudoId,partyTypeEnumId:context.partyTypeEnumId,disabled:context.disabled,customerStatusId:context.customerStatusId,ownerPartyId:context.ownerPartyId,externalId:context.externalId,dataSourceId:context.dataSourceId,gatewayCimId:context.gatewayCimId,comments:context.comments,shippingInstructions:context.shippingInstructions,hasDuplicates:context.hasDuplicates,lastDupCheckDate:context.lastDupCheckDate,mergedToPartyId:context.mergedToPartyId,visibilityEnumId:context.visibilityEnumId,lastUpdatedStamp:context.lastUpdatedStamp]"/><service-call name="store#mantle.party.Person" in-map="context"/><if condition="!prePartyId"><service-call name="store#moqui.security.UserAccount" in-map="[userId:userId, partyId:partyId]"/></if><if condition="emailAddress"><service-call name="mantle.party.ContactServices.store#PartyContactInfo" in-map="[partyId:partyId, emailAddress:emailAddress, emailContactMechPurposeId:'EmailPrimary', replaceByPurpose:true]"/></if></actions></service>