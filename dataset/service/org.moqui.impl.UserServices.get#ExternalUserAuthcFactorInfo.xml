<!--Service Location org.moqui.impl.UserServices.get#ExternalUserAuthcFactorInfo--><service verb="get" noun="ExternalUserAuthcFactorInfo"><in-parameters/><out-parameters><parameter name="secondFactorRequired" type="Boolean"/><parameter name="factorTypeEnumIds" type="Set"/><parameter name="factorTypeDescriptions" type="List"/><parameter name="sendableFactors" type="List"><parameter name="sendableFactor" type="Map"><parameter name="factorId"/><parameter name="factorTypeEnumId"/><parameter name="factorOption"/></parameter></parameter></out-parameters><actions><set field="username" from="ec.web?.sessionAttributes?.moquiPreAuthcUsername ?: ec.user.username"/><entity-find-one entity-name="moqui.security.UserAccount" value-field="userAccount"><field-map field-name="username"/></entity-find-one><if condition="userAccount == null"><return error="true" message="No user pre-authenticated"/></if><service-call name="org.moqui.impl.UserServices.get#UserAuthcFactorInfo" out-map="[secondFactorRequired:context.secondFactorRequired,factorTypeEnumIds:context.factorTypeEnumIds,factorTypeDescriptions:context.factorTypeDescriptions,sendableFactors:context.sendableFactors]"><field-map field-name="userId" from="userAccount.userId"/></service-call></actions></service>