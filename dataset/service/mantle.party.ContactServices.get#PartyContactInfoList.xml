<!--Service Location mantle.party.ContactServices.get#PartyContactInfoList--><service verb="get" noun="PartyContactInfoList"><in-parameters><parameter name="partyId" required="true"/><parameter name="postalContactMechPurposeId"/><parameter name="telecomContactMechPurposeId"/><parameter name="emailContactMechPurposeId"/><parameter name="webContactMechPurposeId"/><parameter name="getAll" type="Boolean" default="false"/><parameter name="alsoIncludePrimaryPurpose" type="Boolean" default="true"/></in-parameters><out-parameters><parameter name="postalAddressList" type="List"><parameter name="infoMap" type="Map"><parameter name="postalContactMechId"/><parameter name="postalContactMech" type="EntityValue"/><parameter name="postalContactMechPurposeId"/><parameter name="postalContactMechPurpose" type="EntityValue"/><parameter name="postalAddress" type="EntityValue"/><parameter name="postalAddressCountryGeo" type="EntityValue"/><parameter name="postalAddressStateGeo" type="EntityValue"/><parameter name="postalAddressGeoPoint" type="EntityValue"/><parameter name="postalTrustLevelEnum" type="EntityValue"/><parameter name="telecomContactMechId"/><parameter name="telecomContactMech" type="EntityValue"/><parameter name="telecomNumber" type="EntityValue"/><parameter name="emailContactMechId"/><parameter name="emailContactMech" type="EntityValue"/><parameter name="emailAddress"/></parameter></parameter><parameter name="telecomNumberList" type="List"><parameter name="infoMap" type="Map"><parameter name="telecomContactMechId"/><parameter name="telecomContactMech" type="EntityValue"/><parameter name="telecomPartyContactMech" type="EntityValue"/><parameter name="telecomContactMechPurposeId"/><parameter name="telecomContactMechPurpose" type="EntityValue"/><parameter name="telecomNumber" type="EntityValue"/></parameter></parameter><parameter name="emailAddressList" type="List"><parameter name="infoMap" type="Map"><parameter name="emailContactMechId"/><parameter name="emailContactMech" type="EntityValue"/><parameter name="emailPartyContactMech" type="EntityValue"/><parameter name="emailContactMechPurposeId"/><parameter name="emailContactMechPurpose" type="EntityValue"/><parameter name="emailAddress"/></parameter></parameter><parameter name="webAddressList" type="List"><parameter name="infoMap" type="Map"><parameter name="webContactMechId"/><parameter name="webContactMech" type="EntityValue"/><parameter name="webPartyContactMech" type="EntityValue"/><parameter name="webContactMechPurposeId"/><parameter name="webContactMechPurpose" type="EntityValue"/><parameter name="webAddress"/></parameter></parameter></out-parameters><actions><if condition="postalContactMechPurposeId"><then><set field="postalPurposeList" from="[postalContactMechPurposeId]"/><if condition="alsoIncludePrimaryPurpose && postalContactMechPurposeId != 'PostalPrimary'"><script><![CDATA[postalPurposeList.add('PostalPrimary')]]></script></if><entity-find entity-name="mantle.party.contact.PartyContactMech" list="postalPcmList"><date-filter/><econdition field-name="partyId"/><econdition field-name="contactMechPurposeId" operator="in" from="postalPurposeList"/><order-by field-name="-fromDate"/></entity-find></then><else-if condition="getAll"><entity-find entity-name="mantle.party.contact.PartyContactMechInfo" list="postalPcmList"><date-filter/><econdition field-name="partyId"/><econdition field-name="contactMechTypeEnumId" value="CmtPostalAddress"/><order-by field-name="-fromDate"/></entity-find></else-if></if><if condition="postalPcmList"><set field="postalAddressList" from="[]"/><iterate list="postalPcmList" entry="postalPcm"><set field="postalContactMechId" from="postalPcm.contactMechId"/><entity-find-one entity-name="mantle.party.contact.ContactMech" value-field="postalContactMech"><field-map field-name="contactMechId" from="postalContactMechId"/></entity-find-one><entity-find-one entity-name="mantle.party.contact.PostalAddress" value-field="postalAddress"><field-map field-name="contactMechId" from="postalContactMechId"/></entity-find-one><if condition="postalAddress == null"><log level="error" message="No PostalAddress found for contactMechId ${postalContactMechId} which is used for Party with partyId ${partyId} with contactMechPurposeId ${postalPcm.contactMechPurposeId}"/><continue/></if><entity-find-one entity-name="mantle.party.contact.ContactMechPurpose" value-field="postalContactMechPurpose"><field-map field-name="contactMechPurposeId" from="postalPcm.contactMechPurposeId"/></entity-find-one><set field="postalAddressStateGeo" from="postalAddress?.stateProvinceGeo"/><set field="postalAddressCountryGeo" from="postalAddress?.countryGeo"/><set field="postalAddressGeoPoint" from="postalAddress?.geoPoint"/><set field="postalTrustLevelEnum" from="postalContactMech?.trustLevel"/><set field="postalTelecomContactMechId" from="null"/><set field="postalTelecomContactMech" from="null"/><set field="postalTelecomNumber" from="null"/><if condition="postalAddress.telecomContactMechId"><set field="postalTelecomContactMechId" from="postalAddress.telecomContactMechId"/><entity-find-one entity-name="mantle.party.contact.ContactMech" value-field="postalTelecomContactMech"><field-map field-name="contactMechId" from="postalTelecomContactMechId"/></entity-find-one><entity-find-one entity-name="mantle.party.contact.TelecomNumber" value-field="postalTelecomNumber"><field-map field-name="contactMechId" from="postalTelecomContactMechId"/></entity-find-one></if><set field="postalEmailContactMechId" from="null"/><set field="postalEmailContactMech" from="null"/><if condition="postalAddress.emailContactMechId"><set field="postalEmailContactMechId" from="postalAddress.emailContactMechId"/><entity-find-one entity-name="mantle.party.contact.ContactMech" value-field="postalEmailContactMech"><field-map field-name="contactMechId" from="postalEmailContactMechId"/></entity-find-one></if><set field="postalAddressInfo" from="[postalContactMechId:postalContactMechId, postalContactMech:postalContactMech,                             postalContactMechPurposeId:postalPcm.contactMechPurposeId, postalContactMechPurpose:postalContactMechPurpose,                             postalAddress:postalAddress, postalAddressStateGeo:postalAddressStateGeo,                             postalAddressCountryGeo:postalAddressCountryGeo, postalAddressGeoPoint:postalAddressGeoPoint,                             postalTrustLevelEnum:postalTrustLevelEnum,                             telecomContactMechId:postalTelecomContactMechId, telecomContactMech:postalTelecomContactMech, telecomNumber:postalTelecomNumber,                             emailContactMechId:postalEmailContactMechId, emailContactMech:postalEmailContactMech, emailAddress:postalEmailContactMech?.infoString]"/><script><![CDATA[postalAddressList.add(postalAddressInfo)]]></script></iterate></if><if condition="telecomContactMechPurposeId"><then><set field="telecomPurposeList" from="[telecomContactMechPurposeId]"/><if condition="alsoIncludePrimaryPurpose && telecomContactMechPurposeId != 'PhonePrimary'"><script><![CDATA[telecomPurposeList.add('PhonePrimary')]]></script></if><entity-find entity-name="mantle.party.contact.PartyContactMech" list="telecomPcmList"><date-filter/><econdition field-name="partyId"/><econdition field-name="contactMechPurposeId" operator="in" from="telecomPurposeList"/><order-by field-name="-fromDate"/></entity-find></then><else-if condition="getAll"><entity-find entity-name="mantle.party.contact.PartyContactMechInfo" list="telecomPcmList"><date-filter/><econdition field-name="partyId"/><econdition field-name="contactMechTypeEnumId" value="CmtTelecomNumber"/><order-by field-name="-fromDate"/></entity-find></else-if></if><if condition="telecomPcmList"><set field="telecomNumberList" from="[]"/><iterate list="telecomPcmList" entry="telecomPcm"><set field="telecomContactMechId" from="telecomPcm.contactMechId"/><entity-find-one entity-name="mantle.party.contact.ContactMech" value-field="telecomContactMech"><field-map field-name="contactMechId" from="telecomContactMechId"/></entity-find-one><entity-find-one entity-name="mantle.party.contact.TelecomNumber" value-field="telecomNumber"><field-map field-name="contactMechId" from="telecomContactMechId"/></entity-find-one><if condition="telecomNumber == null"><log level="error" message="No TelecomNumber found for contactMechId ${telecomContactMechId} which is used for Party with partyId ${partyId} with contactMechPurposeId ${telecomPcm.contactMechPurposeId}"/><continue/></if><entity-find-one entity-name="mantle.party.contact.ContactMechPurpose" value-field="telecomContactMechPurpose"><field-map field-name="contactMechPurposeId" from="telecomPcm.contactMechPurposeId"/></entity-find-one><set field="telecomNumberInfo" from="[telecomContactMechId:telecomContactMechId,                             telecomContactMechPurposeId:telecomPcm.contactMechPurposeId, telecomContactMechPurpose:telecomContactMechPurpose,                             telecomPartyContactMech:telecomPcm, telecomNumber:telecomNumber]"/><script><![CDATA[telecomNumberList.add(telecomNumberInfo)]]></script></iterate></if><if condition="emailContactMechPurposeId"><then><set field="emailPurposeList" from="[emailContactMechPurposeId]"/><if condition="alsoIncludePrimaryPurpose && emailContactMechPurposeId != 'EmailPrimary'"><script><![CDATA[emailPurposeList.add('EmailPrimary')]]></script></if><entity-find entity-name="mantle.party.contact.PartyContactMech" list="emailPcmList"><date-filter/><econdition field-name="partyId"/><econdition field-name="contactMechPurposeId" operator="in" from="emailPurposeList"/><order-by field-name="-fromDate"/></entity-find></then><else-if condition="getAll"><entity-find entity-name="mantle.party.contact.PartyContactMechInfo" list="emailPcmList"><date-filter/><econdition field-name="partyId"/><econdition field-name="contactMechTypeEnumId" value="CmtEmailAddress"/><order-by field-name="-fromDate"/></entity-find></else-if></if><if condition="emailPcmList"><set field="emailAddressList" from="[]"/><iterate list="emailPcmList" entry="emailPcm"><set field="emailContactMechId" from="emailPcm.contactMechId"/><entity-find-one entity-name="mantle.party.contact.ContactMech" value-field="emailContactMech"><field-map field-name="contactMechId" from="emailContactMechId"/></entity-find-one><entity-find-one entity-name="mantle.party.contact.ContactMechPurpose" value-field="emailContactMechPurpose"><field-map field-name="contactMechPurposeId" from="emailPcm.contactMechPurposeId"/></entity-find-one><set field="emailAddressInfo" from="[emailContactMechId:emailContactMechId, emailContactMech:emailContactMech,                             emailContactMechPurposeId:emailPcm.contactMechPurposeId, emailContactMechPurpose:emailContactMechPurpose,                             emailPartyContactMech:emailPcm, emailAddress:emailContactMech.infoString]"/><script><![CDATA[emailAddressList.add(emailAddressInfo)]]></script></iterate></if><if condition="webContactMechPurposeId"><then><set field="webPurposeList" from="[webContactMechPurposeId]"/><if condition="alsoIncludePrimaryPurpose && webContactMechPurposeId != 'WebUrlPrimary'"><script><![CDATA[webPurposeList.add('WebUrlPrimary')]]></script></if><entity-find entity-name="mantle.party.contact.PartyContactMech" list="webPcmList"><date-filter/><econdition field-name="partyId"/><econdition field-name="contactMechPurposeId" operator="in" from="webPurposeList"/><order-by field-name="-fromDate"/></entity-find></then><else-if condition="getAll"><entity-find entity-name="mantle.party.contact.PartyContactMechInfo" list="webPcmList"><date-filter/><econdition field-name="partyId"/><econdition field-name="contactMechTypeEnumId" value="CmtWebAddress"/><order-by field-name="-fromDate"/></entity-find></else-if></if><if condition="webPcmList"><set field="webAddressList" from="[]"/><iterate list="webPcmList" entry="webPcm"><set field="webContactMechId" from="webPcm.contactMechId"/><entity-find-one entity-name="mantle.party.contact.ContactMech" value-field="webContactMech"><field-map field-name="contactMechId" from="webContactMechId"/></entity-find-one><entity-find-one entity-name="mantle.party.contact.ContactMechPurpose" value-field="webContactMechPurpose"><field-map field-name="contactMechPurposeId" from="webPcm.contactMechPurposeId"/></entity-find-one><set field="webInfo" from="[webContactMechId:webContactMechId, webContactMech:webContactMech,                             webContactMechPurposeId:webPcm.contactMechPurposeId, webContactMechPurpose:webContactMechPurpose,                             webPartyContactMech:webPcm, webAddress:webContactMech.infoString]"/><script><![CDATA[webAddressList.add(webInfo)]]></script></iterate></if></actions></service>