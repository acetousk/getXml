<!--Service Location mantle.order.OrderServices.merge#OrderItems--><service verb="merge" noun="OrderItems"><in-parameters><parameter name="orderId" required="true"/><parameter name="fromOrderId" required="true"/></in-parameters><out-parameters/><actions><entity-find entity-name="mantle.order.OrderItem" list="orderItemList"><econdition field-name="orderId" from="fromOrderId"/></entity-find><entity-find entity-name="moqui.basic.EnumGroupMember" list="productItemTypeEgms" cache="true"><econdition field-name="enumGroupEnumId" value="EngItemsProduct"/></entity-find><set field="productItemTypes" from="productItemTypeEgms*.enumId"/><iterate list="orderItemList" entry="orderItem"><if condition="!orderItem.productId || !productItemTypes.contains(orderItem.itemTypeEnumId)"><continue/></if><service-call name="mantle.order.OrderServices.add#OrderProductQuantity" in-map="[orderId:orderId, productId:orderItem.productId, quantity:orderItem.quantity]"/></iterate></actions></service>