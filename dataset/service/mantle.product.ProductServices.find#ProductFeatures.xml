<!--Service Location mantle.product.ProductServices.find#ProductFeatures--><service verb="find" noun="ProductFeatures"><in-parameters><parameter name="productId" required="true"/><parameter name="applTypeEnumId"/><parameter name="productFeatureGroupIdSet" type="Set"><parameter name="productFeatureGroupId"/></parameter></in-parameters><out-parameters><parameter name="productFeatureList" type="List"><parameter name="productFeature" type="Map"/></parameter></out-parameters><actions><set field="productFeatureList" from="[]"/><entity-find entity-name="mantle.product.feature.ProductFeatureAndAppl" list="pfaaList"><date-filter/><econdition field-name="productId"/><econdition field-name="applTypeEnumId" from="applTypeEnumId" ignore-if-empty="true"/></entity-find><script><![CDATA[productFeatureList.addAll(pfaaList)]]></script><entity-find entity-name="mantle.product.category.ProductCategoryMember" list="pcmList"><date-filter/><econdition field-name="productId"/></entity-find><iterate list="pcmList" entry="pcm"><entity-find entity-name="mantle.product.feature.ProductCategoryFeatGrpAppl" list="pcfgaList"><date-filter/><econdition field-name="productCategoryId" from="pcm.productCategoryId"/><econdition field-name="productFeatureGroupId" operator="in" from="productFeatureGroupIdSet" ignore-if-empty="true"/><econdition field-name="applTypeEnumId" ignore-if-empty="true"/></entity-find><iterate list="pcfgaList" entry="pcfga"><entity-find entity-name="mantle.product.feature.ProductFeatureAndGroupAppl" list="pfagaList"><date-filter/><econdition field-name="productFeatureGroupId" from="pcfga.productFeatureGroupId"/></entity-find><script><![CDATA[productFeatureList.addAll(pfagaList)]]></script></iterate></iterate></actions></service>