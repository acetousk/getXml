<!--Service Location mantle.ledger.LedgerServices.get#DefaultGlAccountByType--><service verb="get" noun="DefaultGlAccountByType"><in-parameters><parameter name="glAccountTypeEnumId" required="true"/><parameter name="organizationPartyId" required="true"/></in-parameters><out-parameters><parameter name="glAccountId"/></out-parameters><actions><entity-find entity-name="mantle.ledger.config.GlAccountTypeDefault" list="glAccountTypeDefaultList" cache="true"><econdition field-name="organizationPartyId"/><econdition field-name="glAccountTypeEnumId"/></entity-find><set field="glAccountId" from="glAccountTypeDefaultList.first?.glAccountId"/><if condition="!glAccountId"><entity-find entity-name="mantle.party.PartyRelationship" list="partyRelationshipList" cache="true"><date-filter/><econdition field-name="fromPartyId" from="organizationPartyId"/><econdition field-name="relationshipTypeEnumId" value="PrtOrgRollup"/><econdition field-name="fromRoleTypeId" value="OrgInternal"/><econdition field-name="toRoleTypeId" value="OrgInternal"/></entity-find><if condition="partyRelationshipList"><service-call name="mantle.ledger.LedgerServices.get#DefaultGlAccountByType" out-map="[glAccountId:context.glAccountId]" in-map="[organizationPartyId:partyRelationshipList[0].toPartyId,                                 glAccountTypeEnumId:glAccountTypeEnumId]"/></if></if></actions></service>