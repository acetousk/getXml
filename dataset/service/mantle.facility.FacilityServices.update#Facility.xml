<!--Service Location mantle.facility.FacilityServices.update#Facility--><service verb="update" noun="Facility"><in-parameters><parameter name="facilityId" required="true" entity-name="mantle.facility.Facility" field-name="facilityId"/><parameter name="pseudoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="pseudoId"/><parameter name="facilityTypeEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="facilityTypeEnumId"/><parameter name="parentFacilityId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="parentFacilityId"/><parameter name="statusId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="statusId"/><parameter name="ownerPartyId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="ownerPartyId"/><parameter name="facilityName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="facilityName"/><parameter name="facilitySize" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="facilitySize"/><parameter name="facilitySizeUomId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="facilitySizeUomId"/><parameter name="openedDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="openedDate"/><parameter name="closedDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="closedDate"/><parameter name="description" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="description"/><parameter name="geoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="geoId"/><parameter name="geoPointId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="geoPointId"/><parameter name="countyGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="countyGeoId"/><parameter name="stateGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="stateGeoId"/><parameter name="assetAllowOtherOwner" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="assetAllowOtherOwner"/><parameter name="assetAllowIssueOverQoh" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="assetAllowIssueOverQoh"/><parameter name="assetInventoryLocRequire" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="assetInventoryLocRequire"/><parameter name="defaultDaysToShip" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="defaultDaysToShip"/><parameter name="externalId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="externalId"/><parameter name="originId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="originId"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="lastUpdatedStamp"/><parameter name="toName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="toName"/><parameter name="attnName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="attnName"/><parameter name="address1" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="address1"/><parameter name="address2" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="address2"/><parameter name="unitNumber" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="unitNumber"/><parameter name="directions" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="directions"/><parameter name="city" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="city"/><parameter name="cityGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="cityGeoId"/><parameter name="schoolDistrictGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="schoolDistrictGeoId"/><parameter name="stateProvinceGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="stateProvinceGeoId"/><parameter name="countryGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="countryGeoId"/><parameter name="postalCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="postalCode"/><parameter name="postalCodeExt" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="postalCodeExt"/><parameter name="postalCodeGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="postalCodeGeoId"/><parameter name="commercial" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="commercial"/><parameter name="accessCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="accessCode"/><parameter name="telecomContactMechId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="telecomContactMechId"/><parameter name="emailContactMechId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="emailContactMechId"/><parameter name="shipGatewayAddressId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="shipGatewayAddressId"/><parameter name="longitude" type="BigDecimal"/><parameter name="latitude" type="BigDecimal"/><parameter name="countryCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="countryCode"/><parameter name="areaCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="areaCode"><text-digits/></parameter><parameter name="contactNumber" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="contactNumber"><matches regexp="^\d\d[-\. \d]*\d\d$" message="Please enter a valid phone number"/></parameter><parameter name="askForName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="askForName"/><parameter name="emailAddress"/></in-parameters><out-parameters/><actions><service-call name="update#mantle.facility.Facility" in-map="context" out-map="[facilityId:context.facilityId,pseudoId:context.pseudoId,facilityTypeEnumId:context.facilityTypeEnumId,parentFacilityId:context.parentFacilityId,statusId:context.statusId,ownerPartyId:context.ownerPartyId,facilityName:context.facilityName,facilitySize:context.facilitySize,facilitySizeUomId:context.facilitySizeUomId,openedDate:context.openedDate,closedDate:context.closedDate,description:context.description,geoId:context.geoId,geoPointId:context.geoPointId,countyGeoId:context.countyGeoId,stateGeoId:context.stateGeoId,assetAllowOtherOwner:context.assetAllowOtherOwner,assetAllowIssueOverQoh:context.assetAllowIssueOverQoh,assetInventoryLocRequire:context.assetInventoryLocRequire,defaultDaysToShip:context.defaultDaysToShip,externalId:context.externalId,originId:context.originId,lastUpdatedStamp:context.lastUpdatedStamp]"/><if condition="contactNumber"><entity-find entity-name="mantle.facility.FacilityContactMech" list="phoneFcmList"><date-filter/><econdition field-name="facilityId"/><econdition field-name="contactMechPurposeId" value="PhonePrimary"/></entity-find><if condition="phoneFcmList"><then><service-call name="mantle.facility.ContactServices.update#FacilityTelecomNumber" out-map="[contactMechId:phoneOut.contactMechId]" in-map="context + [contactMechId:phoneFcmList[0].contactMechId, contactMechPurposeId:'PhonePrimary']"/></then><else><service-call name="mantle.party.ContactServices.create#TelecomNumber" out-map="[contactMechId:phoneOut.contactMechId,trustLevelEnumId:phoneOut.trustLevelEnumId]" in-map="context + [contactMechPurposeId:'PhonePrimary']"/></else></if><set field="telecomContactMechId" from="phoneOut.contactMechId"/></if><if condition="emailAddress"><entity-find entity-name="mantle.facility.FacilityContactMech" list="emailFcmList"><date-filter/><econdition field-name="facilityId"/><econdition field-name="contactMechPurposeId" value="EmailPrimary"/></entity-find><if condition="emailFcmList"><then><service-call name="mantle.facility.ContactServices.update#FacilityContactOther" out-map="[contactMechId:emOut.contactMechId]" in-map="[facilityId:facilityId, contactMechId:emailFcmList[0].contactMechId, infoString:emailAddress, contactMechPurposeId:'EmailPrimary']"/></then><else><service-call name="mantle.party.ContactServices.create#EmailAddress" out-map="[contactMechId:emOut.contactMechId]" in-map="[facilityId:facilityId, emailAddress:emailAddress, contactMechPurposeId:'EmailPrimary']"/></else></if><set field="emailContactMechId" from="emOut.contactMechId"/></if><if condition="address1 || city || postalCode"><entity-find entity-name="mantle.facility.FacilityContactMech" list="addressFcmList"><date-filter/><econdition field-name="facilityId"/><econdition field-name="contactMechPurposeId" value="PostalPrimary"/></entity-find><if condition="addressFcmList"><then><service-call name="mantle.facility.ContactServices.update#FacilityPostalAddress" out-map="[contactMechId:paOut.contactMechId]" in-map="context + [contactMechId:addressFcmList[0].contactMechId, contactMechPurposeId:'PostalPrimary']"/></then><else><service-call name="mantle.party.ContactServices.create#PostalAddress" out-map="[contactMechId:paOut.contactMechId]" in-map="context + [contactMechPurposeId:'PostalPrimary']"/></else></if></if></actions></service>