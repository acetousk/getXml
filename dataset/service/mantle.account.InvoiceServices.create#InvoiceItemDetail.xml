<!--Service Location mantle.account.InvoiceServices.create#InvoiceItemDetail--><service verb="create" noun="InvoiceItemDetail"><in-parameters><parameter name="invoiceId" type="java.lang.String" required="true" allow-html="none" entity-name="mantle.account.invoice.InvoiceItemDetail" field-name="invoiceId"/><parameter name="invoiceItemSeqId" type="java.lang.String" required="true" allow-html="none" entity-name="mantle.account.invoice.InvoiceItemDetail" field-name="invoiceItemSeqId"/><parameter name="facilityId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItemDetail" field-name="facilityId"/><parameter name="assetId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItemDetail" field-name="assetId"/><parameter name="partyId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItemDetail" field-name="partyId"/><parameter name="workEffortId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItemDetail" field-name="workEffortId"/><parameter name="quantity" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItemDetail" field-name="quantity"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItemDetail" field-name="lastUpdatedStamp"/><parameter name="createNoQuantity" type="Boolean" default="true"/></in-parameters><out-parameters><parameter name="invoiceItemDetailId" entity-name="mantle.account.invoice.InvoiceItemDetail" field-name="invoiceItemDetailId"/></out-parameters><actions><if condition="!createNoQuantity && !quantity"><return/></if><if condition="!assetId && !facilityId && !partyId"><return error="true" message="Must specify one of facility, asset, or party"/></if><if condition="assetId && facilityId"><return error="true" message="Both asset and facility specified, choose only one"/></if><if condition="assetId && partyId"><return error="true" message="Both asset and party specified, choose only one"/></if><if condition="facilityId && partyId"><return error="true" message="Both facility and party specified, choose only one"/></if><if condition="assetId"><then><entity-find entity-name="mantle.account.invoice.InvoiceItemDetail" list="iidList"><econdition field-name="invoiceId"/><econdition field-name="invoiceItemSeqId"/><econdition field-name="assetId"/></entity-find><if condition="iidList"><return message="Detail already exists for item ${invoiceItemSeqId} and asset ${assetId}"/></if></then><else-if condition="facilityId"><entity-find entity-name="mantle.account.invoice.InvoiceItemDetail" list="iidList"><econdition field-name="invoiceId"/><econdition field-name="invoiceItemSeqId"/><econdition field-name="facilityId"/></entity-find><if condition="iidList"><return message="Detail already exists for item ${invoiceItemSeqId} and facility ${facilityId}"/></if></else-if><else-if condition="partyId"><entity-find entity-name="mantle.account.invoice.InvoiceItemDetail" list="iidList"><econdition field-name="invoiceId"/><econdition field-name="invoiceItemSeqId"/><econdition field-name="partyId"/></entity-find><if condition="iidList"><return message="Detail already exists for item ${invoiceItemSeqId} and party ${partyId}"/></if></else-if></if><service-call name="create#mantle.account.invoice.InvoiceItemDetail" in-map="context" out-map="[invoiceItemDetailId:context.invoiceItemDetailId,invoiceId:context.invoiceId,invoiceItemSeqId:context.invoiceItemSeqId,facilityId:context.facilityId,assetId:context.assetId,partyId:context.partyId,workEffortId:context.workEffortId,quantity:context.quantity,lastUpdatedStamp:context.lastUpdatedStamp]"/></actions></service>