<!--Service Location wm.TaskServices.update#Task--><service verb="update" noun="Task"><in-parameters><parameter name="workEffortId" required="true"/><parameter name="rootWorkEffortId"/><parameter name="workEffortName"/><parameter name="estimatedCompletionDate"/><parameter name="description" allow-html="safe"/><parameter name="statusId"/><parameter name="priority"/><parameter name="assignToPartyId"/></in-parameters><out-parameters/><actions><service-call name="update#mantle.work.effort.WorkEffort" out-map="[workEffortId:context.workEffortId,universalId:context.universalId,sourceReferenceId:context.sourceReferenceId,parentWorkEffortId:context.parentWorkEffortId,rootWorkEffortId:context.rootWorkEffortId,workEffortTypeEnumId:context.workEffortTypeEnumId,purposeEnumId:context.purposeEnumId,visibilityEnumId:context.visibilityEnumId,resolutionEnumId:context.resolutionEnumId,workTypeEnumId:context.workTypeEnumId,ownerPartyId:context.ownerPartyId,productStoreId:context.productStoreId,statusId:context.statusId,statusFlowId:context.statusFlowId,priority:context.priority,sendNotificationEmail:context.sendNotificationEmail,percentComplete:context.percentComplete,revisionNumber:context.revisionNumber,workEffortName:context.workEffortName,description:context.description,location:context.location,facilityId:context.facilityId,infoUrl:context.infoUrl,shipmentMethodEnumId:context.shipmentMethodEnumId,estimatedStartDate:context.estimatedStartDate,estimatedCompletionDate:context.estimatedCompletionDate,actualStartDate:context.actualStartDate,actualCompletionDate:context.actualCompletionDate,recurStartCron:context.recurStartCron,recurLimit:context.recurLimit,recurEndDate:context.recurEndDate,allDayStart:context.allDayStart,allDayEnd:context.allDayEnd,estimatedWorkTime:context.estimatedWorkTime,estimatedSetupTime:context.estimatedSetupTime,remainingWorkTime:context.remainingWorkTime,actualWorkTime:context.actualWorkTime,actualSetupTime:context.actualSetupTime,totalTimeAllowed:context.totalTimeAllowed,estimatedWorkDuration:context.estimatedWorkDuration,actualWorkDuration:context.actualWorkDuration,actualBreakDuration:context.actualBreakDuration,timeUomId:context.timeUomId,actualCost:context.actualCost,actualClientCost:context.actualClientCost,totalClientCostAllowed:context.totalClientCostAllowed,costUomId:context.costUomId,activityId:context.activityId,lastUpdatedStamp:context.lastUpdatedStamp]" in-map="context"/><entity-find entity-name="mantle.work.effort.WorkEffortParty" list="assignToList"><econdition field-name="workEffortId"/><econdition field-name="roleTypeId" value="Assignee"/><date-filter/></entity-find><if condition="assignToList"><set field="curAssignToPartyId" from="assignToList[0].partyId"/></if><if condition="!assignToPartyId && curAssignToPartyId"><service-call name="mantle.work.WorkEffortServices.remove#WorkEffortParty" in-map="[workEffortId:workEffortId, roleTypeId:'Assignee', partyId:curAssignToPartyId]"/></if><if condition="assignToPartyId && curAssignToPartyId != assignToPartyId"><service-call name="mantle.work.WorkEffortServices.replace#WorkEffortParty" in-map="[workEffortId:workEffortId, roleTypeId:'Assignee', newPartyId:assignToPartyId, statusId:'WeptAssigned']"/><if condition="curAssignToPartyId"><service-call name="mantle.work.WorkEffortServices.add#WorkEffortParty" in-map="[workEffortId:workEffortId, roleTypeId:'Collaborator', partyId:curAssignToPartyId, statusId:'WeptAssigned']"/></if></if></actions></service>