<!--Service Location mantle.party.PartyServices.set#PartyClassification--><service verb="set" noun="PartyClassification"><in-parameters><parameter name="partyId" required="true"/><parameter name="partyClassificationId" required="true" entity-name="mantle.party.PartyClassification" field-name="partyClassificationId"/></in-parameters><out-parameters/><actions><entity-find-one entity-name="mantle.party.PartyClassification" value-field="partyClass" cache="true"/><set field="classificationTypeEnumId" from="partyClass.classificationTypeEnumId"/><entity-find entity-name="mantle.party.PartyClassificationAndAppl" list="pcaaList"><date-filter/><econdition field-name="partyId"/><econdition field-name="classificationTypeEnumId"/></entity-find><if condition="pcaaList.find({ it.partyClassificationId == partyClassificationId })"><return message="Classification already set on party"/></if><iterate list="pcaaList" entry="pcaa"><service-call name="update#mantle.party.PartyClassificationAppl" in-map="[partyId:partyId,                         partyClassificationId:pcaa.partyClassificationId, fromDate:pcaa.fromDate, thruDate:ec.user.nowTimestamp]"/></iterate><service-call name="create#mantle.party.PartyClassificationAppl" in-map="[partyId:partyId, partyClassificationId:partyClassificationId]"/></actions></service>