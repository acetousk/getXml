<!--Service Location org.moqui.impl.EntityServices.clone#DataDocument--><service verb="clone" noun="DataDocument"><in-parameters><parameter name="dataDocumentId" required="true" entity-name="moqui.entity.document.DataDocument" field-name="dataDocumentId"/><parameter name="newDataDocumentId" required="true"><matches regexp="[A-Z]\w*" message="Must start with a upper case letter and contain only letters and digits"/></parameter><parameter name="newIndexName"><matches regexp="[a-z][a-z0-9_]*" message="Must contain only lower case letters, digits, and underscore"/></parameter><parameter name="copyConditions" default="false" type="Boolean"/><parameter name="copyLinks" default="false" type="Boolean"/></in-parameters><out-parameters/><actions><entity-find-one entity-name="moqui.entity.document.DataDocument" value-field="newDataDocument" cache="false"><field-map field-name="dataDocumentId" from="newDataDocumentId"/></entity-find-one><if condition="newDataDocument"><log level="info" message="Not cloning DataDocument with ID [${dataDocumentId}] to new ID [${newDataDocumentId}], already exists"/><return/></if><entity-find-one entity-name="moqui.entity.document.DataDocument" value-field="dataDocument" cache="false"/><set field="dataDocument.dataDocumentId" from="newDataDocumentId"/><if condition="newIndexName"><set field="dataDocument.indexName" from="newIndexName"/></if><entity-create value-field="dataDocument"/><entity-find entity-name="moqui.entity.document.DataDocumentField" list="ddfList"><econdition field-name="dataDocumentId"/></entity-find><iterate list="ddfList" entry="ddf"><set field="ddf.dataDocumentId" from="newDataDocumentId"/><entity-create value-field="ddf"/></iterate><entity-find entity-name="moqui.entity.document.DataDocumentRelAlias" list="ddraList"><econdition field-name="dataDocumentId"/></entity-find><iterate list="ddraList" entry="ddra"><set field="ddra.dataDocumentId" from="newDataDocumentId"/><entity-create value-field="ddra"/></iterate><if condition="copyConditions"><entity-find entity-name="moqui.entity.document.DataDocumentCondition" list="ddcList"><econdition field-name="dataDocumentId"/></entity-find><iterate list="ddcList" entry="ddc"><set field="ddc.dataDocumentId" from="newDataDocumentId"/><entity-create value-field="ddc"/></iterate></if><if condition="copyLinks"><entity-find entity-name="moqui.entity.document.DataDocumentLink" list="ddlList"><econdition field-name="dataDocumentId"/></entity-find><iterate list="ddlList" entry="ddl"><set field="ddl.dataDocumentId" from="newDataDocumentId"/><entity-create value-field="ddl"/></iterate></if></actions></service>