<!--Service Location mantle.ledger.PaymentAutoPostServices.get#PaymentTypeGlAccount--><service verb="get" noun="PaymentTypeGlAccount"><in-parameters><parameter name="paymentTypeEnumId" required="true" entity-name="mantle.ledger.config.PaymentTypeGlAccount" field-name="paymentTypeEnumId"/><parameter name="organizationPartyId" required="true" entity-name="mantle.ledger.config.PaymentTypeGlAccount" field-name="organizationPartyId"/><parameter name="isApplied" required="true" entity-name="mantle.ledger.config.PaymentTypeGlAccount" field-name="isApplied"/><parameter name="isPayable" required="true" entity-name="mantle.ledger.config.PaymentTypeGlAccount" field-name="isPayable"/><parameter name="otherPartyId"/></in-parameters><out-parameters><parameter name="glAccountId" entity-name="mantle.ledger.config.PaymentTypeGlAccount" field-name="glAccountId"/><parameter name="glAccountTypeEnumId"/></out-parameters><actions><service-call name="mantle.ledger.LedgerServices.expand#ParentOrganizationList" out-map="[orgPartyIdList:context.orgPartyIdList]" in-map="[organizationPartyId:organizationPartyId]"/><if condition="!glAccountId"><entity-find entity-name="mantle.ledger.config.PaymentTypeGlAccount" list="paymentTypeGlAccountList" cache="true"><econdition field-name="organizationPartyId" operator="in" from="orgPartyIdList"/><econdition field-name="paymentTypeEnumId"/><econdition field-name="isApplied"/><econdition field-name="isPayable"/></entity-find><if condition="!paymentTypeGlAccountList"><entity-find entity-name="mantle.ledger.config.PaymentTypeGlAccount" list="paymentTypeGlAccountList" cache="true"><econdition field-name="organizationPartyId" operator="in" from="orgPartyIdList"/><econdition field-name="paymentTypeEnumId"/><econdition field-name="isApplied" value="E"/><econdition field-name="isPayable"/></entity-find></if><set field="glAccountId" from="paymentTypeGlAccountList.first?.glAccountId"/></if><if condition="glAccountId"><entity-find-one entity-name="mantle.ledger.account.GlAccount" value-field="glAccount" cache="true"><field-map field-name="glAccountId"/></entity-find-one><set field="glAccountTypeEnumId" from="glAccount?.glAccountTypeEnumId"/></if></actions></service>