<!--Service Location mantle.product.AssetServices.check#AssetReservations--><service verb="check" noun="AssetReservations"><in-parameters><parameter name="assetId" required="true"/></in-parameters><out-parameters/><actions><entity-find-one entity-name="mantle.product.asset.Asset" value-field="asset" for-update="true"/><entity-find entity-name="mantle.product.issuance.AssetReservation" list="assetReservationList"><econdition field-name="assetId"/></entity-find><iterate list="assetReservationList" entry="assetReservation"><service-call name="mantle.product.AssetServices.check#AssetReservationValid" in-map="[assetReservationId:assetReservation.assetReservationId,                             assetReservation:assetReservation, asset:asset]"/></iterate><entity-find-one entity-name="mantle.product.asset.Asset" value-field="asset" for-update="true"/><if condition="asset.availableToPromiseTotal > 0.0"><service-call name="mantle.product.AssetServices.reserve#IncreasedAsset" in-map="[assetId:assetId]"/></if></actions></service>