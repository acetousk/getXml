<!--Service Location mantle.party.ContactServices.create#PostalAddress--><service verb="create" noun="PostalAddress"><in-parameters><parameter name="toName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="toName"/><parameter name="attnName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="attnName"/><parameter name="address1" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="address1"/><parameter name="address2" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="address2"/><parameter name="unitNumber" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="unitNumber"/><parameter name="directions" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="directions"/><parameter name="city" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="city"/><parameter name="cityGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="cityGeoId"/><parameter name="schoolDistrictGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="schoolDistrictGeoId"/><parameter name="countyGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="countyGeoId"/><parameter name="stateProvinceGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="stateProvinceGeoId"/><parameter name="countryGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="countryGeoId"/><parameter name="postalCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="postalCode"/><parameter name="postalCodeExt" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="postalCodeExt"/><parameter name="postalCodeGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="postalCodeGeoId"/><parameter name="geoPointId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="geoPointId"/><parameter name="commercial" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="commercial"/><parameter name="accessCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="accessCode"/><parameter name="telecomContactMechId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="telecomContactMechId"/><parameter name="emailContactMechId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="emailContactMechId"/><parameter name="shipGatewayAddressId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="shipGatewayAddressId"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="lastUpdatedStamp"/><parameter name="geoPointTypeEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.basic.GeoPoint" field-name="geoPointTypeEnumId"/><parameter name="description" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.basic.GeoPoint" field-name="description"/><parameter name="dataSourceId" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.basic.GeoPoint" field-name="dataSourceId"/><parameter name="latitude" type="java.lang.Double" required="false" allow-html="none" entity-name="moqui.basic.GeoPoint" field-name="latitude"/><parameter name="longitude" type="java.lang.Double" required="false" allow-html="none" entity-name="moqui.basic.GeoPoint" field-name="longitude"/><parameter name="elevation" type="java.lang.Double" required="false" allow-html="none" entity-name="moqui.basic.GeoPoint" field-name="elevation"/><parameter name="elevationUomId" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.basic.GeoPoint" field-name="elevationUomId"/><parameter name="information" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.basic.GeoPoint" field-name="information"/><parameter name="thruDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="thruDate"/><parameter name="extension" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="extension"/><parameter name="comments" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="comments"/><parameter name="allowSolicitation" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="allowSolicitation"/><parameter name="usedSince" type="java.sql.Date" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="usedSince"/><parameter name="usedUntil" type="java.sql.Date" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="usedUntil"/><parameter name="verifyCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="verifyCode"/><parameter name="verifyCodeDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="verifyCodeDate"/><parameter name="verifyCodeAttempts" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="verifyCodeAttempts"/><parameter name="partyId"/><parameter name="facilityId"/><parameter name="contactMechPurposeId"/><parameter name="orderId"><description><![CDATA[If specified set OrderPart.postalContactMechId for Parts with no value, or on Part specified by orderPartSeqId]]></description></parameter><parameter name="orderPartSeqId"><description><![CDATA[If specified along with orderId set OrderPart.postalContactMechId]]></description></parameter><parameter name="shipmentId"><description><![CDATA[If specified set ShipmentRouteSegment origin and dest postal IDs]]></description></parameter><parameter name="shipmentRouteSegmentSeqId"><description><![CDATA[If specified along with shipmentId set ShipmentRouteSegment origin or dest postal IDs]]></description></parameter><parameter name="shipmentSetOrigin" type="Boolean"><description><![CDATA[If specified along with shipmentId set ShipmentRouteSegment.originPostalContactMechId]]></description></parameter><parameter name="shipmentSetDest" type="Boolean"><description><![CDATA[If specified along with shipmentId set ShipmentRouteSegment.destPostalContactMechId]]></description></parameter></in-parameters><out-parameters><parameter name="contactMechId" required="true" entity-name="mantle.party.contact.PostalAddress" field-name="contactMechId"/></out-parameters><actions><if condition="!toName"><if condition="partyId"><then><entity-find-one entity-name="mantle.party.PartyDetail" value-field="partyDetail"/><set field="toName" value="${partyDetail.firstName ? partyDetail.firstName + ' ' : ''}${partyDetail.lastName?:''}${partyDetail.organizationName?:''}"/></then><else-if condition="facilityId"><entity-find-one entity-name="mantle.facility.Facility" value-field="facility"/><set field="toName" from="facility.facilityName"/></else-if></if></if><if condition="latitude || elevation"><service-call name="create#moqui.basic.GeoPoint" in-map="context" out-map="[geoPointId:context.geoPointId,geoPointTypeEnumId:context.geoPointTypeEnumId,description:context.description,dataSourceId:context.dataSourceId,latitude:context.latitude,longitude:context.longitude,elevation:context.elevation,elevationUomId:context.elevationUomId,information:context.information,lastUpdatedStamp:context.lastUpdatedStamp]"/></if><service-call name="create#mantle.party.contact.ContactMech" out-map="[contactMechId:context.contactMechId,contactMechTypeEnumId:context.contactMechTypeEnumId,dataSourceId:context.dataSourceId,infoString:context.infoString,gatewayCimId:context.gatewayCimId,trustLevelEnumId:context.trustLevelEnumId,validateMessage:context.validateMessage,paymentFraudEvidenceId:context.paymentFraudEvidenceId,replacesContactMechId:context.replacesContactMechId,lastUpdatedStamp:context.lastUpdatedStamp]" in-map="context + [contactMechTypeEnumId:'CmtPostalAddress', trustLevelEnumId:'CmtlNew']"/><service-call name="create#mantle.party.contact.PostalAddress" in-map="context"/><if condition="partyId && contactMechPurposeId"><service-call name="create#mantle.party.contact.PartyContactMech" in-map="context"/></if><if condition="facilityId && contactMechPurposeId"><service-call name="create#mantle.facility.FacilityContactMech" in-map="context"/></if><if condition="orderId"><entity-find entity-name="mantle.order.OrderPart" list="orderPartList"><econdition field-name="orderId"/></entity-find><iterate list="orderPartList" entry="orderPart"><if condition="orderPart.postalContactMechId == null || orderPart.orderPartSeqId == orderPartSeqId"><service-call name="update#mantle.order.OrderPart" in-map="[orderId:orderId, orderPartSeqId:orderPart.orderPartSeqId, postalContactMechId:contactMechId]"/></if></iterate></if><if condition="shipmentId"><entity-find entity-name="mantle.shipment.ShipmentRouteSegment" list="routeSegmentList"><econdition field-name="shipmentId"/></entity-find><iterate list="routeSegmentList" entry="routeSegment"><if condition="shipmentSetOrigin && (routeSegment.originPostalContactMechId == null ||                             routeSegment.shipmentRouteSegmentSeqId == shipmentRouteSegmentSeqId)"><set field="routeSegment.originPostalContactMechId" from="contactMechId"/></if><if condition="shipmentSetDest && routeSegment.destPostalContactMechId == null ||                             (routeSegment.shipmentRouteSegmentSeqId == shipmentRouteSegmentSeqId)"><set field="routeSegment.destPostalContactMechId" from="contactMechId"/></if><entity-update value-field="routeSegment"/></iterate></if></actions></service>