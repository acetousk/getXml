<!--Service Location mantle.account.PaymentServices.capture#InvoicePayments--><service verb="capture" noun="InvoicePayments"><in-parameters><parameter name="invoiceId" required="true"/></in-parameters><out-parameters><parameter name="captureFailed" type="Boolean"/></out-parameters><actions><set field="captureFailed" from="false"/><entity-find entity-name="mantle.account.payment.PaymentApplication" list="paymentApplicationList"><econdition field-name="invoiceId"/></entity-find><iterate list="paymentApplicationList" entry="paymentApplication"><service-call name="mantle.account.PaymentServices.capture#SinglePayment" out-map="[paymentGatewayResponseId:captOut.paymentGatewayResponseId,paymentGatewayResponse:captOut.paymentGatewayResponse]" in-map="[paymentId:paymentApplication.paymentId, amount:paymentApplication.amountApplied]"/></iterate></actions></service>