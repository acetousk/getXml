<!--Service Location mantle.product.ProductServices.create#ProductFeature--><service verb="create" noun="ProductFeature"><in-parameters><parameter name="productFeatureTypeEnumId" type="java.lang.String" required="true" allow-html="none" entity-name="mantle.product.feature.ProductFeature" field-name="productFeatureTypeEnumId"/><parameter name="description" type="java.lang.String" required="true" allow-html="none" entity-name="mantle.product.feature.ProductFeature" field-name="description"/><parameter name="numberSpecified" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.product.feature.ProductFeature" field-name="numberSpecified"/><parameter name="numberUomId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.feature.ProductFeature" field-name="numberUomId"/><parameter name="defaultAmount" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.product.feature.ProductFeature" field-name="defaultAmount"/><parameter name="defaultSequenceNum" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.product.feature.ProductFeature" field-name="defaultSequenceNum"/><parameter name="abbrev" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.feature.ProductFeature" field-name="abbrev"/><parameter name="idCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.feature.ProductFeature" field-name="idCode"/><parameter name="ownerPartyId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.feature.ProductFeature" field-name="ownerPartyId"/><parameter name="numberPerPallet" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.product.feature.ProductFeature" field-name="numberPerPallet"/><parameter name="perPalletTier" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.product.feature.ProductFeature" field-name="perPalletTier"/><parameter name="tiersPerPallet" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.product.feature.ProductFeature" field-name="tiersPerPallet"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.product.feature.ProductFeature" field-name="lastUpdatedStamp"/><parameter name="productId"><description><![CDATA[If specified apply to product after create]]></description></parameter><parameter name="applTypeEnumId" default-value="PfatStandard"/><parameter name="fromDate" type="Timestamp" default="ec.user.nowTimestamp"/><parameter name="sequenceNum" type="Long"/><parameter name="amount" type="BigDecimal"/></in-parameters><out-parameters><parameter name="productFeatureId" entity-name="mantle.product.feature.ProductFeature" field-name="productFeatureId"/></out-parameters><actions><set field="description" from="description.trim()"/><entity-find entity-name="mantle.product.feature.ProductFeature" list="existingList"><econdition field-name="productFeatureTypeEnumId"/><econdition field-name="description" ignore-case="true"/><econdition field-name="ownerPartyId"/></entity-find><if condition="existingList"><then><entity-find-one entity-name="moqui.basic.Enumeration" value-field="typeEnum"><field-map field-name="enumId" from="productFeatureTypeEnumId"/></entity-find-one><message type="warning"><![CDATA[Feature ${existingList[0].description} of type ${typeEnum?.description ?: productFeatureTypeEnumId} already exists]]></message><set field="productFeatureId" from="existingList[0].productFeatureId"/></then><else><service-call name="create#mantle.product.feature.ProductFeature" in-map="context" out-map="[productFeatureId:context.productFeatureId,productFeatureTypeEnumId:context.productFeatureTypeEnumId,description:context.description,numberSpecified:context.numberSpecified,numberUomId:context.numberUomId,defaultAmount:context.defaultAmount,defaultSequenceNum:context.defaultSequenceNum,abbrev:context.abbrev,idCode:context.idCode,ownerPartyId:context.ownerPartyId,numberPerPallet:context.numberPerPallet,perPalletTier:context.perPalletTier,tiersPerPallet:context.tiersPerPallet,lastUpdatedStamp:context.lastUpdatedStamp]"/></else></if><if condition="productId"><service-call name="mantle.product.ProductServices.apply#ProductFeatures" in-map="[productId:productId, productFeatureIdList:[productFeatureId], applTypeEnumId:applTypeEnumId,                             fromDate:fromDate, sequenceNum:sequenceNum, amount:amount]"/></if></actions></service>