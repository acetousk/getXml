<!--Service Location mantle.humanres.EmploymentServices.create#EmploymentSalary--><service verb="create" noun="EmploymentSalary"><in-parameters><parameter name="partyRelationshipId" required="true" entity-name="mantle.humanres.employment.EmploymentSalary" field-name="partyRelationshipId"/><parameter name="thruDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.humanres.employment.EmploymentSalary" field-name="thruDate"/><parameter name="payGradeId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.humanres.employment.EmploymentSalary" field-name="payGradeId"/><parameter name="comments" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.humanres.employment.EmploymentSalary" field-name="comments"/><parameter name="amount" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.humanres.employment.EmploymentSalary" field-name="amount"/><parameter name="currencyUomId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.humanres.employment.EmploymentSalary" field-name="currencyUomId"/><parameter name="timePeriodTypeId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.humanres.employment.EmploymentSalary" field-name="timePeriodTypeId"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.humanres.employment.EmploymentSalary" field-name="lastUpdatedStamp"/><parameter name="fromDate" default="ec.user.nowTimestamp" entity-name="mantle.humanres.employment.EmploymentSalary" field-name="fromDate"/></in-parameters><out-parameters><parameter name="fromDate" entity-name="mantle.humanres.employment.EmploymentSalary" field-name="fromDate"/></out-parameters><actions><entity-find-one entity-name="mantle.humanres.employment.Employment" value-field="employment"/><if condition="!timePeriodTypeId"><set field="timePeriodTypeId" from="employment.timePeriodTypeId"/></if><if condition="!payGradeId"><entity-find-related-one value-field="employment" relationship-name="mantle.humanres.position.EmplPosition" to-value-field="emplPosition"/><set field="payGradeId" from="emplPosition.payGradeId"/></if><if condition="payGradeId"><entity-find entity-name="mantle.humanres.rate.PayGradeSalary" list="payGradeSalaryList"><date-filter/><econdition field-name="payGradeId"/><econdition field-name="timePeriodTypeId" ignore-if-empty="true"/><order-by field-name="-fromDate"/></entity-find><if condition="payGradeSalaryList"><set field="payGradeSalary" from="payGradeSalaryList[0]"/><if condition="!timePeriodTypeId"><set field="timePeriodTypeId" from="payGradeSalary.timePeriodTypeId"/></if><if condition="!currencyUomId"><set field="currencyUomId" from="payGradeSalary.currencyUomId"/></if><if condition="!amount"><set field="amount" from="payGradeSalary.amount"/></if><if condition="payGradeSalary.minAmount && amount < payGradeSalary.minAmount"><message><![CDATA[Warning: salary amount ${amount} is less than pay grade minimum amount (${payGradeSalary.minAmount})]]></message></if><if condition="payGradeSalary.maxAmount && amount > payGradeSalary.maxAmount"><message><![CDATA[Warning: salary amount ${amount} is greater than pay grade maximum amount (${payGradeSalary.maxAmount})]]></message></if></if></if><service-call name="create#mantle.humanres.employment.EmploymentSalary" in-map="context" out-map="[partyRelationshipId:context.partyRelationshipId,fromDate:context.fromDate,thruDate:context.thruDate,payGradeId:context.payGradeId,comments:context.comments,amount:context.amount,currencyUomId:context.currencyUomId,timePeriodTypeId:context.timePeriodTypeId,lastUpdatedStamp:context.lastUpdatedStamp]"/></actions></service>