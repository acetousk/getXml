<!--Service Location mantle.other.TaxServices.get#PayerTaxInfo--><service verb="get" noun="PayerTaxInfo"><in-parameters><parameter name="partyId"/></in-parameters><out-parameters><parameter name="name"/><parameter name="ein"/><parameter name="uid"/><parameter name="federalAgentIndicatorCode"/><parameter name="contactInfo" type="Map"/><parameter name="addressString"/><parameter name="phoneString"/><parameter name="faxString"/><parameter name="partyAcctgPreference" type="Map"/></out-parameters><actions><entity-find-one entity-name="mantle.party.PartyDetail" value-field="partyDetail"/><set field="name" value="${partyDetail.organizationName?:''}${partyDetail.firstName?:''}${partyDetail.lastName ? ' ' + partyDetail.lastName : ''}"/><entity-find-one entity-name="mantle.party.PartyIdentification" value-field="einPi"><field-map field-name="partyId"/><field-map field-name="partyIdTypeEnumId" value="PtidFein"/></entity-find-one><set field="ein" from="einPi?.idValue"/><entity-find-one entity-name="mantle.party.PartyIdentification" value-field="einPi"><field-map field-name="partyId"/><field-map field-name="partyIdTypeEnumId" value="PtidFuid"/></entity-find-one><set field="uid" from="einPi?.idValue"/><entity-find-one entity-name="mantle.party.PartyIdentification" value-field="einPi"><field-map field-name="partyId"/><field-map field-name="partyIdTypeEnumId" value="PtidFaic"/></entity-find-one><set field="federalAgentIndicatorCode" from="einPi?.idValue"/><service-call name="mantle.party.ContactServices.get#PartyContactInfo" out-map="[postalContactMechId:contactInfo.postalContactMechId,postalContactMech:contactInfo.postalContactMech,postalContactMechPurposeId:contactInfo.postalContactMechPurposeId,postalAddress:contactInfo.postalAddress,postalAddressStateGeo:contactInfo.postalAddressStateGeo,postalAddressCountryGeo:contactInfo.postalAddressCountryGeo,postalAddressGeoPoint:contactInfo.postalAddressGeoPoint,postalTrustLevelEnum:contactInfo.postalTrustLevelEnum,telecomContactMechId:contactInfo.telecomContactMechId,telecomContactMech:contactInfo.telecomContactMech,telecomPartyContactMech:contactInfo.telecomPartyContactMech,telecomContactMechPurposeId:contactInfo.telecomContactMechPurposeId,telecomNumber:contactInfo.telecomNumber,faxContactMechId:contactInfo.faxContactMechId,faxContactMech:contactInfo.faxContactMech,faxPartyContactMech:contactInfo.faxPartyContactMech,faxContactMechPurposeId:contactInfo.faxContactMechPurposeId,faxTelecomNumber:contactInfo.faxTelecomNumber,emailContactMechId:contactInfo.emailContactMechId,emailContactMech:contactInfo.emailContactMech,emailPartyContactMech:contactInfo.emailPartyContactMech,emailContactMechPurposeId:contactInfo.emailContactMechPurposeId,emailAddress:contactInfo.emailAddress,webContactMechId:contactInfo.webContactMechId,webContactMech:contactInfo.webContactMech,webPartyContactMech:contactInfo.webPartyContactMech,webContactMechPurposeId:contactInfo.webContactMechPurposeId,webAddress:contactInfo.webAddress,otherContactMechId:contactInfo.otherContactMechId,otherContactMech:contactInfo.otherContactMech,otherContactMechPurposeId:contactInfo.otherContactMechPurposeId,otherInfoString:contactInfo.otherInfoString]" in-map="[partyId:partyId, postalContactMechPurposeId:'PostalTax', telecomContactMechPurposeId:'PhoneTax',                             emailContactMechPurposeId:'EmailPrimary']"/><script><![CDATA[addressString = """${contactInfo?.postalAddress?.address1 ? contactInfo.postalAddress.address1 + (contactInfo.postalAddress.unitNumber ? ' #' + contactInfo.postalAddress.unitNumber : '') + '\n' : ''}${contactInfo?.postalAddress?.address2 ? contactInfo.postalAddress.address2 + '\n' : ''}${contactInfo?.postalAddress ? (contactInfo.postalAddress.city ?: '') + (contactInfo.postalAddressStateGeo?.geoCodeAlpha2 ? ', ' + contactInfo.postalAddressStateGeo.geoCodeAlpha2 : '') + ' ' + (contactInfo.postalAddress.postalCode ?: '') + (contactInfo.postalAddress.postalCodeExt ? '-' + contactInfo.postalAddress.postalCodeExt : '') + (contactInfo.postalAddressCountryGeo?.geoCodeAlpha3 ? ' ' + contactInfo.postalAddressCountryGeo.geoCodeAlpha3 : '') : ''}"""]]></script><script><![CDATA[phoneString = """${contactInfo?.telecomNumber ? (contactInfo.telecomNumber.countryCode ? contactInfo.telecomNumber.countryCode + '-' : '') + (contactInfo.telecomNumber.areaCode ? contactInfo.telecomNumber.areaCode + '-' : '') + (contactInfo.telecomNumber.contactNumber ?: '') : ''}"""]]></script><script><![CDATA[faxString = ""]]></script><service-call name="mantle.ledger.LedgerServices.find#PartyAcctgPreference" out-map="[partyAcctgPreference:context.partyAcctgPreference]" in-map="[organizationPartyId:partyId]"/></actions></service>