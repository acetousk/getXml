<!--Service Location coarchy.CoarchyServices.unsubscribe#ContactList--><service verb="unsubscribe" noun="ContactList"><in-parameters><parameter name="optInVerifyCode" required="true"/></in-parameters><out-parameters><parameter name="statusId"/></out-parameters><actions><entity-find entity-name="mantle.marketing.contact.ContactListParty" list="contactListPartyList" limit="1" for-update="true"><econdition field-name="optInVerifyCode" operator="is-not-null"/><econdition field-name="optInVerifyCode"/><date-filter/><order-by field-name="-fromDate"/></entity-find><set field="contactListParty" from="contactListPartyList?.getFirst()"/><if condition="contactListParty && contactListParty.statusId!='CLPT_UNSUBSCRIBED'"><then><set field="contactListParty.statusId" value="CLPT_UNSUBSCRIBED"/><set field="statusId" from="contactListParty.statusId"/><entity-update value-field="contactListParty"/><message type="success"><![CDATA[You have been unsubscribed from the contact list.]]></message></then><else><set field="statusId" from="contactListParty?.statusId"/><message><![CDATA[You are already unsubscribed from the contact list.]]></message></else></if></actions></service>