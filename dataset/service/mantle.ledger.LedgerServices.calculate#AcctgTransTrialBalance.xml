<!--Service Location mantle.ledger.LedgerServices.calculate#AcctgTransTrialBalance--><service verb="calculate" noun="AcctgTransTrialBalance"><in-parameters><parameter name="acctgTransId" required="true"/></in-parameters><out-parameters><parameter name="debitTotal" type="BigDecimal"/><parameter name="creditTotal" type="BigDecimal"/><parameter name="debitCreditDifference" type="BigDecimal"/></out-parameters><actions><entity-find entity-name="mantle.ledger.transaction.AcctgTransEntry" list="acctgTransEntryList"><econdition field-name="acctgTransId"/><order-by field-name="acctgTransEntrySeqId"/></entity-find><set field="debitTotal" from="0.0"/><set field="creditTotal" from="0.0"/><iterate entry="acctgTransEntry" list="acctgTransEntryList"><if condition="acctgTransEntry.debitCreditFlag == 'D'"><then><set field="debitTotal" from="debitTotal + (acctgTransEntry.amount ?: 0.0)"/></then><else><set field="creditTotal" from="creditTotal + (acctgTransEntry.amount ?: 0.0)"/></else></if></iterate><set field="debitCreditDifference" from="debitTotal - creditTotal"/></actions></service>