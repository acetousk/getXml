<!--Service Location mantle.work.TimeServices.delete#TimeEntry--><service verb="delete" noun="TimeEntry"><in-parameters><parameter name="timeEntryId" required="true" entity-name="mantle.work.time.TimeEntry" field-name="timeEntryId"/><parameter name="deleteChildTimeEntries" type="Boolean" default="false"/></in-parameters><out-parameters/><actions><entity-find-one entity-name="mantle.work.time.TimeEntry" value-field="timeEntry"/><if condition="!timeEntry"><return/></if><if condition="timeEntry.invoiceId || timeEntry.vendorInvoiceId"><return error="true" message="Cannot delete time entry ${timeEntryId}. It has already been invoiced."/></if><entity-find entity-name="mantle.work.time.TimeEntry" list="childTimeEntries"><econdition field-name="parentEntryId" from="timeEntry.timeEntryId"/></entity-find><iterate list="childTimeEntries" entry="childTimeEntry"><if condition="deleteChildTimeEntries"><then><service-call name="mantle.work.TimeServices.delete#TimeEntry" in-map="context + [timeEntryId:childTimeEntry.timeEntryId]"/></then><else><return error="true" message="Cannot delete time entry ${timeEntryId}. Found child Time Entry."/></else></if></iterate><service-call name="delete#mantle.work.time.TimeEntry" in-map="context"/></actions></service>