<!--Service Location mantle.facility.FacilityServices.get#Facility--><service verb="get" noun="Facility"><in-parameters><parameter name="facilityId" required="true" entity-name="mantle.facility.Facility" field-name="facilityId"/></in-parameters><out-parameters><parameter name="pseudoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="pseudoId"/><parameter name="facilityTypeEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="facilityTypeEnumId"/><parameter name="parentFacilityId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="parentFacilityId"/><parameter name="statusId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="statusId"/><parameter name="ownerPartyId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="ownerPartyId"/><parameter name="facilityName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="facilityName"/><parameter name="facilitySize" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="facilitySize"/><parameter name="facilitySizeUomId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="facilitySizeUomId"/><parameter name="openedDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="openedDate"/><parameter name="closedDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="closedDate"/><parameter name="description" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="description"/><parameter name="geoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="geoId"/><parameter name="geoPointId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="geoPointId"/><parameter name="countyGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="countyGeoId"/><parameter name="stateGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="stateGeoId"/><parameter name="assetAllowOtherOwner" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="assetAllowOtherOwner"/><parameter name="assetAllowIssueOverQoh" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="assetAllowIssueOverQoh"/><parameter name="assetInventoryLocRequire" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="assetInventoryLocRequire"/><parameter name="defaultDaysToShip" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="defaultDaysToShip"/><parameter name="externalId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="externalId"/><parameter name="originId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.facility.Facility" field-name="originId"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="lastUpdatedStamp"/><parameter name="toName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="toName"/><parameter name="attnName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="attnName"/><parameter name="address1" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="address1"/><parameter name="address2" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="address2"/><parameter name="unitNumber" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="unitNumber"/><parameter name="directions" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="directions"/><parameter name="city" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="city"/><parameter name="cityGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="cityGeoId"/><parameter name="schoolDistrictGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="schoolDistrictGeoId"/><parameter name="stateProvinceGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="stateProvinceGeoId"/><parameter name="countryGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="countryGeoId"/><parameter name="postalCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="postalCode"/><parameter name="postalCodeExt" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="postalCodeExt"/><parameter name="postalCodeGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="postalCodeGeoId"/><parameter name="commercial" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="commercial"/><parameter name="accessCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="accessCode"/><parameter name="telecomContactMechId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="telecomContactMechId"/><parameter name="emailContactMechId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="emailContactMechId"/><parameter name="shipGatewayAddressId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="shipGatewayAddressId"/><parameter name="longitude" type="BigDecimal"/><parameter name="latitude" type="BigDecimal"/><parameter name="countryCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="countryCode"/><parameter name="areaCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="areaCode"/><parameter name="contactNumber" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="contactNumber"/><parameter name="askForName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="askForName"/><parameter name="emailAddress"/><parameter name="contactInfo" type="Map"/></out-parameters><actions><entity-find-one entity-name="mantle.facility.Facility" value-field="facility"/><service-call name="mantle.facility.ContactServices.get#FacilityContactInfo" out-map="[facilityId:contactInfo.facilityId,postalContactMechId:contactInfo.postalContactMechId,postalContactMech:contactInfo.postalContactMech,postalContactMechPurposeId:contactInfo.postalContactMechPurposeId,postalAddress:contactInfo.postalAddress,postalAddressStateGeo:contactInfo.postalAddressStateGeo,postalAddressCountryGeo:contactInfo.postalAddressCountryGeo,postalAddressGeoPoint:contactInfo.postalAddressGeoPoint,postalTrustLevelEnum:contactInfo.postalTrustLevelEnum,telecomContactMechId:contactInfo.telecomContactMechId,telecomContactMechPurposeId:contactInfo.telecomContactMechPurposeId,telecomNumber:contactInfo.telecomNumber,emailContactMechId:contactInfo.emailContactMechId,emailContactMechPurposeId:contactInfo.emailContactMechPurposeId,emailAddress:contactInfo.emailAddress,otherContactMechId:contactInfo.otherContactMechId,otherContactMechPurposeId:contactInfo.otherContactMechPurposeId,otherInfoString:contactInfo.otherInfoString]" in-map="[facilityId:facilityId, postalContactMechPurposeId:'PostalPrimary',                         telecomContactMechPurposeId:'PhonePrimary', emailContactMechPurposeId:'EmailPrimary',                         otherContactMechPurposeId:'WebUrlPrimary']"/><service-call name="mantle.facility.ContactServices.get#FacilityContactInfo" out-map="[facilityId:contactFaxOut.facilityId,postalContactMechId:contactFaxOut.postalContactMechId,postalContactMech:contactFaxOut.postalContactMech,postalContactMechPurposeId:contactFaxOut.postalContactMechPurposeId,postalAddress:contactFaxOut.postalAddress,postalAddressStateGeo:contactFaxOut.postalAddressStateGeo,postalAddressCountryGeo:contactFaxOut.postalAddressCountryGeo,postalAddressGeoPoint:contactFaxOut.postalAddressGeoPoint,postalTrustLevelEnum:contactFaxOut.postalTrustLevelEnum,telecomContactMechId:contactFaxOut.telecomContactMechId,telecomContactMechPurposeId:contactFaxOut.telecomContactMechPurposeId,telecomNumber:contactFaxOut.telecomNumber,emailContactMechId:contactFaxOut.emailContactMechId,emailContactMechPurposeId:contactFaxOut.emailContactMechPurposeId,emailAddress:contactFaxOut.emailAddress,otherContactMechId:contactFaxOut.otherContactMechId,otherContactMechPurposeId:contactFaxOut.otherContactMechPurposeId,otherInfoString:contactFaxOut.otherInfoString]" in-map="[facilityId:facilityId, telecomContactMechPurposeId:'PhoneFax']"/><script><![CDATA[context.putAll(facility)
                Map contactInfoMap = flattenNestedMap(contactInfo)
                contactInfoMap.remove('description')
                context.putAll(contactInfoMap)]]></script><set field="emailAddress" from="contactInfo.emailAddress"/></actions></service>