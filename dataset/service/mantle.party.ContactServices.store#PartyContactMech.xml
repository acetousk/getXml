<!--Service Location mantle.party.ContactServices.store#PartyContactMech--><service verb="store" noun="PartyContactMech"><in-parameters><parameter name="partyId" required="true" entity-name="mantle.party.contact.PartyContactMech" field-name="partyId"/><parameter name="contactMechId" required="true" entity-name="mantle.party.contact.PartyContactMech" field-name="contactMechId"/><parameter name="contactMechPurposeId" required="true" entity-name="mantle.party.contact.PartyContactMech" field-name="contactMechPurposeId"/><parameter name="thruDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="thruDate"/><parameter name="extension" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="extension"/><parameter name="comments" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="comments"/><parameter name="allowSolicitation" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="allowSolicitation"/><parameter name="usedSince" type="java.sql.Date" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="usedSince"/><parameter name="usedUntil" type="java.sql.Date" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="usedUntil"/><parameter name="verifyCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="verifyCode"/><parameter name="verifyCodeDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="verifyCodeDate"/><parameter name="verifyCodeAttempts" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="verifyCodeAttempts"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.party.contact.PartyContactMech" field-name="lastUpdatedStamp"/><parameter name="oldContactMechPurposeId"/><parameter name="updateButton"><description><![CDATA[For convenience in forms, name the submit button for update 'updateButton']]></description></parameter><parameter name="expireOld" type="Boolean" default="updateButton as boolean"/></in-parameters><out-parameters/><actions><if condition="expireOld"><script><![CDATA[def ef = ec.entity.find("mantle.party.contact.PartyContactMech").condition([partyId: partyId, contactMechId: contactMechId])
                if (oldContactMechPurposeId) ef.condition("contactMechPurposeId", oldContactMechPurposeId)
                ef.updateAll([thruDate: ec.user.getNowTimestamp()])]]></script></if><entity-find entity-name="mantle.party.contact.PartyContactMech" list="pcmList"><date-filter/><econdition field-name="partyId"/><econdition field-name="contactMechId"/><econdition field-name="contactMechPurposeId"/></entity-find><if condition="!pcmList"><service-call name="create#mantle.party.contact.PartyContactMech" in-map="context"/></if></actions></service>