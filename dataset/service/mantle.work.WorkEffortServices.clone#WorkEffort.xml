<!--Service Location mantle.work.WorkEffortServices.clone#WorkEffort--><service verb="clone" noun="WorkEffort"><in-parameters><parameter name="workEffortId" entity-name="mantle.work.effort.WorkEffort" field-name="workEffortId"><description><![CDATA[The new workEffortId unless no baseWorkEffortId is specified then this is
                the base and a sequenced ID will be generated for the new ID]]></description></parameter><parameter name="baseWorkEffortId" required="true" default="workEffortId"/><parameter name="universalId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="universalId"/><parameter name="sourceReferenceId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="sourceReferenceId"/><parameter name="parentWorkEffortId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="parentWorkEffortId"/><parameter name="rootWorkEffortId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="rootWorkEffortId"/><parameter name="workEffortTypeEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="workEffortTypeEnumId"/><parameter name="purposeEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="purposeEnumId"/><parameter name="visibilityEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="visibilityEnumId"/><parameter name="resolutionEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="resolutionEnumId"/><parameter name="workTypeEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="workTypeEnumId"/><parameter name="ownerPartyId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="ownerPartyId"/><parameter name="productStoreId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="productStoreId"/><parameter name="statusId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="statusId" default-value="WeInPlanning"/><parameter name="statusFlowId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="statusFlowId"/><parameter name="priority" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="priority"/><parameter name="sendNotificationEmail" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="sendNotificationEmail"/><parameter name="percentComplete" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="percentComplete"/><parameter name="revisionNumber" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="revisionNumber"/><parameter name="workEffortName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="workEffortName"/><parameter name="description" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="description"/><parameter name="location" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="location"/><parameter name="facilityId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="facilityId"/><parameter name="infoUrl" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="infoUrl"/><parameter name="shipmentMethodEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="shipmentMethodEnumId"/><parameter name="estimatedStartDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="estimatedStartDate"/><parameter name="estimatedCompletionDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="estimatedCompletionDate"/><parameter name="actualStartDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="actualStartDate"/><parameter name="actualCompletionDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="actualCompletionDate"/><parameter name="recurStartCron" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="recurStartCron"/><parameter name="recurLimit" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="recurLimit"/><parameter name="recurEndDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="recurEndDate"/><parameter name="allDayStart" type="java.sql.Date" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="allDayStart"/><parameter name="allDayEnd" type="java.sql.Date" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="allDayEnd"/><parameter name="estimatedWorkTime" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="estimatedWorkTime"/><parameter name="estimatedSetupTime" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="estimatedSetupTime"/><parameter name="remainingWorkTime" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="remainingWorkTime"/><parameter name="actualWorkTime" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="actualWorkTime"/><parameter name="actualSetupTime" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="actualSetupTime"/><parameter name="totalTimeAllowed" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="totalTimeAllowed"/><parameter name="estimatedWorkDuration" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="estimatedWorkDuration"/><parameter name="actualWorkDuration" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="actualWorkDuration"/><parameter name="actualBreakDuration" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="actualBreakDuration"/><parameter name="timeUomId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="timeUomId"/><parameter name="actualCost" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="actualCost"/><parameter name="actualClientCost" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="actualClientCost"/><parameter name="totalClientCostAllowed" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="totalClientCostAllowed"/><parameter name="costUomId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="costUomId"/><parameter name="activityId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="activityId"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="lastUpdatedStamp"/><parameter name="deepClone" type="Boolean" default="false"><description><![CDATA[If true recursively clone all children.]]></description></parameter><parameter name="deepIdIsPrefix" type="Boolean" default="false"><description><![CDATA[If true starting workEffortId is used as a prefix for all child IDs, for project/etc cloning.]]></description></parameter><parameter name="idPrefix"/><parameter name="baseIdPrefix"/><parameter name="clearDates" type="Boolean" default="false"/><parameter name="copyAssetAssign" type="Boolean" default="false"/><parameter name="copyAssetNeeded" type="Boolean" default="true"/><parameter name="copyAssoc" type="Boolean" default="false"/><parameter name="copyCommEvent" type="Boolean" default="false"/><parameter name="copyContactMech" type="Boolean" default="true"/><parameter name="copyContent" type="Boolean" default="true"/><parameter name="copyNote" type="Boolean" default="true"/><parameter name="copyParty" type="Boolean" default="false"/><parameter name="copyProduct" type="Boolean" default="true"/><parameter name="copySkillStandard" type="Boolean" default="true"/></in-parameters><out-parameters><parameter name="workEffortId" entity-name="mantle.work.effort.WorkEffort" field-name="workEffortId"/></out-parameters><actions><entity-find-one entity-name="mantle.work.effort.WorkEffort" value-field="workEffort"><field-map field-name="workEffortId" from="baseWorkEffortId"/></entity-find-one><entity-set value-field="workEffort" include="nonpk" set-if-empty="false"/><if condition="clearDates"><set field="workEffort.estimatedStartDate" from="estimatedStartDate"/><set field="workEffort.estimatedCompletionDate" from="estimatedCompletionDate"/><set field="workEffort.actualStartDate" from="actualStartDate"/><set field="workEffort.actualCompletionDate" from="actualCompletionDate"/></if><if condition="workEffortId && workEffortId != baseWorkEffortId"><then><set field="workEffort.workEffortId" from="workEffortId"/></then><else><if condition="idPrefix"><then><if condition="baseIdPrefix && baseWorkEffortId.startsWith(baseIdPrefix)"><then><set field="idRest" from="baseWorkEffortId.substring(baseIdPrefix.length()+1)"/><if condition="idRest && idRest.charAt(0) == '-'"><set field="idRest" from="idRest.substring(1)"/></if><set field="workEffort.workEffortId" value="${idPrefix}-${idRest}"/></then><else><set field="seqName" value="Project_${idPrefix}"/><set field="workEffort.workEffortId" value="${idPrefix}-${ec.entity.sequencedIdPrimary(seqName, null, null)}"/></else></if></then><else><set field="workEffort.workEffortId" from="null"/><entity-sequenced-id-primary value-field="workEffort"/></else></if></else></if><entity-create value-field="workEffort"/><set field="workEffortId" from="workEffort.workEffortId"/><if condition="copyAssetAssign"><entity-find entity-name="mantle.work.effort.WorkEffortAssetAssign" list="valueList"><date-filter/><econdition field-name="workEffortId" from="baseWorkEffortId"/></entity-find><iterate list="valueList" entry="value"><set field="value.workEffortId" from="workEffortId"/><entity-create value-field="value"/></iterate></if><if condition="copyAssetNeeded"><entity-find entity-name="mantle.work.effort.WorkEffortAssetNeeded" list="valueList"><econdition field-name="workEffortId" from="baseWorkEffortId"/></entity-find><iterate list="valueList" entry="value"><set field="value.workEffortId" from="workEffortId"/><entity-create value-field="value"/></iterate></if><if condition="copyAssoc"><entity-find entity-name="mantle.work.effort.WorkEffortAssoc" list="valueList"><date-filter/><econdition field-name="workEffortId" from="baseWorkEffortId"/></entity-find><iterate list="valueList" entry="value"><set field="value.workEffortId" from="workEffortId"/><entity-create value-field="value"/></iterate></if><if condition="copyCommEvent"><entity-find entity-name="mantle.work.effort.WorkEffortCommEvent" list="valueList"><econdition field-name="workEffortId" from="baseWorkEffortId"/></entity-find><iterate list="valueList" entry="value"><set field="value.workEffortId" from="workEffortId"/><entity-create value-field="value"/></iterate></if><if condition="copyContactMech"><entity-find entity-name="mantle.work.effort.WorkEffortContactMech" list="valueList"><date-filter/><econdition field-name="workEffortId" from="baseWorkEffortId"/></entity-find><iterate list="valueList" entry="value"><set field="value.workEffortId" from="workEffortId"/><entity-create value-field="value"/></iterate></if><if condition="copyContent"><entity-find entity-name="mantle.work.effort.WorkEffortContent" list="valueList"><econdition field-name="workEffortId" from="baseWorkEffortId"/></entity-find><iterate list="valueList" entry="value"><set field="value.workEffortContentId" from="null"/><entity-sequenced-id-primary value-field="value"/><set field="value.workEffortId" from="workEffortId"/><entity-create value-field="value"/></iterate></if><if condition="copyNote"><entity-find entity-name="mantle.work.effort.WorkEffortNote" list="valueList"><econdition field-name="workEffortId" from="baseWorkEffortId"/></entity-find><iterate list="valueList" entry="value"><set field="value.workEffortId" from="workEffortId"/><entity-create value-field="value"/></iterate></if><if condition="copyParty"><entity-find entity-name="mantle.work.effort.WorkEffortParty" list="valueList"><date-filter/><econdition field-name="workEffortId" from="baseWorkEffortId"/></entity-find><iterate list="valueList" entry="value"><set field="value.workEffortId" from="workEffortId"/><entity-create value-field="value"/></iterate></if><if condition="copyProduct"><entity-find entity-name="mantle.work.effort.WorkEffortProduct" list="valueList"><date-filter/><econdition field-name="workEffortId" from="baseWorkEffortId"/></entity-find><iterate list="valueList" entry="value"><set field="value.workEffortId" from="workEffortId"/><entity-create value-field="value"/></iterate></if><if condition="copySkillStandard"><entity-find entity-name="mantle.work.effort.WorkEffortSkillStandard" list="valueList"><econdition field-name="workEffortId" from="baseWorkEffortId"/></entity-find><iterate list="valueList" entry="value"><set field="value.workEffortId" from="workEffortId"/><entity-create value-field="value"/></iterate></if><if condition="deepClone"><set field="passThroughParms" from="['clearDates', 'copyAssetAssign', 'copyAssetNeeded', 'copyAssoc', 'copyCommEvent',                     'copyContactMech', 'copyContent', 'copyNote', 'copyParty', 'copyProduct', 'copySkillStandard', 'idPrefix', 'baseIdPrefix']"/><set field="subMap" from="[deepClone:true, deepIdIsPrefix:false]"/><iterate list="passThroughParms" entry="parmName"><script><![CDATA[subMap.put(parmName, context.get(parmName))]]></script></iterate><set field="subMap.rootWorkEffortId" from="rootWorkEffortId"/><if condition="!rootWorkEffortId && !workEffort.rootWorkEffortId"><set field="subMap.rootWorkEffortId" from="workEffortId"/></if><if condition="deepIdIsPrefix"><set field="subMap.baseIdPrefix" from="baseWorkEffortId"/><set field="subMap.idPrefix" from="workEffortId"/></if><entity-find entity-name="mantle.work.effort.WorkEffort" list="childList"><econdition field-name="parentWorkEffortId" from="baseWorkEffortId"/></entity-find><iterate list="childList" entry="child"><service-call name="mantle.work.WorkEffortServices.clone#WorkEffort" in-map="subMap + [baseWorkEffortId:child.workEffortId, parentWorkEffortId:workEffortId]"/></iterate><entity-find entity-name="mantle.work.effort.WorkEffort" list="childList"><econdition field-name="rootWorkEffortId" from="baseWorkEffortId"/><econdition field-name="parentWorkEffortId" operator="is-null"/></entity-find><iterate list="childList" entry="child"><service-call name="mantle.work.WorkEffortServices.clone#WorkEffort" in-map="subMap + [baseWorkEffortId:child.workEffortId, parentWorkEffortId:null]"/></iterate></if></actions></service>