<!--Service Location mantle.product.ProductServices.get#FeatureByIactnOrAll--><service verb="get" noun="FeatureByIactnOrAll"><in-parameters><parameter name="productFeatureId"/><parameter name="findByTo" type="Boolean" default="false"/><parameter name="productFeatureTypeEnumId" required="true"/><parameter name="iactnTypeEnumId" default-value="PfitCompatible"/></in-parameters><out-parameters><parameter name="resultList" type="List"><parameter name="result" type="Map"/></parameter></out-parameters><actions><if condition="productFeatureId"><entity-find entity-name="mantle.product.feature.ProductFeatureIactn" list="iactnList"><econdition field-name="productFeatureId" ignore="findByTo"/><econdition field-name="toProductFeatureId" from="productFeatureId" ignore="!findByTo"/><econdition field-name="iactnTypeEnumId"/></entity-find></if><set field="resultList" from="[]"/><iterate list="iactnList" entry="iactn"><if condition="findByTo"><entity-find-one entity-name="mantle.product.feature.ProductFeature" value-field="feature" cache="true"><field-map field-name="productFeatureId" from="iactn.productFeatureId"/></entity-find-one><else><entity-find-one entity-name="mantle.product.feature.ProductFeature" value-field="feature" cache="true"><field-map field-name="productFeatureId" from="iactn.toProductFeatureId"/></entity-find-one></else></if><if condition="feature.productFeatureTypeEnumId == productFeatureTypeEnumId"><script><![CDATA[resultList.add([productFeatureId:feature.productFeatureId, label:ec.resource.expand('ProductFeatureNameTemplate', '', feature)])]]></script></if></iterate><if condition="!resultList"><entity-find entity-name="mantle.product.feature.ProductFeature" list="featureList"><econdition field-name="productFeatureTypeEnumId"/></entity-find><iterate list="featureList" entry="feature"><script><![CDATA[resultList.add([productFeatureId:feature.productFeatureId, label:ec.resource.expand('ProductFeatureNameTemplate', '', feature)])]]></script></iterate></if><order-map-list list="resultList"><order-by field-name="label"/></order-map-list></actions></service>