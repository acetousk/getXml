<!--Service Location sales.SalesServices.find#PartyNoteList--><service verb="find" noun="PartyNoteList"><in-parameters><parameter name="partyId" required="true"/></in-parameters><out-parameters><parameter name="partyNoteList"/></out-parameters><actions><entity-find entity-name="mantle.party.PartyNote" list="tmpPartyNoteList"><econdition field-name="partyId"/><order-by field-name="-noteDate"/></entity-find><set field="partyNoteList" from="[]"/><if condition="tmpPartyNoteList"><iterate list="tmpPartyNoteList" entry="note"><set field="note_item" from="new HashMap()"/><script><![CDATA[note_item.putAll(note)
                        partyNoteList.add(note_item)]]></script><entity-find-one entity-name="mantle.party.PartyDetail" value-field="partyDetail"><field-map field-name="partyId" from="note.userId"/></entity-find-one><if condition="partyDetail"><set field="assignedUserFirstName" from="partyDetail.firstName"/><set field="assignedUserLastName" from="partyDetail.lastName"/><script><![CDATA[note_item.put("added_by",assignedUserFirstName + ' ' + assignedUserLastName)]]></script></if></iterate></if></actions></service>