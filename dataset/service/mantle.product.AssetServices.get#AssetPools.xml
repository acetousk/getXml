<!--Service Location mantle.product.AssetServices.get#AssetPools--><service verb="get" noun="AssetPools"><in-parameters><parameter name="productStoreId"/><parameter name="vendorPartyId"/><parameter name="customerPartyId"/></in-parameters><out-parameters><parameter name="assetPoolIdSet" type="Set"/></out-parameters><actions><set field="assetPoolIdSet" from="new TreeSet()"/><if condition="productStoreId"><entity-find entity-name="mantle.product.asset.AssetPoolStore" list="assetPoolStoreList" cache="true"><econdition field-name="productStoreId"/></entity-find><if condition="assetPoolStoreList"><script><![CDATA[assetPoolIdSet.addAll(assetPoolStoreList*.assetPoolId)]]></script></if></if><if condition="vendorPartyId"><entity-find entity-name="mantle.product.asset.AssetPoolParty" list="vendorPoolPartyList" cache="true"><econdition field-name="partyId" from="vendorPartyId"/></entity-find><set field="vendorPoolPartyList" from="vendorPoolPartyList.findAll({ it.roleTypeId == null || it.roleTypeId == 'Vendor' })"/><if condition="vendorPoolPartyList"><script><![CDATA[assetPoolIdSet.addAll(vendorPoolPartyList*.assetPoolId)]]></script></if></if><if condition="customerPartyId"><entity-find entity-name="mantle.product.asset.AssetPoolParty" list="customerPoolPartyList" cache="true"><econdition field-name="partyId" from="customerPartyId"/></entity-find><set field="customerPoolPartyList" from="customerPoolPartyList.findAll({ it.roleTypeId == null || it.roleTypeId == 'Customer' })"/><if condition="customerPoolPartyList"><script><![CDATA[assetPoolIdSet.addAll(customerPoolPartyList*.assetPoolId)]]></script></if></if></actions></service>