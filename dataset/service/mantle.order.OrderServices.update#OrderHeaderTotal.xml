<!--Service Location mantle.order.OrderServices.update#OrderHeaderTotal--><service verb="update" noun="OrderHeaderTotal"><in-parameters><parameter name="orderId"/></in-parameters><out-parameters/><actions><entity-find-one entity-name="mantle.order.OrderHeader" value-field="orderHeader" for-update="true"/><set field="totalSum" from="0.0" type="BigDecimal"/><entity-find entity-name="mantle.order.OrderPart" list="orderPartList"><econdition field-name="orderId"/></entity-find><iterate list="orderPartList" entry="orderPart"><set field="totalSum" from="totalSum + (orderPart.partTotal ?: 0)"/></iterate><set field="orderHeader.grandTotal" from="totalSum"/><entity-update value-field="orderHeader"/></actions></service>