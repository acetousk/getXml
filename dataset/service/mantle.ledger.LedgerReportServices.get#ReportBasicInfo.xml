<!--Service Location mantle.ledger.LedgerReportServices.get#ReportBasicInfo--><service verb="get" noun="ReportBasicInfo"><in-parameters><parameter name="organizationPartyId" required="true"/><parameter name="timePeriodIdList" type="List" required="true"><parameter name="timePeriodId"/></parameter><parameter name="childOrgPeriods" type="Boolean" default="false"/></in-parameters><out-parameters><parameter name="organizationName"/><parameter name="partyAcctgPreference" type="Map"/><parameter name="currencyUomId"/><parameter name="timePeriodIdList" type="List"><parameter name="timePeriodId"/></parameter><parameter name="timePeriodIdMap" type="Map"/><parameter name="accountCodeFormatter" type="javax.swing.text.MaskFormatter"/></out-parameters><actions><entity-find-one entity-name="mantle.party.Organization" value-field="organization"><field-map field-name="partyId" from="organizationPartyId"/></entity-find-one><set field="organizationName" from="organization.organizationName"/><service-call name="mantle.ledger.LedgerServices.find#PartyAcctgPreference" out-map="[partyAcctgPreference:context.partyAcctgPreference]" in-map="[organizationPartyId:organizationPartyId]"/><set field="currencyUomId" from="partyAcctgPreference?.baseCurrencyUomId"/><if condition="childOrgPeriods"><service-call name="mantle.ledger.LedgerServices.expand#ChildOrganizationList" out-map="[orgPartyIdList:expandResult.orgPartyIdList]" in-map="[organizationPartyId:organizationPartyId]"/><set field="childOrgIdList" from="expandResult.orgPartyIdList"/><script><![CDATA[childOrgIdList.remove(organizationPartyId)]]></script></if><set field="timePeriodList" from="[]"/><iterate list="new ArrayList(timePeriodIdList)" entry="timePeriodId"><entity-find-one entity-name="mantle.party.time.TimePeriod" value-field="timePeriod"><field-map field-name="timePeriodId"/></entity-find-one><if condition="timePeriod == null"><message error="true"><![CDATA[Time Period not found with ID ${timePeriodId}]]></message><continue/></if><script><![CDATA[timePeriodList.add(timePeriod)]]></script><if condition="childOrgIdList"><entity-find entity-name="mantle.party.time.TimePeriod" list="childTimePeriodList"><econdition field-name="timePeriodTypeId" from="timePeriod.timePeriodTypeId"/><econdition field-name="fromDate" from="timePeriod.fromDate"/><econdition field-name="partyId" operator="in" from="childOrgIdList"/></entity-find><script><![CDATA[timePeriodList.addAll(childTimePeriodList)]]></script></if></iterate><check-errors/><order-map-list list="timePeriodList"><order-by field-name="periodName"/></order-map-list><set field="timePeriodIdList" from="[]"/><set field="timePeriodIdMap" from="[:]"/><iterate list="timePeriodList" entry="timePeriod"><script><![CDATA[timePeriodIdList.add(timePeriod.timePeriodId)
                timePeriodIdMap.put(timePeriod.timePeriodId, timePeriod)]]></script></iterate><set field="glAccountCodeMask" from="partyAcctgPreference?.glAccountCodeMask ?: ec.user.getPreference('GlAccountCodeMask')"/><set field="accountCodeFormatter" from="masker(glAccountCodeMask, '0')"/></actions></service>