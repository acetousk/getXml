<!--Service Location mantle.humanres.PayrollDocumentServices.get#EmploymentInfo--><service verb="get" noun="EmploymentInfo"><in-parameters><parameter name="timePeriodId" required="true"><description><![CDATA[Should be a period for a Tax Year/Quarter/etc]]></description></parameter><parameter name="partyRelationshipId" required="true"/></in-parameters><out-parameters><parameter name="timePeriod" type="Map"/><parameter name="employment" type="Map"/><parameter name="employeeFirstName"/><parameter name="employeeMiddleName"/><parameter name="employeeLastName"/><parameter name="employeeSuffix"/><parameter name="employeeSsn"/><parameter name="employeeHomeContactInfo" type="Map"/><parameter name="employeeHomeStreetString"/><parameter name="employeeHomeCszString"/><parameter name="employeeHomeString"/><parameter name="employerName"/><parameter name="employerEin"/><parameter name="employerContactInfo" type="Map"/><parameter name="employerAddressString"/><parameter name="employerPhoneString"/></out-parameters><actions><entity-find-one entity-name="mantle.party.time.TimePeriod" value-field="timePeriod"/><entity-find-one entity-name="mantle.humanres.employment.EmploymentAndRelationship" value-field="employment"/><entity-find-one entity-name="mantle.humanres.employment.Employee" value-field="employee"><field-map field-name="partyId" from="employment.fromPartyId"/></entity-find-one><entity-find-one entity-name="mantle.party.PartyDetail" value-field="employeeDetail"><field-map field-name="partyId" from="employment?.fromPartyId"/></entity-find-one><set field="employeeFirstName" from="employee?.taxName ?: employeeDetail?.firstName"/><set field="employeeMiddleName" from="employee?.taxName || employee?.taxMiddleName ?: employeeDetail?.middleName"/><set field="employeeLastName" from="employee?.taxLastName ?: employeeDetail?.lastName"/><set field="employeeSuffix" from="employee?.taxNameSuffix ?: employeeDetail?.suffix"/><entity-find-one entity-name="mantle.party.PartyIdentification" value-field="employeeSsnPi"><field-map field-name="partyId" from="employment.fromPartyId"/><field-map field-name="partyIdTypeEnumId" value="PtidSsn"/></entity-find-one><set field="employeeSsn" from="employeeSsnPi?.idValue"/><service-call name="mantle.party.ContactServices.get#PartyContactInfo" out-map="[postalContactMechId:employeeHomeContactInfo.postalContactMechId,postalContactMech:employeeHomeContactInfo.postalContactMech,postalContactMechPurposeId:employeeHomeContactInfo.postalContactMechPurposeId,postalAddress:employeeHomeContactInfo.postalAddress,postalAddressStateGeo:employeeHomeContactInfo.postalAddressStateGeo,postalAddressCountryGeo:employeeHomeContactInfo.postalAddressCountryGeo,postalAddressGeoPoint:employeeHomeContactInfo.postalAddressGeoPoint,postalTrustLevelEnum:employeeHomeContactInfo.postalTrustLevelEnum,telecomContactMechId:employeeHomeContactInfo.telecomContactMechId,telecomContactMech:employeeHomeContactInfo.telecomContactMech,telecomPartyContactMech:employeeHomeContactInfo.telecomPartyContactMech,telecomContactMechPurposeId:employeeHomeContactInfo.telecomContactMechPurposeId,telecomNumber:employeeHomeContactInfo.telecomNumber,faxContactMechId:employeeHomeContactInfo.faxContactMechId,faxContactMech:employeeHomeContactInfo.faxContactMech,faxPartyContactMech:employeeHomeContactInfo.faxPartyContactMech,faxContactMechPurposeId:employeeHomeContactInfo.faxContactMechPurposeId,faxTelecomNumber:employeeHomeContactInfo.faxTelecomNumber,emailContactMechId:employeeHomeContactInfo.emailContactMechId,emailContactMech:employeeHomeContactInfo.emailContactMech,emailPartyContactMech:employeeHomeContactInfo.emailPartyContactMech,emailContactMechPurposeId:employeeHomeContactInfo.emailContactMechPurposeId,emailAddress:employeeHomeContactInfo.emailAddress,webContactMechId:employeeHomeContactInfo.webContactMechId,webContactMech:employeeHomeContactInfo.webContactMech,webPartyContactMech:employeeHomeContactInfo.webPartyContactMech,webContactMechPurposeId:employeeHomeContactInfo.webContactMechPurposeId,webAddress:employeeHomeContactInfo.webAddress,otherContactMechId:employeeHomeContactInfo.otherContactMechId,otherContactMech:employeeHomeContactInfo.otherContactMech,otherContactMechPurposeId:employeeHomeContactInfo.otherContactMechPurposeId,otherInfoString:employeeHomeContactInfo.otherInfoString]" in-map="[partyId:employee.partyId, postalContactMechId:employee.taxHomeContactMechId,                                 postalContactMechPurposeId:'PostalHome']"/><script><![CDATA[employeeHomeStreetString = """${employeeHomeContactInfo?.postalAddress?.address1 ? employeeHomeContactInfo.postalAddress.address1 + (employeeHomeContactInfo.postalAddress.unitNumber ? ' #' + employeeHomeContactInfo.postalAddress.unitNumber : '') : ''}${employeeHomeContactInfo?.postalAddress?.address2 ? '\n' + employeeHomeContactInfo.postalAddress.address2 : ''}"""]]></script><script><![CDATA[employeeHomeCszString = """${employeeHomeContactInfo?.postalAddress ? (employeeHomeContactInfo.postalAddress.city ?: '') + (employeeHomeContactInfo.postalAddressStateGeo?.geoCodeAlpha2 ? ', ' + employeeHomeContactInfo.postalAddressStateGeo.geoCodeAlpha2 : '') + ' ' + (employeeHomeContactInfo.postalAddress.postalCode ?: '') + (employeeHomeContactInfo.postalAddress.postalCodeExt ? '-' + employeeHomeContactInfo.postalAddress.postalCodeExt : '') + (employeeHomeContactInfo.postalAddressCountryGeo?.geoCodeAlpha3 ? ' ' + employeeHomeContactInfo.postalAddressCountryGeo.geoCodeAlpha3 : '') : ''}"""]]></script><script><![CDATA[employeeHomeString = """${employeeHomeStreetString}\n${employeeHomeCszString}"""]]></script><entity-find-one entity-name="mantle.party.PartyDetail" value-field="employerDetail"><field-map field-name="partyId" from="employment.toPartyId"/></entity-find-one><set field="employerName" value="${employerDetail.organizationName?:''}${employerDetail.firstName?:''}${employerDetail.lastName ? ' ' + employerDetail.lastName : ''}"/><entity-find-one entity-name="mantle.party.PartyIdentification" value-field="employerEinPi"><field-map field-name="partyId" from="employment.toPartyId"/><field-map field-name="partyIdTypeEnumId" value="PtidFein"/></entity-find-one><set field="employerEin" from="employerEinPi?.idValue"/><service-call name="mantle.party.ContactServices.get#PartyContactInfo" out-map="[postalContactMechId:employerContactInfo.postalContactMechId,postalContactMech:employerContactInfo.postalContactMech,postalContactMechPurposeId:employerContactInfo.postalContactMechPurposeId,postalAddress:employerContactInfo.postalAddress,postalAddressStateGeo:employerContactInfo.postalAddressStateGeo,postalAddressCountryGeo:employerContactInfo.postalAddressCountryGeo,postalAddressGeoPoint:employerContactInfo.postalAddressGeoPoint,postalTrustLevelEnum:employerContactInfo.postalTrustLevelEnum,telecomContactMechId:employerContactInfo.telecomContactMechId,telecomContactMech:employerContactInfo.telecomContactMech,telecomPartyContactMech:employerContactInfo.telecomPartyContactMech,telecomContactMechPurposeId:employerContactInfo.telecomContactMechPurposeId,telecomNumber:employerContactInfo.telecomNumber,faxContactMechId:employerContactInfo.faxContactMechId,faxContactMech:employerContactInfo.faxContactMech,faxPartyContactMech:employerContactInfo.faxPartyContactMech,faxContactMechPurposeId:employerContactInfo.faxContactMechPurposeId,faxTelecomNumber:employerContactInfo.faxTelecomNumber,emailContactMechId:employerContactInfo.emailContactMechId,emailContactMech:employerContactInfo.emailContactMech,emailPartyContactMech:employerContactInfo.emailPartyContactMech,emailContactMechPurposeId:employerContactInfo.emailContactMechPurposeId,emailAddress:employerContactInfo.emailAddress,webContactMechId:employerContactInfo.webContactMechId,webContactMech:employerContactInfo.webContactMech,webPartyContactMech:employerContactInfo.webPartyContactMech,webContactMechPurposeId:employerContactInfo.webContactMechPurposeId,webAddress:employerContactInfo.webAddress,otherContactMechId:employerContactInfo.otherContactMechId,otherContactMech:employerContactInfo.otherContactMech,otherContactMechPurposeId:employerContactInfo.otherContactMechPurposeId,otherInfoString:employerContactInfo.otherInfoString]" in-map="[partyId:employment.toPartyId, postalContactMechPurposeId:'PostalTax',                                 telecomContactMechPurposeId:'PhoneTax']"/><script><![CDATA[employerAddressString = """${employerContactInfo?.postalAddress?.address1 ? employerContactInfo.postalAddress.address1 + (employerContactInfo.postalAddress.unitNumber ? ' #' + employerContactInfo.postalAddress.unitNumber : '') + '\n' : ''}${employerContactInfo?.postalAddress?.address2 ? employerContactInfo.postalAddress.address2 + '\n' : ''}${employerContactInfo?.postalAddress ? (employerContactInfo.postalAddress.city ?: '') + (employerContactInfo.postalAddressStateGeo?.geoCodeAlpha2 ? ', ' + employerContactInfo.postalAddressStateGeo.geoCodeAlpha2 : '') + ' ' + (employerContactInfo.postalAddress.postalCode ?: '') + (employerContactInfo.postalAddress.postalCodeExt ? '-' + employerContactInfo.postalAddress.postalCodeExt : '') + (employerContactInfo.postalAddressCountryGeo?.geoCodeAlpha3 ? ' ' + employerContactInfo.postalAddressCountryGeo.geoCodeAlpha3 : '') : ''}"""]]></script><script><![CDATA[employerPhoneString = """${employerContactInfo?.telecomNumber ? (employerContactInfo.telecomNumber.countryCode ? employerContactInfo.telecomNumber.countryCode + '-' : '') + (employerContactInfo.telecomNumber.areaCode ? employerContactInfo.telecomNumber.areaCode + '-' : '') + (employerContactInfo.telecomNumber.contactNumber ?: '') : ''}"""]]></script></actions></service>