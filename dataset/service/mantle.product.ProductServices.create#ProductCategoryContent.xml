<!--Service Location mantle.product.ProductServices.create#ProductCategoryContent--><service verb="create" noun="ProductCategoryContent"><in-parameters><parameter name="productCategoryId" type="java.lang.String" required="true" allow-html="none" entity-name="mantle.product.category.ProductCategoryContent" field-name="productCategoryId"/><parameter name="contentLocation" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.category.ProductCategoryContent" field-name="contentLocation"/><parameter name="categoryContentTypeEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.category.ProductCategoryContent" field-name="categoryContentTypeEnumId"/><parameter name="productStoreId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.category.ProductCategoryContent" field-name="productStoreId"/><parameter name="fromDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.product.category.ProductCategoryContent" field-name="fromDate"/><parameter name="thruDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.product.category.ProductCategoryContent" field-name="thruDate"/><parameter name="locale" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.category.ProductCategoryContent" field-name="locale"/><parameter name="description" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.category.ProductCategoryContent" field-name="description"/><parameter name="sequenceNum" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.product.category.ProductCategoryContent" field-name="sequenceNum"/><parameter name="userId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.category.ProductCategoryContent" field-name="userId"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.product.category.ProductCategoryContent" field-name="lastUpdatedStamp"/><parameter name="contentFile" type="org.apache.commons.fileupload.FileItem"/><parameter name="contentText" allow-html="any"/><parameter name="textExtension" default-value="html"/><parameter name="filename"/></in-parameters><out-parameters><parameter name="productCategoryContentId" entity-name="mantle.product.category.ProductCategoryContent" field-name="productCategoryContentId"/></out-parameters><actions><service-call name="create#mantle.product.category.ProductCategoryContent" in-map="context" out-map="[productCategoryContentId:context.productCategoryContentId,productCategoryId:context.productCategoryId,contentLocation:context.contentLocation,categoryContentTypeEnumId:context.categoryContentTypeEnumId,productStoreId:context.productStoreId,fromDate:context.fromDate,thruDate:context.thruDate,locale:context.locale,description:context.description,sequenceNum:context.sequenceNum,userId:context.userId,lastUpdatedStamp:context.lastUpdatedStamp]"/><if condition="contentFile != null && contentFile.size > 0"><then><service-call name="mantle.product.ProductServices.save#ProductCategoryContentFile" in-map="context"/></then><else><if condition="!contentText"><set field="contentText" value="[placeholder - delete me]"/></if><if condition="!filename"><set field="filename" value="${categoryContentTypeEnumId}_${productCategoryContentId}.${textExtension ?: 'html'}"/></if><set field="contentRoot" from="ec.user.getPreference('mantle.content.root') ?: 'dbresource://mantle/content'"/><set field="contentLocation" value="${contentRoot}/product/${productCategoryId}/${filename}"/><set field="docRr" from="ec.resource.getLocationReference(contentLocation)"/><script><![CDATA[docRr.putText(contentText)]]></script><service-call name="update#mantle.product.category.ProductCategoryContent" in-map="[productCategoryContentId:productCategoryContentId, contentLocation:contentLocation]"/></else></if></actions></service>