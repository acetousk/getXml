<!--Service Location mantle.party.TimeServices.getOrCreate#TimePeriod--><service verb="getOrCreate" noun="TimePeriod"><in-parameters><parameter name="parentPeriodId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.time.TimePeriod" field-name="parentPeriodId"/><parameter name="previousPeriodId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.time.TimePeriod" field-name="previousPeriodId"/><parameter name="timePeriodTypeId" type="java.lang.String" required="true" allow-html="none" entity-name="mantle.party.time.TimePeriod" field-name="timePeriodTypeId"/><parameter name="partyId" type="java.lang.String" required="true" allow-html="none" entity-name="mantle.party.time.TimePeriod" field-name="partyId"/><parameter name="periodNum" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.party.time.TimePeriod" field-name="periodNum"/><parameter name="periodName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.time.TimePeriod" field-name="periodName"/><parameter name="fromDate" type="Date" required="false" allow-html="none" entity-name="mantle.party.time.TimePeriod" field-name="fromDate"/><parameter name="thruDate" type="Date" required="false" allow-html="none" entity-name="mantle.party.time.TimePeriod" field-name="thruDate"/><parameter name="isClosed" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.time.TimePeriod" field-name="isClosed" default-value="N"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.party.time.TimePeriod" field-name="lastUpdatedStamp"/></in-parameters><out-parameters><parameter name="timePeriodId" entity-name="mantle.party.time.TimePeriod" field-name="timePeriodId"/><parameter name="timePeriod" type="EntityValue"/></out-parameters><actions><if condition="!fromDate && !thruDate"><return error="true" message="Must specify fromDate or thruDate"/></if><entity-find entity-name="mantle.party.time.TimePeriod" list="existingPeriodList"><econdition field-name="partyId"/><econdition field-name="timePeriodTypeId"/><econditions combine="or"><econdition field-name="fromDate" ignore-if-empty="true"/><econdition field-name="thruDate" ignore-if-empty="true"/></econditions></entity-find><if condition="existingPeriodList"><then><set field="timePeriod" from="existingPeriodList.get(0)"/><set field="timePeriodId" from="timePeriod.timePeriodId"/></then><else><service-call name="mantle.party.TimeServices.create#TimePeriod" in-map="context" out-map="[timePeriodId:createTpOut.timePeriodId]"/><set field="timePeriodId" from="createTpOut.timePeriodId"/><entity-find-one entity-name="mantle.party.time.TimePeriod" value-field="timePeriod"/></else></if></actions></service>