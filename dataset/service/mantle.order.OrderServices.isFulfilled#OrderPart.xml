<!--Service Location mantle.order.OrderServices.isFulfilled#OrderPart--><service verb="isFulfilled" noun="OrderPart"><in-parameters><parameter name="orderId" required="true" entity-name="mantle.order.OrderPart" field-name="orderId"/><parameter name="orderPartSeqId" required="true" entity-name="mantle.order.OrderPart" field-name="orderPartSeqId"/></in-parameters><out-parameters><parameter name="isFulfilled" type="Boolean"/></out-parameters><actions><entity-find entity-name="mantle.product.subscription.Subscription" list="orderSubscriptionList"><econdition field-name="orderId"/></entity-find><entity-find entity-name="mantle.order.OrderItemWorkEffort" list="orderWorkEffortList"><econdition field-name="orderId"/><econdition field-name="requiredWork" value="Y"/></entity-find><entity-find entity-name="mantle.product.issuance.AssetIssuance" list="orderAssetIssuanceList"><econdition field-name="orderId"/></entity-find><entity-find entity-name="mantle.product.receipt.AssetReceipt" list="orderAssetReceiptList"><econdition field-name="orderId"/></entity-find><entity-find entity-name="mantle.order.OrderItem" list="orderItemList"><econdition field-name="orderId"/><econdition field-name="orderPartSeqId"/><order-by field-name="orderItemSeqId"/></entity-find><entity-find entity-name="moqui.basic.EnumGroupMember" list="productItemTypeEgms" cache="true"><econdition field-name="enumGroupEnumId" value="EngItemsProduct"/></entity-find><set field="productItemTypes" from="productItemTypeEgms*.enumId"/><set field="isFulfilled" from="true"/><iterate list="orderItemList" entry="orderItem"><if condition="orderItem.productId && productItemTypes.contains(orderItem.itemTypeEnumId)"><service-call name="mantle.order.OrderServices.isFulfilled#OrderItem" out-map="[isFulfilled:itemOut.isFulfilled]" out-map-add-to-existing="false" in-map="[orderId:orderId, orderItemSeqId:orderItem.orderItemSeqId, orderItem:orderItem,                                 orderSubscriptionList:orderSubscriptionList, orderWorkEffortList:orderWorkEffortList,                                 orderAssetIssuanceList:orderAssetIssuanceList, orderAssetReceiptList:orderAssetReceiptList]"/><if condition="!itemOut.isFulfilled"><set field="isFulfilled" from="false"/><break/></if></if></iterate></actions></service>