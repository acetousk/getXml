<!--Service Location mantle.product.ProductServices.create#ProductContent--><service verb="create" noun="ProductContent"><in-parameters><parameter name="productId" type="java.lang.String" required="true" allow-html="none" entity-name="mantle.product.ProductContent" field-name="productId"/><parameter name="contentLocation" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.ProductContent" field-name="contentLocation"/><parameter name="productContentTypeEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.ProductContent" field-name="productContentTypeEnumId"/><parameter name="locale" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.ProductContent" field-name="locale"/><parameter name="productFeatureId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.ProductContent" field-name="productFeatureId"/><parameter name="productStoreId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.ProductContent" field-name="productStoreId"/><parameter name="fromDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.product.ProductContent" field-name="fromDate"/><parameter name="thruDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.product.ProductContent" field-name="thruDate"/><parameter name="description" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.ProductContent" field-name="description"/><parameter name="sequenceNum" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.product.ProductContent" field-name="sequenceNum"/><parameter name="userId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.ProductContent" field-name="userId"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.product.ProductContent" field-name="lastUpdatedStamp"/><parameter name="contentFile" type="org.apache.commons.fileupload.FileItem"/><parameter name="contentText" allow-html="any"/><parameter name="textExtension" default-value="html"/><parameter name="filename"/></in-parameters><out-parameters><parameter name="productContentId" entity-name="mantle.product.ProductContent" field-name="productContentId"/></out-parameters><actions><service-call name="create#mantle.product.ProductContent" in-map="context" out-map="[productContentId:context.productContentId,productId:context.productId,contentLocation:context.contentLocation,productContentTypeEnumId:context.productContentTypeEnumId,locale:context.locale,productFeatureId:context.productFeatureId,productStoreId:context.productStoreId,fromDate:context.fromDate,thruDate:context.thruDate,description:context.description,sequenceNum:context.sequenceNum,userId:context.userId,lastUpdatedStamp:context.lastUpdatedStamp]"/><if condition="contentFile != null && contentFile.size > 0"><then><service-call name="mantle.product.ProductServices.save#ProductContentFile" in-map="context"/></then><else><if condition="!contentLocation"><if condition="!contentText"><set field="contentText" value="[placeholder - delete me]"/></if><if condition="!filename"><set field="filename" value="${productContentTypeEnumId}_${productContentId}.${textExtension ?: 'html'}"/></if><set field="contentRoot" from="ec.user.getPreference('mantle.content.root') ?: 'dbresource://mantle/content'"/><set field="contentLocation" value="${contentRoot}/product/${productId}/${filename}"/><set field="docRr" from="ec.resource.getLocationReference(contentLocation)"/><script><![CDATA[docRr.putText(contentText)]]></script></if><service-call name="update#mantle.product.ProductContent" in-map="[productContentId:productContentId, contentLocation:contentLocation]"/></else></if></actions></service>