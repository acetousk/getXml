<!--Service Location mantle.party.DuplicateServices.find#PartyHasDuplicates--><service verb="find" noun="PartyHasDuplicates"><in-parameters><parameter name="partyId" required="true"/></in-parameters><out-parameters><parameter name="hasDuplicates" type="Boolean"/></out-parameters><actions><entity-find entity-name="mantle.party.PartyIdentification" list="partyIdentificationList"><econdition field-name="partyId"/><select-field field-name="idValue,partyIdTypeEnumId"/></entity-find><entity-find-count entity-name="mantle.party.PartyIdentification" count-field="idCount"><econdition field-name="partyId" operator="not-equals"/><econdition field-name="idValue" operator="in" from="partyIdentificationList*.idValue"/></entity-find-count><if condition="idCount > 0"><set field="hasDuplicates" from="true"/><return/></if><entity-find entity-name="mantle.party.contact.PartyContactMechInfo" list="partyContactMechInfoList"><date-filter/><econdition field-name="partyId"/><econdition field-name="contactMechTypeEnumId" value="CmtEmailAddress"/><select-field field-name="infoString"/></entity-find><entity-find entity-name="mantle.party.contact.ContactMech" list="allDupEmailList"><econdition field-name="contactMechTypeEnumId" value="CmtEmailAddress"/><econdition field-name="infoString" operator="in" from="partyContactMechInfoList*.infoString"/><select-field field-name="contactMechId,contactMechTypeEnumId,infoString"/></entity-find><iterate list="allDupEmailList" entry="dupEmail"><entity-find entity-name="mantle.party.contact.PartyContactMech" list="dupPcmList"><date-filter/><econdition field-name="partyId" operator="not-equals"/><econdition field-name="contactMechId" from="dupEmail.contactMechId"/></entity-find><if condition="dupPcmList"><set field="hasDuplicates" from="true"/><return/></if></iterate><entity-find-one entity-name="mantle.party.Person" value-field="person"><field-map field-name="partyId"/></entity-find-one><if condition="person != null && person.birthDate != null"><entity-find-count entity-name="mantle.party.Person" count-field="bdCount"><econdition field-name="partyId" operator="not-equals"/><econdition field-name="birthDate" from="person.birthDate"/><econdition field-name="firstName" from="person.firstName" ignore-case="true"/><econdition field-name="lastName" from="person.lastName" ignore-case="true"/></entity-find-count></if><if condition="bdCount > 0"><set field="hasDuplicates" from="true"/><return/></if><set field="hasDuplicates" from="false"/></actions></service>