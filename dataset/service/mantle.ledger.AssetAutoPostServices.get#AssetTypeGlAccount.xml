<!--Service Location mantle.ledger.AssetAutoPostServices.get#AssetTypeGlAccount--><service verb="get" noun="AssetTypeGlAccount"><in-parameters><parameter name="organizationPartyId" required="true" entity-name="mantle.ledger.config.AssetTypeGlAccount" field-name="organizationPartyId"/><parameter name="assetTypeEnumId" required="true" entity-name="mantle.ledger.config.AssetTypeGlAccount" field-name="assetTypeEnumId"/><parameter name="classEnumId" entity-name="mantle.ledger.config.AssetTypeGlAccount" field-name="classEnumId"/><parameter name="assetId" entity-name="mantle.ledger.config.AssetTypeGlAccount" field-name="assetId"/></in-parameters><out-parameters><parameter name="assetTypeGlAccount" type="Map"/></out-parameters><actions><if condition="assetId"><entity-find entity-name="mantle.ledger.config.AssetTypeGlAccount" list="assetTypeGlAccountList" cache="true"><econdition field-name="organizationPartyId"/><econdition field-name="assetId"/></entity-find><set field="assetTypeGlAccount" from="assetTypeGlAccountList ? assetTypeGlAccountList[0] : null"/></if><if condition="classEnumId && !assetTypeGlAccount"><entity-find entity-name="mantle.ledger.config.AssetTypeGlAccount" list="assetTypeGlAccountList" cache="true"><econdition field-name="organizationPartyId"/><econdition field-name="assetTypeEnumId"/><econdition field-name="classEnumId"/></entity-find><set field="assetTypeGlAccount" from="assetTypeGlAccountList ? assetTypeGlAccountList[0] : null"/></if><if condition="!assetTypeGlAccount"><entity-find entity-name="mantle.ledger.config.AssetTypeGlAccount" list="assetTypeGlAccountList" cache="true"><econdition field-name="organizationPartyId"/><econdition field-name="assetTypeEnumId"/><econdition field-name="classEnumId" from="null"/></entity-find><set field="assetTypeGlAccount" from="assetTypeGlAccountList ? assetTypeGlAccountList[0] : null"/></if><if condition="!assetTypeGlAccount"><entity-find entity-name="mantle.party.PartyRelationship" list="partyRelationshipList" cache="true"><date-filter/><econdition field-name="fromPartyId" from="organizationPartyId"/><econdition field-name="relationshipTypeEnumId" value="PrtOrgRollup"/><econdition field-name="fromRoleTypeId" value="OrgInternal"/><econdition field-name="toRoleTypeId" value="OrgInternal"/></entity-find><if condition="partyRelationshipList"><service-call name="mantle.ledger.AssetAutoPostServices.get#AssetTypeGlAccount" out-map="[assetTypeGlAccount:context.assetTypeGlAccount]" in-map="[organizationPartyId:partyRelationshipList[0].toPartyId,                                 assetTypeEnumId:assetTypeEnumId, classEnumId:classEnumId, assetId:assetId]"/></if></if></actions></service>