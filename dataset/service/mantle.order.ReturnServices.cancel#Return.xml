<!--Service Location mantle.order.ReturnServices.cancel#Return--><service verb="cancel" noun="Return"><in-parameters><parameter name="returnId" required="true"/></in-parameters><out-parameters><parameter name="statusId"/><parameter name="oldStatusId"/><parameter name="statusChanged" type="Boolean"/></out-parameters><actions><entity-find-one entity-name="mantle.order.return.ReturnHeader" value-field="returnHeader"/><if condition="returnHeader.statusId == 'ReturnCancelled'"><set field="statusId" value="ReturnCancelled"/><set field="oldStatusId" value="ReturnCancelled"/><set field="statusChanged" from="false"/><return/></if><entity-find entity-name="mantle.order.return.ReturnItem" list="returnItemList"><econdition field-name="returnId"/><econdition field-name="parentItemSeqId" operator="is-null"/></entity-find><iterate list="returnItemList" entry="returnItem"><service-call name="mantle.order.ReturnServices.cancel#ReturnItem" out-map="[statusId:itemOut.statusId,oldStatusId:itemOut.oldStatusId,statusChanged:itemOut.statusChanged]" in-map="[returnId:returnId, returnItemSeqId:returnItem.returnItemSeqId]"/></iterate><set field="statusId" value="ReturnCancelled"/><service-call name="update#mantle.order.return.ReturnHeader" out-map="[returnId:context.returnId,statusId:context.statusId,customerPartyId:context.customerPartyId,vendorPartyId:context.vendorPartyId,paymentMethodId:context.paymentMethodId,useSingleRefundPayment:context.useSingleRefundPayment,finAccountId:context.finAccountId,entryDate:context.entryDate,postalContactMechId:context.postalContactMechId,telecomContactMechId:context.telecomContactMechId,facilityId:context.facilityId,shipmentMethodEnumId:context.shipmentMethodEnumId,carrierPartyId:context.carrierPartyId,currencyUomId:context.currencyUomId,supplierRmaId:context.supplierRmaId,visitId:context.visitId,systemMessageRemoteId:context.systemMessageRemoteId,displayId:context.displayId,externalId:context.externalId,originId:context.originId,lastUpdatedStamp:context.lastUpdatedStamp]" in-map="[returnId:returnId, statusId:statusId]"/></actions></service>