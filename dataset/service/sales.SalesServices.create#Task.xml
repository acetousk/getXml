<!--Service Location sales.SalesServices.create#Task--><service verb="create" noun="Task"><in-parameters><parameter name="workEffortId"><matches regexp="[A-Za-z0-9]{1,8}" message="Task ID must be only letters and digits and between 1 and 8 characters long"/></parameter><parameter name="universalId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="universalId"/><parameter name="sourceReferenceId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="sourceReferenceId"/><parameter name="parentWorkEffortId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="parentWorkEffortId"/><parameter name="rootWorkEffortId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="rootWorkEffortId"/><parameter name="workEffortTypeEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="workEffortTypeEnumId" default-value="WetTask"/><parameter name="purposeEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="purposeEnumId"/><parameter name="visibilityEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="visibilityEnumId"/><parameter name="resolutionEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="resolutionEnumId"/><parameter name="workTypeEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="workTypeEnumId"/><parameter name="ownerPartyId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="ownerPartyId"/><parameter name="productStoreId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="productStoreId"/><parameter name="statusId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="statusId" default-value="WeInPlanning"/><parameter name="statusFlowId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="statusFlowId"/><parameter name="priority" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="priority"/><parameter name="sendNotificationEmail" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="sendNotificationEmail"/><parameter name="percentComplete" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="percentComplete"/><parameter name="revisionNumber" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="revisionNumber"/><parameter name="workEffortName" type="java.lang.String" required="true" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="workEffortName"/><parameter name="description" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="description"/><parameter name="location" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="location"/><parameter name="facilityId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="facilityId"/><parameter name="infoUrl" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="infoUrl"/><parameter name="shipmentMethodEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="shipmentMethodEnumId"/><parameter name="estimatedStartDate" type="Timestamp" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="estimatedStartDate" format="yyyy-MM-dd"/><parameter name="estimatedCompletionDate" type="Timestamp" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="estimatedCompletionDate" format="yyyy-MM-dd"/><parameter name="actualStartDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="actualStartDate"/><parameter name="actualCompletionDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="actualCompletionDate"/><parameter name="recurStartCron" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="recurStartCron"/><parameter name="recurLimit" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="recurLimit"/><parameter name="recurEndDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="recurEndDate"/><parameter name="allDayStart" type="java.sql.Date" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="allDayStart"/><parameter name="allDayEnd" type="java.sql.Date" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="allDayEnd"/><parameter name="estimatedWorkTime" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="estimatedWorkTime"/><parameter name="estimatedSetupTime" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="estimatedSetupTime"/><parameter name="remainingWorkTime" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="remainingWorkTime"/><parameter name="actualWorkTime" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="actualWorkTime"/><parameter name="actualSetupTime" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="actualSetupTime"/><parameter name="totalTimeAllowed" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="totalTimeAllowed"/><parameter name="estimatedWorkDuration" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="estimatedWorkDuration"/><parameter name="actualWorkDuration" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="actualWorkDuration"/><parameter name="actualBreakDuration" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="actualBreakDuration"/><parameter name="timeUomId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="timeUomId"/><parameter name="actualCost" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="actualCost"/><parameter name="actualClientCost" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="actualClientCost"/><parameter name="totalClientCostAllowed" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="totalClientCostAllowed"/><parameter name="costUomId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="costUomId"/><parameter name="activityId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="activityId"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.work.effort.WorkEffort" field-name="lastUpdatedStamp"/><parameter name="accountPartyId" required="true"/><parameter name="assignToPartyId"/><parameter name="assignRoleTypeId" default-value="Assignee"/><parameter name="assignStatusId" default-value="WeptAssigned"/><parameter name="salesOpportunityId"/></in-parameters><out-parameters><parameter name="workEffortId"/></out-parameters><actions><if condition="estimatedStartDate != null && estimatedCompletionDate != null &&                            estimatedCompletionDate < estimatedStartDate"><return error="true" message="Date range is not valid."/></if><service-call name="create#mantle.work.effort.WorkEffort" out-map="[workEffortId:context.workEffortId,universalId:context.universalId,sourceReferenceId:context.sourceReferenceId,parentWorkEffortId:context.parentWorkEffortId,rootWorkEffortId:context.rootWorkEffortId,workEffortTypeEnumId:context.workEffortTypeEnumId,purposeEnumId:context.purposeEnumId,visibilityEnumId:context.visibilityEnumId,resolutionEnumId:context.resolutionEnumId,workTypeEnumId:context.workTypeEnumId,ownerPartyId:context.ownerPartyId,productStoreId:context.productStoreId,statusId:context.statusId,statusFlowId:context.statusFlowId,priority:context.priority,sendNotificationEmail:context.sendNotificationEmail,percentComplete:context.percentComplete,revisionNumber:context.revisionNumber,workEffortName:context.workEffortName,description:context.description,location:context.location,facilityId:context.facilityId,infoUrl:context.infoUrl,shipmentMethodEnumId:context.shipmentMethodEnumId,estimatedStartDate:context.estimatedStartDate,estimatedCompletionDate:context.estimatedCompletionDate,actualStartDate:context.actualStartDate,actualCompletionDate:context.actualCompletionDate,recurStartCron:context.recurStartCron,recurLimit:context.recurLimit,recurEndDate:context.recurEndDate,allDayStart:context.allDayStart,allDayEnd:context.allDayEnd,estimatedWorkTime:context.estimatedWorkTime,estimatedSetupTime:context.estimatedSetupTime,remainingWorkTime:context.remainingWorkTime,actualWorkTime:context.actualWorkTime,actualSetupTime:context.actualSetupTime,totalTimeAllowed:context.totalTimeAllowed,estimatedWorkDuration:context.estimatedWorkDuration,actualWorkDuration:context.actualWorkDuration,actualBreakDuration:context.actualBreakDuration,timeUomId:context.timeUomId,actualCost:context.actualCost,actualClientCost:context.actualClientCost,totalClientCostAllowed:context.totalClientCostAllowed,costUomId:context.costUomId,activityId:context.activityId,lastUpdatedStamp:context.lastUpdatedStamp]" in-map="context"/><if condition="ec.user.userAccount?.partyId"><service-call name="create#mantle.work.effort.WorkEffortParty" in-map="[workEffortId:workEffortId, partyId:ec.user.userAccount.partyId,                             roleTypeId:'Assignee', fromDate:ec.user.nowTimestamp, statusId:'WeptAssigned']"/></if><service-call name="create#mantle.work.effort.WorkEffortParty" in-map="[workEffortId:workEffortId,                         partyId:accountPartyId, roleTypeId:'Customer', fromDate:ec.user.nowTimestamp]"/><if condition="assignToPartyId"><service-call name="create#mantle.work.effort.WorkEffortParty" in-map="[workEffortId:workEffortId, partyId:assignToPartyId,                         roleTypeId:'assignRoleTypeId', fromDate:ec.user.nowTimestamp, statusId:assignStatusId]"/></if><if condition="salesOpportunityId"><service-call name="create#mantle.sales.opportunity.SalesOpportunityWorkEffort" in-map="[workEffortId:workEffortId,salesOpportunityId:salesOpportunityId]"/></if></actions></service>