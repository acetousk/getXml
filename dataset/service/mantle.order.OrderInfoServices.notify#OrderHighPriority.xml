<!--Service Location mantle.order.OrderInfoServices.notify#OrderHighPriority--><service verb="notify" noun="OrderHighPriority"><in-parameters><parameter name="orderId" required="true"/><parameter name="orderPartSeqId"/><parameter name="priorityMax" type="Integer" default="1"/><parameter name="notificationTopic" default-value="OrderHighPriority"/></in-parameters><out-parameters/><actions><entity-find entity-name="mantle.order.OrderPart" list="orderPartList"><econdition field-name="orderId"/><econdition field-name="orderPartSeqId" ignore-if-empty="true"/></entity-find><iterate list="orderPartList" entry="orderPart"><if condition="orderPart.priority > priorityMax"><continue/></if><set field="title" from="'High Priority Order ${orderId}:${orderPartSeqId} - Priority ${priority}'"/><script><![CDATA[def nm = ec.makeNotificationMessage().topic((String) notificationTopic)
                            .message([orderId:orderId, orderPartSeqId:orderPart.orderPartSeqId, priority:orderPart.priority])
                    nm.send()]]></script></iterate></actions></service>