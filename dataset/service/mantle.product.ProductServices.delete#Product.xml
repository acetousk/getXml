<!--Service Location mantle.product.ProductServices.delete#Product--><service verb="delete" noun="Product"><in-parameters><parameter name="productId" required="true" entity-name="mantle.product.Product" field-name="productId"/><parameter name="callOutServiceName"><description><![CDATA[Call this service before deleting anything else, passes
                in productId.]]></description></parameter></in-parameters><out-parameters/><actions><if condition="callOutServiceName"><service-call name="${callOutServiceName}" in-map="[productId:productId]"/></if><service-call name="mantle.product.ProductServices.delete#VariantProducts" in-map="[productId:productId, callOutServiceName:callOutServiceName]"/><entity-find-one entity-name="mantle.product.Product" value-field="product"/><if condition="product != null"><script><![CDATA[deletedProduct = product.deleteWithRelated(new HashSet(['assocs', 'toAssocs', 'contents', 'dimensions', 'geos',
                                                                   'identifications', 'parties', 'prices', 'categories', 'features']))]]></script><if condition="deletedProduct"><then><message><![CDATA[Deleted product ${product.pseudoId}: ${product.productName}]]></message></then><else><message><![CDATA[Not deleting product ${product.pseudoId}: ${product.productName}, has records that use it]]></message></else></if></if></actions></service>