<!--Service Location mantle.shipment.CarrierServices.refund#ShipmentLabels--><service verb="refund" noun="ShipmentLabels"><in-parameters><parameter name="shipmentId" required="true"/><parameter name="shipmentPackageSeqId"/><parameter name="shipmentRouteSegmentSeqId"><description><![CDATA[Defaults to the first route segment]]></description></parameter></in-parameters><out-parameters/><actions><service-call name="mantle.shipment.CarrierServices.get#ShipmentGatewayDetails" in-map="context" out-map="[shipmentRouteSegmentSeqId:context.shipmentRouteSegmentSeqId,routeSegment:context.routeSegment,shippingGatewayConfigId:context.shippingGatewayConfigId,shippingGatewayConfig:context.shippingGatewayConfig]"/><set field="refundLabelsServiceName" from="shippingGatewayConfig.refundLabelsServiceName"/><if condition="!refundLabelsServiceName"><log level="error" message="No ShippingGatewayConfig with ID ${shippingGatewayConfigId} has no refundLabelsServiceName, not validating address"/><return/></if><service-call name="${refundLabelsServiceName}" out-map="context" in-map="[shipmentId:shipmentId, shipmentRouteSegmentSeqId:shipmentRouteSegmentSeqId,                         shipmentPackageSeqId:shipmentPackageSeqId, shippingGatewayConfigId:shippingGatewayConfigId]"/></actions></service>