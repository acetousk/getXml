<!--Service Location mantle.order.OrderServices.create#RecurringOrders--><service verb="create" noun="RecurringOrders"><in-parameters/><out-parameters/><actions><entity-find entity-name="mantle.order.OrderHeader" list="orderHeaderList" cache="false"><econdition field-name="statusId" value="OrderApproved"/><econdition field-name="recurCronExpression" operator="is-not-null"/><select-field field-name="orderId,recurCronExpression,lastOrderedDate"/><order-by field-name="orderId"/></entity-find><iterate list="orderHeaderList" entry="orderHeader"><set field="shouldRun" from="org.moqui.impl.service.ScheduledJobRunner.isLastRunBeforeLastSchedule(                         orderHeader.recurCronExpression, orderHeader.lastOrderedDate, 'Order ' + orderHeader.orderId, null)"/><if condition="shouldRun"><service-call name="mantle.order.OrderServices.create#RecurringOrder" in-map="[baseOrderId:orderHeader.orderId]" async="distribute"/></if></iterate></actions></service>