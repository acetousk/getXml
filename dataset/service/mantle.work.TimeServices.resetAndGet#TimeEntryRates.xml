<!--Service Location mantle.work.TimeServices.resetAndGet#TimeEntryRates--><service verb="resetAndGet" noun="TimeEntryRates"><in-parameters><parameter name="timePeriodId"/><parameter name="workEffortId"/><parameter name="partyId"/><parameter name="clientPartyId"/><parameter name="fromTimestamp" type="Timestamp"/><parameter name="thruTimestamp" type="Timestamp"/></in-parameters><out-parameters/><actions><if condition="timePeriodId"><service-call name="mantle.party.TimeServices.get#TimePeriodInfo" in-map="[timePeriodId:timePeriodId]" out-map="[timePeriod:periodInfo.timePeriod,fromTimestamp:periodInfo.fromTimestamp,thruTimestamp:periodInfo.thruTimestamp,thruTimestampExclusive:periodInfo.thruTimestampExclusive,thruTimestampLate:periodInfo.thruTimestampLate]"/><set field="fromTimestamp" from="periodInfo.fromTimestamp"/><set field="thruTimestamp" from="periodInfo.thruTimestamp"/><set field="clientPartyId" from="clientPartyId ?: periodInfo.timePeriod.partyId"/></if><entity-find entity-name="mantle.work.time.TimeEntry" list="timeEntryList"><econdition field-name="workEffortId" ignore-if-empty="true"/><econdition field-name="partyId" ignore-if-empty="true"/><econdition field-name="clientPartyId" ignore-if-empty="true"/><econdition field-name="thruDate" operator="greater-equals" from="fromTimestamp" ignore-if-empty="true"/><econdition field-name="thruDate" operator="less-equals" from="thruTimestamp" ignore-if-empty="true"/><econdition field-name="invoiceId" from="null"/><econdition field-name="vendorInvoiceId" from="null"/><select-field field-name="timeEntryId"/></entity-find><iterate list="timeEntryList" entry="timeEntry"><service-call name="mantle.work.TimeServices.get#TimeEntryRate" in-map="[timeEntryId:timeEntry.timeEntryId, resetRates:true]"/></iterate></actions></service>