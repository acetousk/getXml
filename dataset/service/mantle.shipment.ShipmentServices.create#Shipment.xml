<!--Service Location mantle.shipment.ShipmentServices.create#Shipment--><service verb="create" noun="Shipment"><in-parameters><parameter name="shipmentId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="shipmentId"/><parameter name="shipmentTypeEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="shipmentTypeEnumId"/><parameter name="statusId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="statusId" default-value="ShipInput"/><parameter name="fromPartyId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="fromPartyId"/><parameter name="toPartyId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="toPartyId"/><parameter name="binLocationNumber" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="binLocationNumber"/><parameter name="productStoreId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="productStoreId"/><parameter name="priority" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="priority"/><parameter name="entryDate" type="Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="entryDate" default="ec.user.nowTimestamp"/><parameter name="shipAfterDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="shipAfterDate"/><parameter name="shipBeforeDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="shipBeforeDate"/><parameter name="estimatedReadyDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="estimatedReadyDate"/><parameter name="estimatedShipDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="estimatedShipDate"/><parameter name="estimatedArrivalDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="estimatedArrivalDate"/><parameter name="latestCancelDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="latestCancelDate"/><parameter name="packedDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="packedDate"/><parameter name="pickContainerId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="pickContainerId"/><parameter name="shipWorkEffortId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="shipWorkEffortId"/><parameter name="receiveWorkEffortId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="receiveWorkEffortId"/><parameter name="assemblyWorkEffortId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="assemblyWorkEffortId"/><parameter name="estimatedShipCost" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="estimatedShipCost"/><parameter name="costUomId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="costUomId"/><parameter name="addtlShippingCharge" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="addtlShippingCharge"/><parameter name="addtlShippingChargeDesc" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="addtlShippingChargeDesc"/><parameter name="signatureRequiredEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="signatureRequiredEnumId"/><parameter name="handlingInstructions" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="handlingInstructions"/><parameter name="otherPartyOrderId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="otherPartyOrderId"/><parameter name="systemMessageRemoteId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="systemMessageRemoteId"/><parameter name="externalId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="externalId"/><parameter name="originId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.Shipment" field-name="originId"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="lastUpdatedStamp"/><parameter name="shipmentRouteSegmentSeqId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="shipmentRouteSegmentSeqId"/><parameter name="deliveryId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="deliveryId"/><parameter name="shippingGatewayConfigId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="shippingGatewayConfigId"/><parameter name="originFacilityId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="originFacilityId"/><parameter name="originPostalContactMechId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="originPostalContactMechId"/><parameter name="originTelecomContactMechId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="originTelecomContactMechId"/><parameter name="returnPostalContactMechId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="returnPostalContactMechId"/><parameter name="destinationFacilityId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="destinationFacilityId"/><parameter name="destPostalContactMechId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="destPostalContactMechId"/><parameter name="destTelecomContactMechId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="destTelecomContactMechId"/><parameter name="carrierPartyId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="carrierPartyId"/><parameter name="shipmentMethodEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="shipmentMethodEnumId"/><parameter name="tradeTermEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="tradeTermEnumId"/><parameter name="customsCertify" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="customsCertify"/><parameter name="customsCertifySigner" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="customsCertifySigner"/><parameter name="customsContentsEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="customsContentsEnumId"/><parameter name="customsNonDeliveryEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="customsNonDeliveryEnumId"/><parameter name="carrierDeliveryZone" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="carrierDeliveryZone"/><parameter name="carrierRestrictionCodes" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="carrierRestrictionCodes"/><parameter name="carrierRestrictionDesc" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="carrierRestrictionDesc"/><parameter name="billingWeight" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="billingWeight"/><parameter name="billingWeightUomId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="billingWeightUomId"/><parameter name="actualTransportCost" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="actualTransportCost"/><parameter name="actualServiceCost" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="actualServiceCost"/><parameter name="actualOtherCost" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="actualOtherCost"/><parameter name="actualCost" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="actualCost"/><parameter name="actualStartDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="actualStartDate"/><parameter name="actualArrivalDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="actualArrivalDate"/><parameter name="estimatedStartDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="estimatedStartDate"/><parameter name="masterTrackingCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="masterTrackingCode"/><parameter name="masterTrackingUrl" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="masterTrackingUrl"/><parameter name="homeDeliveryType" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="homeDeliveryType"/><parameter name="homeDeliveryDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="homeDeliveryDate"/><parameter name="thirdPartyAccountNumber" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="thirdPartyAccountNumber"/><parameter name="thirdPartyPostalCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="thirdPartyPostalCode"/><parameter name="thirdPartyCountryGeoCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="thirdPartyCountryGeoCode"/><parameter name="highValueReport" type="java.sql.Blob" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentRouteSegment" field-name="highValueReport"/></in-parameters><out-parameters><parameter name="shipmentId" entity-name="mantle.shipment.Shipment" field-name="shipmentId"/><parameter name="shipmentRouteSegmentSeqId"/></out-parameters><actions><if condition="!fromPartyId && originFacilityId"><entity-find-one entity-name="mantle.facility.Facility" value-field="originFacility"><field-map field-name="facilityId" from="originFacilityId"/></entity-find-one><set field="fromPartyId" from="originFacility.ownerPartyId"/></if><if condition="!toPartyId && destinationFacilityId"><entity-find-one entity-name="mantle.facility.Facility" value-field="destinationFacility"><field-map field-name="facilityId" from="destinationFacilityId"/></entity-find-one><set field="toPartyId" from="destinationFacility.ownerPartyId"/></if><if condition="!destPostalContactMechId && destinationFacilityId"><service-call name="mantle.facility.ContactServices.get#FacilityDefaultShipDest" in-map="[facilityId:destinationFacilityId]" out-map="[postalContactMechId:facDestOut.postalContactMechId,telecomContactMechId:facDestOut.telecomContactMechId]"/><set field="destPostalContactMechId" from="facDestOut.postalContactMechId"/></if><service-call name="create#mantle.shipment.Shipment" in-map="context" out-map="[shipmentId:context.shipmentId,shipmentTypeEnumId:context.shipmentTypeEnumId,statusId:context.statusId,fromPartyId:context.fromPartyId,toPartyId:context.toPartyId,binLocationNumber:context.binLocationNumber,productStoreId:context.productStoreId,priority:context.priority,entryDate:context.entryDate,shipAfterDate:context.shipAfterDate,shipBeforeDate:context.shipBeforeDate,estimatedReadyDate:context.estimatedReadyDate,estimatedShipDate:context.estimatedShipDate,estimatedArrivalDate:context.estimatedArrivalDate,latestCancelDate:context.latestCancelDate,packedDate:context.packedDate,pickContainerId:context.pickContainerId,shipWorkEffortId:context.shipWorkEffortId,receiveWorkEffortId:context.receiveWorkEffortId,assemblyWorkEffortId:context.assemblyWorkEffortId,estimatedShipCost:context.estimatedShipCost,costUomId:context.costUomId,addtlShippingCharge:context.addtlShippingCharge,addtlShippingChargeDesc:context.addtlShippingChargeDesc,signatureRequiredEnumId:context.signatureRequiredEnumId,handlingInstructions:context.handlingInstructions,otherPartyOrderId:context.otherPartyOrderId,systemMessageRemoteId:context.systemMessageRemoteId,externalId:context.externalId,originId:context.originId,lastUpdatedStamp:context.lastUpdatedStamp]"/><service-call name="create#mantle.shipment.ShipmentRouteSegment" in-map="context" out-map="[shipmentId:context.shipmentId,shipmentRouteSegmentSeqId:context.shipmentRouteSegmentSeqId,deliveryId:context.deliveryId,shippingGatewayConfigId:context.shippingGatewayConfigId,originFacilityId:context.originFacilityId,originPostalContactMechId:context.originPostalContactMechId,originTelecomContactMechId:context.originTelecomContactMechId,returnPostalContactMechId:context.returnPostalContactMechId,destinationFacilityId:context.destinationFacilityId,destPostalContactMechId:context.destPostalContactMechId,destTelecomContactMechId:context.destTelecomContactMechId,carrierPartyId:context.carrierPartyId,shipmentMethodEnumId:context.shipmentMethodEnumId,tradeTermEnumId:context.tradeTermEnumId,customsCertify:context.customsCertify,customsCertifySigner:context.customsCertifySigner,customsContentsEnumId:context.customsContentsEnumId,customsNonDeliveryEnumId:context.customsNonDeliveryEnumId,statusId:context.statusId,carrierDeliveryZone:context.carrierDeliveryZone,carrierRestrictionCodes:context.carrierRestrictionCodes,carrierRestrictionDesc:context.carrierRestrictionDesc,billingWeight:context.billingWeight,billingWeightUomId:context.billingWeightUomId,actualTransportCost:context.actualTransportCost,actualServiceCost:context.actualServiceCost,actualOtherCost:context.actualOtherCost,actualCost:context.actualCost,costUomId:context.costUomId,actualStartDate:context.actualStartDate,actualArrivalDate:context.actualArrivalDate,estimatedStartDate:context.estimatedStartDate,estimatedArrivalDate:context.estimatedArrivalDate,masterTrackingCode:context.masterTrackingCode,masterTrackingUrl:context.masterTrackingUrl,homeDeliveryType:context.homeDeliveryType,homeDeliveryDate:context.homeDeliveryDate,thirdPartyAccountNumber:context.thirdPartyAccountNumber,thirdPartyPostalCode:context.thirdPartyPostalCode,thirdPartyCountryGeoCode:context.thirdPartyCountryGeoCode,highValueReport:context.highValueReport,lastUpdatedStamp:context.lastUpdatedStamp]"/></actions></service>