<!--Service Location mantle.party.TimeServices.getOrCreate#NextTimePeriod--><service verb="getOrCreate" noun="NextTimePeriod"><in-parameters><parameter name="timePeriodId" required="true"/></in-parameters><out-parameters><parameter name="nextTimePeriodId"/><parameter name="nextTimePeriod" type="EntityValue"/></out-parameters><actions><entity-find entity-name="mantle.party.time.TimePeriod" list="nextTimePeriodList"><econdition field-name="previousPeriodId" from="timePeriodId"/></entity-find><if condition="nextTimePeriodList"><then><set field="nextTimePeriod" from="nextTimePeriodList[0]"/></then><else><service-call name="mantle.party.TimeServices.create#TimePeriod" out-map="[timePeriodId:createTpOut.timePeriodId]" in-map="[previousPeriodId:timePeriodId]"/><entity-find-one entity-name="mantle.party.time.TimePeriod" value-field="nextTimePeriod"><field-map field-name="timePeriodId" from="createTpOut.timePeriodId"/></entity-find-one></else></if><set field="nextTimePeriodId" from="nextTimePeriod.timePeriodId"/></actions></service>