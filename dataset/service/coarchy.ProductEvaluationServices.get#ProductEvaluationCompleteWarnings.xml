<!--Service Location coarchy.ProductEvaluationServices.get#ProductEvaluationCompleteWarnings--><service verb="get" noun="ProductEvaluationCompleteWarnings"><in-parameters><parameter name="productEvaluationId" required="true"/></in-parameters><out-parameters><parameter name="hasWarnings" type="Boolean"/><parameter name="vendorRespondedToAllStories" type="Boolean"/><parameter name="vendorRespondedToAllStatements" type="Boolean"/><parameter name="internalRespondedToAllStories" type="Boolean"/><parameter name="internalRespondedToAllStatements" type="Boolean"/></out-parameters><actions><set field="hasWarnings" from="false"/><entity-find-one entity-name="coarchy.product.ProductEvaluation" value-field="productEvaluation"/><if condition="!['PeAwaitingVendorResponse'].contains(productEvaluation.statusId)"><return/></if><service-call name="coarchy.ProductEvaluationServices.get#ProductEvaluationActivites" in-map="[productEvaluationId:productEvaluationId]" out-map="[processStoryIds:productEvalActivities.processStoryIds,activityIds:productEvalActivities.activityIds,activityList:productEvalActivities.activityList]"/><service-call name="coarchy.ProductEvaluationServices.get#ProductEvaluationStatements" in-map="[productEvaluationId:productEvaluationId]" out-map="[valueStatementIds:productEvalStatements.valueStatementIds,valueStatementList:productEvalStatements.valueStatementList,allValueStatementList:productEvalStatements.allValueStatementList,allValueStatementIds:productEvalStatements.allValueStatementIds]"/><set field="vendorRespondedToAllStories" from="true"/><set field="vendorRespondedToAllStatements" from="true"/><iterate list="productEvalActivities.activityIds" entry="activityId"><entity-find-count entity-name="coarchy.product.ProductEvaluationResponse" count-field="productEvalResponseCount"><econdition field-name="productEvaluationId"/><econdition field-name="activityId"/><econdition field-name="evaluationByEnumId" value="EbVendor"/></entity-find-count><if condition="!productEvalResponseCount"><set field="vendorRespondedToAllStories" from="false"/><break/></if></iterate><iterate list="productEvalStatements.valueStatementIds" entry="valueStatementId"><entity-find-count entity-name="coarchy.product.ProductEvaluationResponse" count-field="productEvalResponseCount"><econdition field-name="productEvaluationId"/><econdition field-name="statementId" from="valueStatementId"/><econdition field-name="evaluationByEnumId" value="EbVendor"/></entity-find-count><if condition="!productEvalResponseCount"><set field="vendorRespondedToAllStatements" from="false"/><break/></if></iterate><set field="internalRespondedToAllStories" from="true"/><set field="internalRespondedToAllStatements" from="true"/><iterate list="productEvalActivities.activityIds" entry="activityId"><entity-find-count entity-name="coarchy.product.ProductEvaluationResponse" count-field="productEvalResponseCount"><econdition field-name="productEvaluationId"/><econdition field-name="activityId"/><econdition field-name="evaluationByEnumId" value="EbInternal"/></entity-find-count><if condition="!productEvalResponseCount"><set field="internalRespondedToAllStories" from="false"/><break/></if></iterate><iterate list="productEvalStatements.valueStatementIds" entry="valueStatementId"><entity-find-count entity-name="coarchy.product.ProductEvaluationResponse" count-field="productEvalResponseCount"><econdition field-name="productEvaluationId"/><econdition field-name="statementId" from="valueStatementId"/><econdition field-name="evaluationByEnumId" value="EbInternal"/></entity-find-count><if condition="!productEvalResponseCount"><set field="internalRespondedToAllStatements" from="false"/><break/></if></iterate><set field="hasWarnings" from="!vendorRespondedToAllStories || !vendorRespondedToAllStatements || !internalRespondedToAllStories || !internalRespondedToAllStatements"/></actions></service>