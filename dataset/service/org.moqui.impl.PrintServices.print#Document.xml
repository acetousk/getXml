<!--Service Location org.moqui.impl.PrintServices.print#Document--><service verb="print" noun="Document"><in-parameters><parameter name="networkPrinterId" required="true"/><parameter name="createdDate" type="Timestamp" default="ec.user.nowTimestamp"/><parameter name="username"/><parameter name="jobName"/><parameter name="copies" type="Integer" default="1"/><parameter name="duplex" default-value="N"/><parameter name="pageRanges"/><parameter name="storeDocument" type="Boolean" default="true"/><parameter name="contentType"/><parameter name="inputStream" type="java.io.InputStream"><description><![CDATA[The document may be passed in this
                parameter as an InputStream or in the serialBlob field as a wrapped byte[].]]></description></parameter><parameter name="serialBlob" type="javax.sql.rowset.serial.SerialBlob"><description><![CDATA[Use SerialBlob as a wrapper for byte[].]]></description></parameter></in-parameters><out-parameters><parameter name="printJobId"/><parameter name="jobId" type="Integer"/></out-parameters><actions><if condition="serialBlob == null && inputStream == null"><return error="true" message="Both inputStream and serialBlob are null, must specify one or the other"/></if><if condition="serialBlob != null"><then><set field="docBytes" from="serialBlob.getBytes(1, (int) serialBlob.length())"/></then><else><set field="docBytes" from="org.apache.commons.io.IOUtils.toByteArray(inputStream)"/></else></if><if condition="storeDocument"><set field="document" from="docBytes"/></if><set field="statusId" value="PtjNotSent"/><service-call name="create#moqui.basic.print.PrintJob" in-map="context" out-map="[printJobId:context.printJobId,statusId:context.statusId,createdDate:context.createdDate,errorMessage:context.errorMessage,networkPrinterId:context.networkPrinterId,username:context.username,jobId:context.jobId,jobName:context.jobName,copies:context.copies,duplex:context.duplex,pageRanges:context.pageRanges,contentType:context.contentType,document:context.document,lastUpdatedStamp:context.lastUpdatedStamp]" transaction="force-new"/><if condition="!storeDocument"><set field="document" from="docBytes"/></if><service-call name="org.moqui.impl.PrintServices.send#PrintJobInternal" in-map="[printJob:new HashMap(context)]" out-map="[jobId:context.jobId]"/></actions></service>