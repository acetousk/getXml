<!--Service Location mantle.product.ProductServices.find#ProductCategoryFeatures--><service verb="find" noun="ProductCategoryFeatures"><in-parameters><parameter name="productCategoryId" required="true"/><parameter name="applTypeEnumId"/><parameter name="productFeatureTypeEnumId"/><parameter name="productFeatureGroupIdSet" type="Set"><parameter name="productFeatureGroupId"/></parameter></in-parameters><out-parameters><parameter name="productFeatureList" type="List"><parameter name="productFeature" type="Map"/></parameter></out-parameters><actions><set field="productFeatureMap" from="[:]"/><entity-find entity-name="mantle.product.feature.ProductCategoryFeatGrpAppl" list="pcfgaList"><date-filter/><econdition field-name="productCategoryId"/><econdition field-name="productFeatureGroupId" operator="in" from="productFeatureGroupIdSet" ignore-if-empty="true"/><econdition field-name="applTypeEnumId" ignore-if-empty="true"/></entity-find><iterate list="pcfgaList" entry="pcfga"><entity-find entity-name="mantle.product.feature.ProductFeatureAndGroupAppl" list="pfagaList"><date-filter/><econdition field-name="productFeatureGroupId" from="pcfga.productFeatureGroupId"/><econdition field-name="productFeatureTypeEnumId" ignore-if-empty="true"/></entity-find><iterate list="pfagaList" entry="pfaga"><script><![CDATA[productFeatureMap.put(pfaga.productFeatureId, pfaga)]]></script></iterate></iterate><set field="productFeatureList" from="new ArrayList(productFeatureMap.values())"/></actions></service>