<!--Service Location mantle.other.TaxServices.create#AllVendor1099MiscStatements--><service verb="create" noun="AllVendor1099MiscStatements"><in-parameters><parameter name="timePeriodId" required="true"/><parameter name="taxAuthorityId" default-value="UsaIrs"/><parameter name="formId" default-value="UsaIrs1099Misc"/><parameter name="amountThreshold" type="BigDecimal" default="600"/></in-parameters><out-parameters/><actions><entity-find-one entity-name="mantle.party.time.TimePeriod" value-field="timePeriod"/><service-call name="mantle.party.TimeServices.get#TimePeriodInfo" in-map="[timePeriod:timePeriod]" out-map="[timePeriod:periodInfo.timePeriod,fromTimestamp:periodInfo.fromTimestamp,thruTimestamp:periodInfo.thruTimestamp,thruTimestampExclusive:periodInfo.thruTimestampExclusive,thruTimestampLate:periodInfo.thruTimestampLate]"/><set field="fromTimestamp" from="periodInfo.fromTimestamp"/><set field="thruTimestamp" from="periodInfo.thruTimestamp"/><entity-find entity-name="mantle.account.invoice.InvoiceSummary" list="invoiceSummaryList"><econdition field-name="toPartyId" from="timePeriod.partyId"/><econdition field-name="statusId" operator="in" value="InvoiceApproved,InvoicePmtSent"/><econdition field-name="invoiceTypeEnumId" operator="not-in" value="InvoicePayroll,InvoiceTax"/><econdition field-name="invoiceDate" operator="greater-equals" from="fromTimestamp"/><econdition field-name="invoiceDate" operator="less-equals" from="thruTimestamp"/><having-econditions><econdition field-name="grandTotal" operator="greater-equals" from="amountThreshold"/></having-econditions><select-field field-name="fromPartyId"/></entity-find><iterate list="invoiceSummaryList" entry="invoiceSummary"><service-call name="mantle.other.TaxServices.create#Vendor1099MiscStatement" in-map="[timePeriodId:timePeriodId, partyId:invoiceSummary.fromPartyId,                             taxAuthorityId:taxAuthorityId, formId:formId]"/></iterate></actions></service>