<!--Service Location mantle.order.ReturnServices.receive#ReturnShipmentItems--><service verb="receive" noun="ReturnShipmentItems"><in-parameters><parameter name="shipmentId" required="true"/></in-parameters><out-parameters/><actions><entity-find-one entity-name="mantle.shipment.Shipment" value-field="shipment"/><if condition="shipment.shipmentTypeEnumId != 'ShpTpSalesReturn'"><return/></if><entity-find entity-name="mantle.product.receipt.AssetReceipt" list="receiptList"><econdition field-name="shipmentId"/><select-field field-name="returnId"/><select-field field-name="returnItemSeqId"/><select-field field-name="quantityAccepted"/></entity-find><set field="receiptSummaryMap" from="[:]"/><iterate list="receiptList" entry="receipt"><if condition="receipt.quantityAccepted <= 0.0"><continue/></if><script><![CDATA[addToBigDecimalInMap([returnId:receipt.returnId, returnItemSeqId:receipt.returnItemSeqId], receipt.quantityAccepted, receiptSummaryMap)]]></script></iterate><iterate list="receiptSummaryMap" entry="quantityAccepted" key="idMap"><service-call name="mantle.order.ReturnServices.receive#ReturnItem" in-map="[returnId:idMap.returnId,                         returnItemSeqId:idMap.returnItemSeqId, receivedQuantity:quantityAccepted]"/></iterate></actions></service>