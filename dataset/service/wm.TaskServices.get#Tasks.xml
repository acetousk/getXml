<!--Service Location wm.TaskServices.get#Tasks--><service verb="get" noun="Tasks"><in-parameters><parameter name="partyId"/><parameter name="roleTypeId"/><parameter name="statusId" default-value="WeInPlanning,WeApproved,WeInProgress"/><parameter name="rootWorkEffortId"/><parameter name="pageOffset" default-value="" type="Integer"/><parameter name="pageLimit" default-value="" type="Integer"/><parameter name="orderByField" default-value="-workEffortId"/></in-parameters><out-parameters><parameter name="taskList" type="List"/><parameter name="count" type="Integer"/></out-parameters><actions><entity-find entity-name="mantle.work.effort.WorkEffortAndParty" list="myProjectList"><econditions combine="or"><econdition field-name="visibilityEnumId" operator="in" value="WevGeneral,WevAllUsers"/><econditions><date-filter/><econdition field-name="partyId" from="ec.user.userAccount.partyId"/></econditions></econditions><econdition field-name="workEffortTypeEnumId" value="WetProject"/><order-by field-name="workEffortId"/></entity-find><set field="myProjectIds" from="myProjectList.workEffortId"/><entity-find-count entity-name="mantle.work.effort.WorkEffortAndParty" count-field="count" distinct="true"><econdition field-name="partyId" ignore-if-empty="true"/><econdition field-name="roleTypeId" ignore-if-empty="true"/><date-filter/><econdition field-name="rootWorkEffortId" ignore-if-empty="true"/><econdition field-name="workEffortTypeEnumId" value="WetTask"/><econdition field-name="statusId" operator="in" from="statusId"/><econditions combine="or"><econdition field-name="rootWorkEffortId" operator="in" from="myProjectIds"/><econditions><date-filter/><econdition field-name="partyId" from="ec.user.userAccount.partyId"/></econditions><econdition field-name="visibilityEnumId" operator="in" value="WevAllUsers"/></econditions><select-field field-name="rootWorkEffortId,workEffortId,workEffortName,statusId,estimatedCompletionDate"/></entity-find-count><entity-find offset="pageOffset" limit="pageLimit" entity-name="mantle.work.effort.WorkEffortAndParty" list="weapList" distinct="true"><econdition field-name="partyId" ignore-if-empty="true"/><econdition field-name="roleTypeId" ignore-if-empty="true"/><date-filter/><econdition field-name="workEffortTypeEnumId" value="WetTask"/><econdition field-name="statusId" operator="in" from="statusId"/><econditions combine="or"><econdition field-name="rootWorkEffortId" operator="in" from="myProjectIds"/><econditions><date-filter/><econdition field-name="partyId" from="ec.user.userAccount.partyId"/></econditions><econdition field-name="visibilityEnumId" operator="in" value="WevAllUsers"/></econditions><select-field field-name="rootWorkEffortId,workEffortId,workEffortName,statusId,estimatedCompletionDate,priority"/><order-by field-name="${orderByField}"/></entity-find><set field="taskList" from="[]"/><if condition="weapList"><iterate list="weapList" entry="weap"><set field="task" from="new HashMap()"/><script><![CDATA[task.putAll(weap)
                        taskList.add(task)]]></script><entity-find entity-name="mantle.work.effort.WorkEffortParty" list="assignToList"><econdition field-name="workEffortId" from="weap.workEffortId"/><econdition field-name="roleTypeId" value="Assignee"/><date-filter/></entity-find><if condition="assignToList"><set field="assignToPartyId" from="assignToList[0].partyId"/><script><![CDATA[task.put("assignToPartyId",assignToPartyId)]]></script><entity-find-one entity-name="mantle.party.PartyDetail" value-field="partyDetail"><field-map field-name="partyId" from="assignToPartyId"/></entity-find-one><if condition="partyDetail"><set field="assignedUserFirstName" from="partyDetail.firstName"/><set field="assignedUserLastName" from="partyDetail.lastName"/><script><![CDATA[task.put("assignedUserFirstName",assignedUserFirstName)
                                task.put("assignedUserLastName",assignedUserLastName)]]></script></if></if></iterate></if></actions></service>