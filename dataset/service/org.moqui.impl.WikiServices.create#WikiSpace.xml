<!--Service Location org.moqui.impl.WikiServices.create#WikiSpace--><service verb="create" noun="WikiSpace"><in-parameters><parameter name="description" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.resource.wiki.WikiSpace" field-name="description"/><parameter name="rootPageLocation" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.resource.wiki.WikiSpace" field-name="rootPageLocation"/><parameter name="decoratorScreenLocation" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.resource.wiki.WikiSpace" field-name="decoratorScreenLocation"/><parameter name="publicPageUrl" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.resource.wiki.WikiSpace" field-name="publicPageUrl"/><parameter name="publicAttachmentUrl" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.resource.wiki.WikiSpace" field-name="publicAttachmentUrl"/><parameter name="publicBlogUrl" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.resource.wiki.WikiSpace" field-name="publicBlogUrl"/><parameter name="restrictView" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.resource.wiki.WikiSpace" field-name="restrictView"/><parameter name="restrictUpdate" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.resource.wiki.WikiSpace" field-name="restrictUpdate"/><parameter name="allowAnyHtml" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.resource.wiki.WikiSpace" field-name="allowAnyHtml"/><parameter name="screenThemeId" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.resource.wiki.WikiSpace" field-name="screenThemeId"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="moqui.resource.wiki.WikiSpace" field-name="lastUpdatedStamp"/><parameter name="wikiSpaceId" required="true" entity-name="moqui.resource.wiki.WikiSpace" field-name="wikiSpaceId"><matches regexp="[A-Za-z]\w*" message="ID must start with a letter and contain only letters, digits, or underscore"/><text-length min="3" max="8"/></parameter><parameter name="rootPageDirectory" default-value="dbresource://WikiSpace"/><parameter name="wikiType" default-value="md"/></in-parameters><out-parameters><parameter name="wikiSpaceId" required="true" entity-name="moqui.resource.wiki.WikiSpace" field-name="wikiSpaceId"/></out-parameters><actions><if condition="!rootPageLocation"><set field="rootPageLocation" value="${rootPageDirectory}/${wikiSpaceId}.${wikiType}"/></if><service-call name="create#moqui.resource.wiki.WikiSpace" in-map="context" out-map="[wikiSpaceId:context.wikiSpaceId,description:context.description,rootPageLocation:context.rootPageLocation,decoratorScreenLocation:context.decoratorScreenLocation,publicPageUrl:context.publicPageUrl,publicAttachmentUrl:context.publicAttachmentUrl,publicBlogUrl:context.publicBlogUrl,restrictView:context.restrictView,restrictUpdate:context.restrictUpdate,allowAnyHtml:context.allowAnyHtml,screenThemeId:context.screenThemeId,lastUpdatedStamp:context.lastUpdatedStamp]"/><set field="rootPageReference" from="ec.resource.getLocationReference(rootPageLocation)"/><if condition="!rootPageReference.exists"><script><![CDATA[rootPageReference.putText("\nAutomatic root page for space ${description?:wikiSpaceId}\n\n")]]></script></if></actions></service>