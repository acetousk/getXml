<!--Service Location mantle.account.PaymentMethodServices.get#PartyPaymentMethodInfo--><service verb="get" noun="PartyPaymentMethodInfo"><in-parameters><parameter name="partyId" required="true"/><parameter name="paymentMethodId"/><parameter name="paymentMethodTypeEnumId" default-value="PmtCreditCard"/></in-parameters><out-parameters><parameter name="paymentMethodId"/><parameter name="paymentMethodTypeEnumId"/><parameter name="paymentMethod" type="Map"/><parameter name="bankAccount" type="Map"/><parameter name="bankAccountTypeEnum" type="Map"/><parameter name="isBankAccount" type="Boolean"/><parameter name="creditCard" type="Map"/><parameter name="creditCardTypeEnum" type="Map"/><parameter name="expireMonth"/><parameter name="expireYear"/><parameter name="maskedCardNumber"/><parameter name="isCreditCard" type="Boolean"/><parameter name="postalContactMechId"/><parameter name="postalAddress" type="Map"/><parameter name="postalAddressStateGeo" type="Map"/><parameter name="telecomContactMechId"/><parameter name="telecomNumber" type="Map"/><parameter name="emailContactMechId"/><parameter name="emailAddress"/></out-parameters><actions><if condition="paymentMethodId"><entity-find-one entity-name="mantle.account.method.PaymentMethod" value-field="paymentMethod"/></if><if condition="paymentMethod"><set field="paymentMethodTypeEnumId" from="paymentMethod.paymentMethodTypeEnumId"/></if><set field="isBankAccount" from="paymentMethodTypeEnumId == 'PmtBankAccount'"/><set field="isCreditCard" from="paymentMethodTypeEnumId == 'PmtCreditCard'"/><if condition="paymentMethod"><set field="bankAccount" from="paymentMethod.'mantle.account.method.BankAccount'"/><set field="bankAccountTypeEnum" from="bankAccount?.'BankAccountType#moqui.basic.Enumeration'"/><set field="creditCard" from="paymentMethod.'mantle.account.method.CreditCard'"/><set field="creditCardTypeEnum" from="creditCard?.'CreditCardType#moqui.basic.Enumeration'"/><set field="expireMonth" from="creditCard?.expireDate ? creditCard.expireDate.substring(0, creditCard.expireDate.indexOf('/')) : null"/><set field="expireYear" from="creditCard?.expireDate ? creditCard.expireDate.substring(creditCard.expireDate.indexOf('/')+1) : null"/><set field="cardNumber" from="creditCard?.cardNumber"/><set field="maskedCardNumber" from="cardNumber ? '*'.padRight(cardNumber.length() - 4, '*') + cardNumber.substring(cardNumber.length() - 4, cardNumber.length()) : ''"/><set field="postalAddress" from="paymentMethod.'mantle.party.contact.PostalAddress'"/><set field="postalAddressStateGeo" from="postalAddress?.'StateProvince#moqui.basic.Geo'"/><set field="postalContactMechId" from="paymentMethod.postalContactMechId"/><set field="telecomNumber" from="paymentMethod.'mantle.party.contact.TelecomNumber'"/><set field="telecomContactMechId" from="paymentMethod.telecomContactMechId"/><set field="emailContactMech" from="paymentMethod.'Email#mantle.party.contact.ContactMech'"/><set field="emailContactMechId" from="paymentMethod.emailContactMechId"/><set field="emailAddress" from="emailContactMech?.infoString"/></if></actions></service>