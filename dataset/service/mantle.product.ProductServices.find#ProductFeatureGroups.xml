<!--Service Location mantle.product.ProductServices.find#ProductFeatureGroups--><service verb="find" noun="ProductFeatureGroups"><in-parameters><parameter name="productId" required="true"/><parameter name="applTypeEnumId" default-value="PfatSelectable"/></in-parameters><out-parameters><parameter name="productFeatureGroupList" type="List"><parameter name="productFeatureGroup" type="Map"/></parameter></out-parameters><actions><set field="productFeatureGroupList" from="[]"/><entity-find entity-name="mantle.product.category.ProductCategoryMember" list="pcmList"><date-filter/><econdition field-name="productId"/></entity-find><iterate list="pcmList" entry="pcm"><entity-find entity-name="mantle.product.feature.ProductCategoryFeatGrpAppl" list="pcfgaList"><date-filter/><econdition field-name="productCategoryId" from="pcm.productCategoryId"/><econdition field-name="productFeatureGroupId" operator="in" from="productFeatureGroupIdSet" ignore-if-empty="true"/><econdition field-name="applTypeEnumId" from="applTypeEnumId" ignore-if-empty="true"/></entity-find><iterate list="pcfgaList" entry="pcfga"><entity-find-one entity-name="mantle.product.feature.ProductFeatureGroup" value-field="pfg" cache="true"><field-map field-name="productFeatureGroupId" from="pcfga.productFeatureGroupId"/></entity-find-one><script><![CDATA[productFeatureGroupList.add(pfg)]]></script></iterate></iterate></actions></service>