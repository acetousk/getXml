<!--Service Location mantle.party.PartyServices.create#PersonCustomer--><service verb="create" noun="PersonCustomer"><in-parameters><parameter name="partyId"/><parameter name="accountPartyId"/><parameter name="salutation" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="salutation"/><parameter name="firstName" type="java.lang.String" required="true" allow-html="none" entity-name="mantle.party.Person" field-name="firstName"/><parameter name="middleName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="middleName"/><parameter name="lastName" type="java.lang.String" required="true" allow-html="none" entity-name="mantle.party.Person" field-name="lastName"/><parameter name="personalTitle" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="personalTitle"/><parameter name="suffix" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="suffix"/><parameter name="nickname" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="nickname"/><parameter name="gender" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="gender"/><parameter name="birthDate" type="java.sql.Date" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="birthDate"/><parameter name="deceasedDate" type="java.sql.Date" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="deceasedDate"/><parameter name="height" type="java.lang.Double" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="height"/><parameter name="weight" type="java.lang.Double" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="weight"/><parameter name="mothersMaidenName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="mothersMaidenName"/><parameter name="maritalStatusEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="maritalStatusEnumId"/><parameter name="employmentStatusEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="employmentStatusEnumId"/><parameter name="residenceStatusEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="residenceStatusEnumId"/><parameter name="occupation" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Person" field-name="occupation"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.account.method.CreditCard" field-name="lastUpdatedStamp"/><parameter name="roleTypeId" default-value="Customer"/><parameter name="partyClassificationId"/><parameter name="postalContactMechPurposeId" default-value="PostalPrimary"/><parameter name="toName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="toName"/><parameter name="attnName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="attnName"/><parameter name="address1" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="address1"/><parameter name="address2" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="address2"/><parameter name="unitNumber" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="unitNumber"/><parameter name="directions" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="directions"/><parameter name="city" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="city"/><parameter name="cityGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="cityGeoId"/><parameter name="schoolDistrictGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="schoolDistrictGeoId"/><parameter name="countyGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="countyGeoId"/><parameter name="stateProvinceGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="stateProvinceGeoId"/><parameter name="countryGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="countryGeoId"/><parameter name="postalCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="postalCode"/><parameter name="postalCodeExt" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="postalCodeExt"/><parameter name="postalCodeGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="postalCodeGeoId"/><parameter name="geoPointId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="geoPointId"/><parameter name="commercial" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="commercial"/><parameter name="accessCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="accessCode"/><parameter name="telecomContactMechId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="telecomContactMechId"/><parameter name="emailContactMechId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="emailContactMechId"/><parameter name="shipGatewayAddressId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="shipGatewayAddressId"/><parameter name="telecomContactMechPurposeId" default-value="PhonePrimary"/><parameter name="countryCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="countryCode"><text-digits/></parameter><parameter name="areaCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="areaCode"><text-digits/></parameter><parameter name="contactNumber" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="contactNumber"><matches regexp="^\d\d[-\. \d]*\d\d$" message="Please enter a valid phone number"/></parameter><parameter name="askForName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="askForName"/><parameter name="telecomExtension"><text-digits/></parameter><parameter name="telecomAllowSolicitation"/><parameter name="emailContactMechPurposeId" default-value="EmailPrimary"/><parameter name="emailAddress"><text-email/></parameter><parameter name="paymentMethodTypeEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="paymentMethodTypeEnumId"/><parameter name="purposeEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="purposeEnumId"/><parameter name="ownerPartyId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="ownerPartyId"/><parameter name="description" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="description"/><parameter name="fromDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="fromDate"/><parameter name="thruDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="thruDate"/><parameter name="thruDateSetAuto" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="thruDateSetAuto"/><parameter name="openedDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="openedDate"/><parameter name="titleOnAccount" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="titleOnAccount"/><parameter name="firstNameOnAccount" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="firstNameOnAccount"/><parameter name="middleNameOnAccount" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="middleNameOnAccount"/><parameter name="lastNameOnAccount" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="lastNameOnAccount"/><parameter name="suffixOnAccount" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="suffixOnAccount"/><parameter name="companyNameOnAccount" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="companyNameOnAccount"/><parameter name="ledgerBalance" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="ledgerBalance"/><parameter name="availableBalance" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="availableBalance"/><parameter name="balanceDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="balanceDate"/><parameter name="loanPaymentAmount" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="loanPaymentAmount"/><parameter name="loanPaymentPeriodUomId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="loanPaymentPeriodUomId"/><parameter name="currencyUomId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="currencyUomId"/><parameter name="postalContactMechId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="postalContactMechId"/><parameter name="gatewayCimId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="gatewayCimId"/><parameter name="paymentGatewayConfigId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="paymentGatewayConfigId"/><parameter name="imageUrl" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="imageUrl"/><parameter name="trustLevelEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="trustLevelEnumId"/><parameter name="paymentFraudEvidenceId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="paymentFraudEvidenceId"/><parameter name="glAccountId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="glAccountId"/><parameter name="finAccountId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="finAccountId"/><parameter name="originalPaymentMethodId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.PaymentMethod" field-name="originalPaymentMethodId"/><parameter name="creditCardTypeEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.CreditCard" field-name="creditCardTypeEnumId"/><parameter name="cardNumber" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.CreditCard" field-name="cardNumber"><credit-card/></parameter><parameter name="cardNumberLookupHash" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.CreditCard" field-name="cardNumberLookupHash"/><parameter name="validFromDate" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.CreditCard" field-name="validFromDate"/><parameter name="expireDate" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.CreditCard" field-name="expireDate" default-value="${expireMonth?:''}/${expireYear?:''}"><time-range after="now" format="MM/yyyy"/></parameter><parameter name="issueNumber" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.CreditCard" field-name="issueNumber"/><parameter name="cardSecurityCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.method.CreditCard" field-name="cardSecurityCode"/><parameter name="consecutiveFailedAuths" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.account.method.CreditCard" field-name="consecutiveFailedAuths"/><parameter name="lastFailedAuthDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.account.method.CreditCard" field-name="lastFailedAuthDate"/><parameter name="consecutiveFailedNsf" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.account.method.CreditCard" field-name="consecutiveFailedNsf"/><parameter name="lastFailedNsfDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.account.method.CreditCard" field-name="lastFailedNsfDate"/><parameter name="validateSecurityCode"/><parameter name="createUserAccount" type="Boolean"><description><![CDATA[If true create UserAccount, if false do not,
                if not specified (null) create UserAccount if emailAddress and newPassword are specified]]></description></parameter><parameter name="username" default="emailAddress"/><parameter name="newPassword"><description><![CDATA[If empty won't set a password, user will have to change or reset.]]></description></parameter><parameter name="newPasswordVerify"/><parameter name="disabled" default-value="N"/><parameter name="requirePasswordChange" default-value="N"/><parameter name="locale"/><parameter name="timeZone"/><parameter name="userGroupId"/><parameter name="groupTypeEnumIdList" type="List"><description><![CDATA[User group types allowed, set server-side to make sure userGroupId is of a type allowed]]></description><parameter name="groupTypeEnumId"/></parameter></in-parameters><out-parameters><parameter name="partyId"/><parameter name="postalContactMechId"/><parameter name="telecomContactMechId"/><parameter name="emailContactMechId"/><parameter name="paymentMethodId"/><parameter name="userId"/></out-parameters><actions><service-call name="mantle.party.PartyServices.create#Person" in-map="context" out-map="[partyId:context.partyId]"/><service-call name="mantle.party.ContactServices.store#PartyContactInfo" in-map="context" out-map="[postalContactMechId:context.postalContactMechId,telecomContactMechId:context.telecomContactMechId,emailContactMechId:context.emailContactMechId,webContactMechId:context.webContactMechId,otherContactMechId:context.otherContactMechId]"/><if condition="cardNumber"><set field="ownerPartyId" from="partyId"/><set field="firstNameOnAccount" from="firstNameOnAccount ?: firstName"/><set field="lastNameOnAccount" from="lastNameOnAccount ?: lastName"/><service-call name="mantle.account.PaymentMethodServices.create#CreditCard" in-map="context" out-map="[paymentMethodId:context.paymentMethodId]"/></if><if condition="accountPartyId"><service-call name="create#mantle.party.PartyRole" in-map="[partyId:partyId, roleTypeId:'Contact']"/><service-call name="create#mantle.party.PartyRelationship" in-map="[fromDate:ec.user.nowTimestamp,                         relationshipTypeEnumId:'PrtContact', fromPartyId:partyId, toPartyId:accountPartyId,                         fromRoleTypeId:'Contact', toRoleTypeId:'Account']"/></if><if condition="createUserAccount || (createUserAccount == null && emailAddress && newPassword)"><service-call name="mantle.party.PartyServices.create#PartyUserAccount" in-map="context" out-map="[userId:context.userId]"/></if></actions></service>