<!--Service Location mantle.party.ContactServices.findOrCreate#PartyTelecomNumber--><service verb="findOrCreate" noun="PartyTelecomNumber"><in-parameters><parameter name="partyId" required="true"/><parameter name="countryCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="countryCode"/><parameter name="areaCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="areaCode"/><parameter name="contactNumber" type="java.lang.String" required="true" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="contactNumber"/><parameter name="askForName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="askForName"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="lastUpdatedStamp"/><parameter name="contactMechPurposeId"/></in-parameters><out-parameters><parameter name="contactMechId"/></out-parameters><actions><entity-find entity-name="mantle.party.contact.PartyContactMechTelecomNumber" list="existingList"><date-filter/><econdition field-name="partyId"/><econdition field-name="countryCode" ignore-if-empty="true"/><econdition field-name="areaCode" ignore-if-empty="true"/><econdition field-name="contactNumber"/></entity-find><if condition="existingList"><then><set field="contactMechId" from="existingList.get(0).contactMechId"/><if condition="contactMechPurposeId && !existingList*.contactMechPurposeId.contains(contactMechPurposeId)"><service-call name="create#mantle.party.contact.PartyContactMech" in-map="[partyId:partyId, contactMechId:contactMechId, fromDate:ec.user.nowTimestamp,                                 contactMechPurposeId:contactMechPurposeId]"/></if></then><else><if condition="!contactMechPurposeId"><set field="contactMechPurposeId" value="PhonePrimary"/></if><service-call name="mantle.party.ContactServices.create#TelecomNumber" out-map="[contactMechId:paOut.contactMechId,trustLevelEnumId:paOut.trustLevelEnumId]" in-map="context"/><set field="contactMechId" from="paOut.contactMechId"/></else></if></actions></service>