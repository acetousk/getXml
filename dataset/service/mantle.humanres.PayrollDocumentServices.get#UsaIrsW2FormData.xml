<!--Service Location mantle.humanres.PayrollDocumentServices.get#UsaIrsW2FormData--><service verb="get" noun="UsaIrsW2FormData"><in-parameters><parameter name="timePeriodId" required="true"><description><![CDATA[Should be a period for a Tax Year/Quarter/etc]]></description></parameter><parameter name="partyRelationshipId" required="true"/><parameter name="federalTaxAuthorityId" default-value="UsaIrs"/><parameter name="formId" default-value="UsaIrsW2"/></in-parameters><out-parameters><parameter name="timePeriod" type="Map"/><parameter name="employment" type="Map"/><parameter name="employeeFirstName"/><parameter name="employeeMiddleName"/><parameter name="employeeLastName"/><parameter name="employeeSuffix"/><parameter name="employeeSsn"/><parameter name="employeeHomeContactInfo" type="Map"/><parameter name="employeeHomeStreetString"/><parameter name="employeeHomeCszString"/><parameter name="employeeHomeString"/><parameter name="employerName"/><parameter name="employerEin"/><parameter name="employerContactInfo" type="Map"/><parameter name="employerAddressString"/><parameter name="employerPhoneString"/><parameter name="taxablePayAmount" type="BigDecimal"/><parameter name="socialTaxablePayAmount" type="BigDecimal"/><parameter name="medicalTaxablePayAmount" type="BigDecimal"/><parameter name="currencyUomId"/><parameter name="hasAnyPay" type="Boolean"/><parameter name="wageAndTaxInfoByTaxAuthorityId" type="Map"><description><![CDATA[contains Map with: taxAuthority,
                taxAuthorityGeo, incomeTaxWithheldAmount, socialTaxWithheldAmount, medicalTaxWithheldAmount]]></description></parameter><parameter name="federalTaxAuthorityIdList" type="List"/><parameter name="stateTaxAuthorityIdList" type="List"/><parameter name="localTaxAuthorityIdList" type="List"/><parameter name="federalTaxAuthorityId"/><parameter name="formId"/><parameter name="formMap" type="Map"><parameter name="w2_a"/><parameter name="w2_b"/><parameter name="w2_c"/><parameter name="w2_e1"/><parameter name="w2_e2"/><parameter name="w2_e3"/><parameter name="w2_f"/><parameter name="w2_01"/><parameter name="w2_02"/><parameter name="w2_03"/><parameter name="w2_04"/><parameter name="w2_05"/><parameter name="w2_06"/><parameter name="w2_15as"/><parameter name="w2_15ae"/><parameter name="w2_16a"/><parameter name="w2_17a"/><parameter name="w2_18a"/><parameter name="w2_19a"/><parameter name="w2_20a"/></parameter></out-parameters><actions><service-call name="mantle.humanres.PayrollDocumentServices.get#EmploymentWageAndTaxInfo" in-map="context" out-map="[timePeriod:context.timePeriod,employment:context.employment,employeeFirstName:context.employeeFirstName,employeeMiddleName:context.employeeMiddleName,employeeLastName:context.employeeLastName,employeeSuffix:context.employeeSuffix,employeeSsn:context.employeeSsn,employeeHomeContactInfo:context.employeeHomeContactInfo,employeeHomeStreetString:context.employeeHomeStreetString,employeeHomeCszString:context.employeeHomeCszString,employeeHomeString:context.employeeHomeString,employerName:context.employerName,employerEin:context.employerEin,employerContactInfo:context.employerContactInfo,employerAddressString:context.employerAddressString,employerPhoneString:context.employerPhoneString,taxablePayAmount:context.taxablePayAmount,socialTaxablePayAmount:context.socialTaxablePayAmount,medicalTaxablePayAmount:context.medicalTaxablePayAmount,currencyUomId:context.currencyUomId,hasAnyPay:context.hasAnyPay,wageAndTaxInfoByTaxAuthorityId:context.wageAndTaxInfoByTaxAuthorityId,federalTaxAuthorityIdList:context.federalTaxAuthorityIdList,stateTaxAuthorityIdList:context.stateTaxAuthorityIdList,localTaxAuthorityIdList:context.localTaxAuthorityIdList]"/><set field="formMap" from="[:]"/><set field="formMap.w2_a" from="employeeSsn"/><set field="formMap.w2_b" from="employerEin"/><set field="formMap.w2_c" value="${employerName}\n${employerAddressString}"/><set field="formMap.w2_e1" from="employeeFirstName + (employeeMiddleName ? ' ' + employeeMiddleName : '')"/><set field="formMap.w2_e2" from="employeeLastName"/><set field="formMap.w2_e3" from="employeeSuffix"/><set field="formMap.w2_f" from="employeeHomeString"/><set field="formMap.w2_01" from="ec.l10n.format(taxablePayAmount, '#,##0.00')"/><if condition="socialTaxablePayAmount"><set field="formMap.w2_03" from="ec.l10n.format(socialTaxablePayAmount, '#,##0.00')"/></if><if condition="medicalTaxablePayAmount"><set field="formMap.w2_05" from="ec.l10n.format(medicalTaxablePayAmount, '#,##0.00')"/></if><set field="federalWageAndTaxInfo" from="wageAndTaxInfoByTaxAuthorityId.get(federalTaxAuthorityId)"/><set field="formMap.w2_02" from="ec.l10n.format(federalWageAndTaxInfo?.incomeTaxWithheldAmount, '#,##0.00')"/><set field="formMap.w2_04" from="ec.l10n.format(federalWageAndTaxInfo?.socialTaxWithheldAmount, '#,##0.00')"/><set field="formMap.w2_06" from="ec.l10n.format(federalWageAndTaxInfo?.medicalTaxWithheldAmount, '#,##0.00')"/><set field="stateTaxAuthorityId" from="stateTaxAuthorityIdList ? stateTaxAuthorityIdList[0] : 0"/><set field="stateWageAndTaxInfo" from="wageAndTaxInfoByTaxAuthorityId.get(stateTaxAuthorityId)"/><if condition="stateWageAndTaxInfo"><set field="formMap.w2_15as" from="stateWageAndTaxInfo.taxAuthorityGeo?.geoCodeAlpha2"/><set field="formMap.w2_15ae" from="employerEin"/><set field="formMap.w2_16a" from="ec.l10n.format(taxablePayAmount, '#,##0.00')"/><set field="formMap.w2_17a" from="ec.l10n.format(stateWageAndTaxInfo.incomeTaxWithheldAmount, '#,##0.00')"/></if><set field="localTaxAuthorityId" from="localTaxAuthorityIdList ? localTaxAuthorityIdList[0] : 0"/><set field="localWageAndTaxInfo" from="wageAndTaxInfoByTaxAuthorityId.get(localTaxAuthorityId)"/><if condition="localWageAndTaxInfo"><set field="formMap.w2_18a" from="ec.l10n.format(taxablePayAmount, '#,##0.00')"/><set field="formMap.w2_19a" from="ec.l10n.format(localWageAndTaxInfo.incomeTaxWithheldAmount, '#,##0.00')"/><set field="formMap.w2_20a" from="localWageAndTaxInfo.taxAuthorityGeo.geoName"/></if></actions></service>