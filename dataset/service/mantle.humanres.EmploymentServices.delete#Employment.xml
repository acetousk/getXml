<!--Service Location mantle.humanres.EmploymentServices.delete#Employment--><service verb="delete" noun="Employment"><in-parameters><parameter name="partyRelationshipId" required="true" entity-name="mantle.humanres.employment.Employment" field-name="partyRelationshipId"/><parameter name="fromRoleTypeId" default-value="Employee"/><parameter name="relationshipTypeEnumId" default-value="PrtEmployee"/><parameter name="toRoleTypeId" default-value="OrgEmployer"/></in-parameters><out-parameters/><actions><entity-find-one entity-name="mantle.party.PartyRelationship" value-field="ptyRel"/><entity-find-one entity-name="mantle.humanres.employment.Employment" value-field="employment"/><if condition="ptyRel && employment && (ptyRel.fromRoleTypeId == fromRoleTypeId) &&                     (ptyRel.relationshipTypeEnumId == relationshipTypeEnumId) &&                     (ptyRel.toRoleTypeId == toRoleTypeId)"><then><set field="relatedEmpls" from="employment.findRelatedFk(new HashSet(['mantle.party.PartyRelationship']))"/><set field="relatedPtyRels" from="ptyRel.findRelatedFk(new HashSet(['mantle.humanres.employment.Employment']))"/><iterate list="(relatedEmpls + relatedPtyRels)" entry="relatedValue"><message error="true"><![CDATA[Found ${relatedValue.getEntityNamePretty()}. Cannot delete employment.]]></message></iterate><check-errors/><service-call name="delete#mantle.humanres.employment.Employment" in-map="context"/><service-call name="delete#mantle.party.PartyRelationship" in-map="context"/></then><else><return error="true" message="Cannot find employment relationship"/></else></if></actions></service>