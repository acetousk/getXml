<!--Service Location mantle.work.TaskServices.set#TaskMilestone--><service verb="set" noun="TaskMilestone"><in-parameters><parameter name="workEffortId" required="true"/><parameter name="milestoneWorkEffortId" required="true"/></in-parameters><out-parameters/><actions><entity-find entity-name="mantle.work.effort.WorkEffortAssoc" list="weaList"><date-filter/><econdition field-name="toWorkEffortId" from="workEffortId"/><econdition field-name="workEffortAssocTypeEnumId" value="WeatMilestone"/></entity-find><set field="foundMilestone" from="false"/><iterate list="weaList" entry="wea"><if condition="wea.workEffortId == milestoneWorkEffortId"><set field="foundMilestone" from="true"/><else><set field="wea.thruDate" from="ec.user.nowTimestamp"/><entity-update value-field="wea"/></else></if></iterate><if condition="!foundMilestone"><service-call name="create#mantle.work.effort.WorkEffortAssoc" in-map="[workEffortId:milestoneWorkEffortId, toWorkEffortId:workEffortId,                         workEffortAssocTypeEnumId:'WeatMilestone', fromDate:ec.user.nowTimestamp]"/></if></actions></service>