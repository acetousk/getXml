<!--Service Location mantle.order.OrderServices.checkComplete#OrderPart--><service verb="checkComplete" noun="OrderPart"><in-parameters><parameter name="orderId" required="true" entity-name="mantle.order.OrderPart" field-name="orderId"/><parameter name="orderPartSeqId" required="true" entity-name="mantle.order.OrderPart" field-name="orderPartSeqId"/></in-parameters><out-parameters><parameter name="oldStatusId"/><parameter name="statusChanged" type="Boolean"/></out-parameters><actions><entity-find-one entity-name="mantle.order.OrderPart" value-field="orderPart"/><if condition="orderPart == null"><return error="true" message="Order Part ${orderId}:${orderPartSeqId} not found"/></if><if condition="!(orderPart?.statusId in ['OrderApproved', 'OrderSent'])"><return/></if><service-call name="mantle.order.OrderServices.isFulfilled#OrderPart" out-map="[isFulfilled:isFulfilledOut.isFulfilled]" in-map="[orderId:orderId, orderPartSeqId:orderPartSeqId]"/><if condition="isFulfilledOut.isFulfilled"><service-call name="mantle.order.OrderServices.complete#OrderPart" out-map="[oldStatusId:context.oldStatusId,statusChanged:context.statusChanged]" in-map="context"/></if></actions></service>