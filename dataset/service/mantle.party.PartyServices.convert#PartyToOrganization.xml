<!--Service Location mantle.party.PartyServices.convert#PartyToOrganization--><service verb="convert" noun="PartyToOrganization"><in-parameters><parameter name="partyId" required="true"/><parameter name="organizationName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Organization" field-name="organizationName"/><parameter name="officeSiteName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.Organization" field-name="officeSiteName"/><parameter name="annualRevenue" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.party.Organization" field-name="annualRevenue"/><parameter name="numEmployees" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.party.Organization" field-name="numEmployees"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.party.Organization" field-name="lastUpdatedStamp"/></in-parameters><out-parameters/><actions><entity-find-one entity-name="mantle.party.Party" value-field="party" for-update="true"/><if condition="party.partyTypeEnumId == 'PtyOrganization'"><return message="Party ${party.pseudoId} is already an organization"/></if><entity-find-one entity-name="mantle.party.Person" value-field="person"/><if condition="person != null"><if condition="!organizationName"><set field="organizationName" value="${person.firstName?:''}${person.middleName ? ' ' + person.middleName : ''}${person.lastName ? ' ' + person.lastName : ''}"/></if><entity-delete value-field="person"/></if><set field="party.partyTypeEnumId" value="PtyOrganization"/><entity-update value-field="party"/><service-call name="store#mantle.party.Organization" in-map="context"/></actions></service>