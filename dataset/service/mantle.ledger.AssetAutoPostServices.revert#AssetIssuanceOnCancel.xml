<!--Service Location mantle.ledger.AssetAutoPostServices.revert#AssetIssuanceOnCancel--><service verb="revert" noun="AssetIssuanceOnCancel"><in-parameters><parameter name="assetIssuanceId" required="true"/></in-parameters><out-parameters><parameter name="acctgTransId"/></out-parameters><actions><entity-find entity-name="mantle.ledger.transaction.AcctgTrans" list="acctgTransList"><econdition field-name="assetIssuanceId"/><econdition field-name="reversedByAcctgTransId" from="null"/><econdition field-name="reverseOfAcctgTransId" from="null"/><econdition field-name="acctgTransTypeEnumId" operator="in" value="AttAssetIssuance,AttInventoryIssuance"/></entity-find><if condition="acctgTransList"><then><if condition="acctgTransList.size() == 1"><then><set field="curAcctgTransId" from="acctgTransList.first.acctgTransId"/><service-call name="mantle.ledger.LedgerServices.unpost#AcctgTrans" in-map="[acctgTransId:curAcctgTransId]"/><service-call name="mantle.ledger.LedgerServices.delete#AcctgTrans" in-map="[acctgTransId:curAcctgTransId]"/></then><else><return error="true" message="Found more than one accounting transaction for Asset Issuance ${assetIssuanceId}, may already be reversed, not posting reverse transaction."/></else></if></then><else><return message="No accounting transaction found for Asset Issuance ${assetIssuanceId}, not posting reverse transaction."/></else></if></actions></service>