<!--Service Location mantle.party.ContactServices.store#PartyContactInfo--><service verb="store" noun="PartyContactInfo"><in-parameters><parameter name="partyId" default="ec.user.userAccount.partyId"/><parameter name="orderId"><description><![CDATA[For address create or update if specified set OrderPart.postalContactMechId for Parts with no value, or on Part specified by orderPartSeqId]]></description></parameter><parameter name="orderPartSeqId"><description><![CDATA[For address create or update if specified along with orderId set OrderPart.postalContactMechId]]></description></parameter><parameter name="shipmentId"><description><![CDATA[For address create or update if specified set ShipmentRouteSegment origin and dest postal IDs that match previous contactMechId for update and for create based on aditional shipment* parameters]]></description></parameter><parameter name="shipmentRouteSegmentSeqId"><description><![CDATA[For address create if specified along with shipmentId set ShipmentRouteSegment origin or dest postal IDs]]></description></parameter><parameter name="shipmentSetOrigin" type="Boolean"><description><![CDATA[For address create if specified along with shipmentId set ShipmentRouteSegment.originPostalContactMechId]]></description></parameter><parameter name="shipmentSetDest" type="Boolean"><description><![CDATA[For address create if specified along with shipmentId set ShipmentRouteSegment.destPostalContactMechId]]></description></parameter><parameter name="replaceByPurpose" type="Boolean" default="false"/><parameter name="postalContactMechId"/><parameter name="postalContactMechPurposeId"/><parameter name="toName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="toName"/><parameter name="attnName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="attnName"/><parameter name="address1" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="address1"/><parameter name="address2" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="address2"/><parameter name="unitNumber" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="unitNumber"/><parameter name="directions" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="directions"/><parameter name="city" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="city"/><parameter name="cityGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="cityGeoId"/><parameter name="schoolDistrictGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="schoolDistrictGeoId"/><parameter name="countyGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="countyGeoId"/><parameter name="stateProvinceGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="stateProvinceGeoId"/><parameter name="countryGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="countryGeoId"/><parameter name="postalCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="postalCode"/><parameter name="postalCodeExt" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="postalCodeExt"/><parameter name="postalCodeGeoId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="postalCodeGeoId"/><parameter name="geoPointId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="geoPointId"/><parameter name="commercial" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="commercial"/><parameter name="accessCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="accessCode"/><parameter name="telecomContactMechId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="telecomContactMechId"/><parameter name="emailContactMechId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="emailContactMechId"/><parameter name="shipGatewayAddressId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.PostalAddress" field-name="shipGatewayAddressId"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="lastUpdatedStamp"/><parameter name="geoPointTypeEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.basic.GeoPoint" field-name="geoPointTypeEnumId"/><parameter name="description" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.basic.GeoPoint" field-name="description"/><parameter name="dataSourceId" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.basic.GeoPoint" field-name="dataSourceId"/><parameter name="latitude" type="java.lang.Double" required="false" allow-html="none" entity-name="moqui.basic.GeoPoint" field-name="latitude"/><parameter name="longitude" type="java.lang.Double" required="false" allow-html="none" entity-name="moqui.basic.GeoPoint" field-name="longitude"/><parameter name="elevation" type="java.lang.Double" required="false" allow-html="none" entity-name="moqui.basic.GeoPoint" field-name="elevation"/><parameter name="elevationUomId" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.basic.GeoPoint" field-name="elevationUomId"/><parameter name="information" type="java.lang.String" required="false" allow-html="none" entity-name="moqui.basic.GeoPoint" field-name="information"/><parameter name="telecomContactMechPurposeId"/><parameter name="countryCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="countryCode"><text-digits/></parameter><parameter name="areaCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="areaCode"><text-digits/></parameter><parameter name="contactNumber" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="contactNumber"><matches regexp="^\d\d[-\. \d]*\d\d$" message="Please enter a valid phone number"/></parameter><parameter name="askForName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.party.contact.TelecomNumber" field-name="askForName"/><parameter name="telecomExtension"><text-digits/></parameter><parameter name="telecomAllowSolicitation"/><parameter name="emailContactMechPurposeId"/><parameter name="emailAddress"><text-email/></parameter><parameter name="emailAllowSolicitation"/><parameter name="webContactMechId"/><parameter name="webContactMechPurposeId"/><parameter name="webAddress"><text-url/></parameter><parameter name="webAllowSolicitation"/><parameter name="otherContactMechId"/><parameter name="otherContactMechTypeEnumId"/><parameter name="otherContactMechPurposeId"/><parameter name="otherInfoString"/></in-parameters><out-parameters><parameter name="postalContactMechId"/><parameter name="telecomContactMechId"/><parameter name="emailContactMechId"/><parameter name="webContactMechId"/><parameter name="otherContactMechId"/></out-parameters><actions><if condition="replaceByPurpose && contactNumber && !telecomContactMechId && telecomContactMechPurposeId"><entity-find entity-name="mantle.party.contact.PartyContactMech" list="existingTelPcmList"><date-filter/><econdition field-name="partyId"/><econdition field-name="contactMechPurposeId" from="telecomContactMechPurposeId"/><order-by field-name="-fromDate"/></entity-find><if condition="existingTelPcmList"><set field="telecomContactMechId" from="existingTelPcmList[0].contactMechId"/></if></if><if condition="telecomContactMechId"><then><service-call name="mantle.party.ContactServices.update#PartyTelecomNumber" out-map="[contactMechId:tnOut.contactMechId,trustLevelEnumId:tnOut.trustLevelEnumId]" in-map="context + [contactMechId:telecomContactMechId, contactMechPurposeId:telecomContactMechPurposeId,                             extension:telecomExtension, allowSolicitation:telecomAllowSolicitation]"/></then><else-if condition="contactNumber"><service-call name="mantle.party.ContactServices.create#TelecomNumber" out-map="[contactMechId:tnOut.contactMechId,trustLevelEnumId:tnOut.trustLevelEnumId]" in-map="context + [contactMechPurposeId:telecomContactMechPurposeId,                             extension:telecomExtension, allowSolicitation:telecomAllowSolicitation]"/></else-if></if><set field="telecomContactMechId" from="tnOut?.contactMechId ?: telecomContactMechId"/><if condition="replaceByPurpose && emailAddress && !emailContactMechId && emailContactMechPurposeId"><entity-find entity-name="mantle.party.contact.PartyContactMech" list="existingEmailPcmList"><date-filter/><econdition field-name="partyId"/><econdition field-name="contactMechPurposeId" from="emailContactMechPurposeId"/><order-by field-name="-fromDate"/></entity-find><if condition="existingEmailPcmList"><set field="emailContactMechId" from="existingEmailPcmList[0].contactMechId"/></if></if><if condition="emailContactMechId && emailAddress"><then><service-call name="mantle.party.ContactServices.update#PartyContactOther" out-map="[contactMechId:emOut.contactMechId]" in-map="[infoString:emailAddress, partyId:partyId, contactMechId:emailContactMechId,                             contactMechPurposeId:emailContactMechPurposeId, allowSolicitation:emailAllowSolicitation]"/></then><else-if condition="emailAddress"><service-call name="mantle.party.ContactServices.create#EmailAddress" out-map="[contactMechId:emOut.contactMechId]" in-map="context + [contactMechPurposeId:emailContactMechPurposeId, allowSolicitation:emailAllowSolicitation]"/></else-if></if><set field="emailContactMechId" from="emOut?.contactMechId ?: emailContactMechId"/><if condition="replaceByPurpose && webAddress && !webContactMechId && webContactMechPurposeId"><entity-find entity-name="mantle.party.contact.PartyContactMech" list="existingWebPcmList"><date-filter/><econdition field-name="partyId"/><econdition field-name="contactMechPurposeId" from="webContactMechPurposeId"/><order-by field-name="-fromDate"/></entity-find><if condition="existingWebPcmList"><set field="webContactMechId" from="existingWebPcmList[0].contactMechId"/></if></if><if condition="webContactMechId && webAddress"><then><service-call name="mantle.party.ContactServices.update#PartyContactOther" out-map="[contactMechId:webOut.contactMechId]" in-map="[infoString:webAddress, partyId:partyId, contactMechId:webContactMechId,                             contactMechPurposeId:webContactMechPurposeId, allowSolicitation:webAllowSolicitation]"/></then><else-if condition="webAddress"><service-call name="mantle.party.ContactServices.create#WebAddress" out-map="[contactMechId:webOut.contactMechId]" in-map="context + [contactMechPurposeId:webContactMechPurposeId, allowSolicitation:webAllowSolicitation]"/></else-if></if><set field="webContactMechId" from="webOut?.contactMechId ?: webContactMechId"/><if condition="otherInfoString && !otherContactMechId && replaceByPurpose"><entity-find entity-name="mantle.party.contact.PartyContactMech" list="existingOtherPcmList"><date-filter/><econdition field-name="partyId"/><econdition field-name="contactMechPurposeId" from="otherContactMechPurposeId"/><order-by field-name="-fromDate"/></entity-find><if condition="existingOtherPcmList"><set field="otherContactMechId" from="existingOtherPcmList[0].contactMechId"/></if></if><if condition="otherContactMechId && otherInfoString"><then><service-call name="mantle.party.ContactServices.update#PartyContactOther" out-map="[contactMechId:otherOut.contactMechId]" in-map="[infoString:otherInfoString, partyId:partyId, contactMechId:otherContactMechId,                             contactMechPurposeId:otherContactMechPurposeId]"/></then><else-if condition="otherInfoString"><service-call name="mantle.party.ContactServices.create#ContactMechOther" out-map="[contactMechId:otherOut.contactMechId]" in-map="context + [infoString:otherInfoString, contactMechTypeEnumId:otherContactMechTypeEnumId,                             contactMechPurposeId:otherContactMechPurposeId]"/></else-if></if><set field="otherContactMechId" from="otherOut?.contactMechId ?: otherContactMechId"/><if condition="replaceByPurpose && (address1 || city || postalCode) && !postalContactMechId && postalContactMechPurposeId"><entity-find entity-name="mantle.party.contact.PartyContactMech" list="existingPostalPcmList"><date-filter/><econdition field-name="partyId"/><econdition field-name="contactMechPurposeId" from="postalContactMechPurposeId"/><order-by field-name="-fromDate"/></entity-find><if condition="existingPostalPcmList"><set field="postalContactMechId" from="existingPostalPcmList[0].contactMechId"/></if></if><if condition="postalContactMechId"><then><service-call name="mantle.party.ContactServices.update#PartyPostalAddress" out-map="[contactMechId:paOut.contactMechId]" in-map="context + [contactMechId:postalContactMechId, contactMechPurposeId:postalContactMechPurposeId]"/></then><else-if condition="address1 || city || postalCode"><service-call name="mantle.party.ContactServices.create#PostalAddress" out-map="[contactMechId:paOut.contactMechId]" in-map="context + [contactMechPurposeId:postalContactMechPurposeId]"/></else-if></if><set field="postalContactMechId" from="paOut?.contactMechId ?: postalContactMechId"/></actions></service>