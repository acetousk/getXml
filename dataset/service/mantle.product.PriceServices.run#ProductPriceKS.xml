<!--Service Location mantle.product.PriceServices.run#ProductPriceKS--><service verb="run" noun="ProductPriceKS"><in-parameters><parameter name="productId" required="true" entity-name="mantle.product.ProductPrice" field-name="productId"/><parameter name="quantity" type="BigDecimal" required="true"/><parameter name="priceUomId" required="true" entity-name="mantle.product.ProductPrice" field-name="priceUomId"/><parameter name="pricePurposeEnumId" required="true" entity-name="mantle.product.ProductPrice" field-name="pricePurposeEnumId"/><parameter name="productStoreId" entity-name="mantle.product.ProductPrice" field-name="productStoreId"/><parameter name="vendorPartyId" entity-name="mantle.product.ProductPrice" field-name="vendorPartyId"/><parameter name="customerPartyId" entity-name="mantle.product.ProductPrice" field-name="customerPartyId"/><parameter name="price" type="BigDecimal" entity-name="mantle.product.ProductPrice" field-name="price"/><parameter name="productPriceId" entity-name="mantle.product.ProductPrice" field-name="productPriceId"/><parameter name="listPrice" type="BigDecimal"/><parameter name="listProductPriceId"/></in-parameters><out-parameters><parameter name="price" type="BigDecimal" entity-name="mantle.product.ProductPrice" field-name="price"/><parameter name="listPrice" type="BigDecimal"/></out-parameters><actions><if condition="ec.factory.getToolFactory('KIE')"><then><set field="priceKieSession" from="ec.getTool('KIE', null)?.getStatelessKieSession('ProductPriceKS')"/><if condition="priceKieSession != null"><then><script><![CDATA[priceKieSession.execute([])]]></script></then><else><log level="warn" message="KIE was found but ProductPriceKS KIE Session, not running price rules, using price lookup only"/></else></if></then><else><log level="debug" message="KIE not found, not running price rules, using price lookup only"/></else></if></actions></service>