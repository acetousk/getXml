<!--Service Location coarchy.CoarchyServices.update#User--><service verb="update" noun="User"><in-parameters><parameter name="partyId" required="true"/><parameter name="actorIdList" type="List"/><parameter name="organizationId" required="true"/></in-parameters><out-parameters><parameter name="partyId"/></out-parameters><actions><entity-find entity-name="coarchy.ActorParty" list="actorPartyList"><econdition field-name="partyId"/><econdition field-name="organizationId"/></entity-find><set field="actorIdServerList" from="actorPartyList*.actorId"/><if condition="actorIdServerList"><set field="actorIdDeleteList" from="actorIdServerList - actorIdList?:[]"/><iterate list="actorIdDeleteList" entry="actorIdDelete"><service-call name="delete#coarchy.ActorParty" in-map="[actorId:actorIdDelete,partyId:partyId]"/></iterate></if><set field="actorIdCreateList" from="actorIdList?:[] - actorIdDeleteList?:[]"/><if condition="actorIdCreateList instanceof String"><then><service-call name="store#coarchy.ActorParty" in-map="[actorId:actorIdCreateList, partyId:partyId, organizationId:organizationId]"/></then><else><iterate list="actorIdCreateList" entry="actorIdCreate"><service-call name="store#coarchy.ActorParty" in-map="[actorId:actorIdCreate, partyId:partyId, organizationId:organizationId]"/></iterate></else></if></actions></service>