<!--Service Location mantle.account.InvoiceServices.cancel#Invoice--><service verb="cancel" noun="Invoice"><in-parameters><parameter name="invoiceId" required="true" entity-name="mantle.account.invoice.Invoice" field-name="invoiceId"/></in-parameters><out-parameters/><actions><service-call name="mantle.account.InvoiceServices.unpay#Invoice" in-map="[invoiceId:invoiceId, statusId:'InvoiceCancelled']"/><entity-find entity-name="mantle.order.OrderItemBilling" list="oibList"><econdition field-name="invoiceId"/></entity-find><iterate list="oibList" entry="oib"><set field="oib.quantity" from="0.0"/><entity-update value-field="oib"/></iterate><entity-find entity-name="mantle.order.return.ReturnItemBilling" list="ribList"><econdition field-name="invoiceId"/></entity-find><iterate list="ribList" entry="rib"><set field="rib.quantity" from="0.0"/><entity-update value-field="rib"/></iterate><entity-find entity-name="mantle.work.effort.WorkEffortBilling" list="webList"><econdition field-name="invoiceId"/></entity-find><iterate list="webList" entry="web"><set field="web.percentage" from="0.0"/><entity-update value-field="web"/></iterate><entity-find entity-name="mantle.shipment.ShipmentItemSource" list="sisList"><econdition field-name="invoiceId"/></entity-find><iterate list="sisList" entry="sis"><set field="sis.invoiceId" from="null"/><set field="sis.invoiceItemSeqId" from="null"/><entity-update value-field="sis"/></iterate><entity-find entity-name="mantle.product.issuance.AssetIssuance" list="aisList"><econdition field-name="invoiceId"/></entity-find><iterate list="aisList" entry="ais"><set field="ais.invoiceId" from="null"/><set field="ais.invoiceItemSeqId" from="null"/><entity-update value-field="ais"/></iterate><entity-find entity-name="mantle.product.receipt.AssetReceipt" list="arcList"><econdition field-name="invoiceId"/></entity-find><iterate list="arcList" entry="arc"><set field="arc.invoiceId" from="null"/><set field="arc.invoiceItemSeqId" from="null"/><entity-update value-field="arc"/></iterate><entity-find entity-name="mantle.work.time.TimeEntry" list="timeEntryList"><econdition field-name="invoiceId"/></entity-find><iterate list="timeEntryList" entry="timeEntry"><set field="timeEntry.invoiceId" from="null"/><set field="timeEntry.invoiceItemSeqId" from="null"/><entity-update value-field="timeEntry"/></iterate><entity-find entity-name="mantle.work.time.TimeEntry" list="timeEntryList"><econdition field-name="vendorInvoiceId" from="invoiceId"/></entity-find><iterate list="timeEntryList" entry="timeEntry"><set field="timeEntry.vendorInvoiceId" from="null"/><set field="timeEntry.vendorInvoiceItemSeqId" from="null"/><entity-update value-field="timeEntry"/></iterate></actions></service>