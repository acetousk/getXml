<!--Service Location mantle.shipment.ShipmentServices.update#ShipmentPackageAndRouteSeg--><service verb="update" noun="ShipmentPackageAndRouteSeg"><in-parameters><parameter name="shipmentId" required="true"/><parameter name="shipmentPackageSeqId" required="true"/><parameter name="shipmentRouteSegmentSeqId"><description><![CDATA[Defaults for first route segment]]></description></parameter><parameter name="shipmentBoxTypeId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackage" field-name="shipmentBoxTypeId"/><parameter name="weight" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackage" field-name="weight"/><parameter name="weightUomId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackage" field-name="weightUomId"/><parameter name="gatewayPackageId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackage" field-name="gatewayPackageId"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="lastUpdatedStamp"/><parameter name="trackingCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="trackingCode"/><parameter name="trackingUrl" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="trackingUrl"/><parameter name="trackingStatusEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="trackingStatusEnumId"/><parameter name="trackingSubStatus" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="trackingSubStatus"/><parameter name="trackingStatusDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="trackingStatusDate"/><parameter name="trackingEta" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="trackingEta"/><parameter name="trackingOrigEta" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="trackingOrigEta"/><parameter name="boxNumber" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="boxNumber"/><parameter name="labelDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="labelDate"/><parameter name="labelUrl" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="labelUrl"/><parameter name="labelImage" type="java.sql.Blob" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="labelImage"/><parameter name="labelIntlSignImage" type="java.sql.Blob" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="labelIntlSignImage"/><parameter name="labelHtml" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="labelHtml"/><parameter name="labelPrinted" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="labelPrinted"/><parameter name="internationalInvoice" type="java.sql.Blob" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="internationalInvoice"/><parameter name="internationalInvoiceUrl" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="internationalInvoiceUrl"/><parameter name="gatewayStatus" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="gatewayStatus"/><parameter name="gatewayMessage" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="gatewayMessage"/><parameter name="gatewayLabelId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="gatewayLabelId"/><parameter name="gatewayRateId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="gatewayRateId"/><parameter name="gatewayRefundId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="gatewayRefundId"/><parameter name="gatewayRefundStatus" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="gatewayRefundStatus"/><parameter name="returnTrackingCode" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="returnTrackingCode"/><parameter name="returnTrackingUrl" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="returnTrackingUrl"/><parameter name="returnTrackingStatusEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="returnTrackingStatusEnumId"/><parameter name="returnTrackingSubStatus" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="returnTrackingSubStatus"/><parameter name="returnTrackingStatusDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="returnTrackingStatusDate"/><parameter name="returnLabelDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="returnLabelDate"/><parameter name="returnLabelUrl" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="returnLabelUrl"/><parameter name="returnLabelImage" type="java.sql.Blob" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="returnLabelImage"/><parameter name="returnIntlInvoiceUrl" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="returnIntlInvoiceUrl"/><parameter name="returnGatewayStatus" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="returnGatewayStatus"/><parameter name="returnGatewayMessage" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="returnGatewayMessage"/><parameter name="returnGatewayLabelId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="returnGatewayLabelId"/><parameter name="returnGatewayRateId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="returnGatewayRateId"/><parameter name="returnGatewayRefundStatus" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="returnGatewayRefundStatus"/><parameter name="returnEstimatedAmount" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="returnEstimatedAmount"/><parameter name="returnBaseAmount" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="returnBaseAmount"/><parameter name="returnActualAmount" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="returnActualAmount"/><parameter name="estimatedAmount" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="estimatedAmount"/><parameter name="baseAmount" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="baseAmount"/><parameter name="actualAmount" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="actualAmount"/><parameter name="packageTransportAmount" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="packageTransportAmount"/><parameter name="packageServiceAmount" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="packageServiceAmount"/><parameter name="packageOtherAmount" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="packageOtherAmount"/><parameter name="codAmount" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="codAmount"/><parameter name="insuranceAmount" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="insuranceAmount"/><parameter name="insuredAmount" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.shipment.ShipmentPackageRouteSeg" field-name="insuredAmount"/></in-parameters><out-parameters/><actions><if condition="!shipmentRouteSegmentSeqId"><entity-find entity-name="mantle.shipment.ShipmentRouteSegment" list="routeSegList"><econdition field-name="shipmentId"/><select-field field-name="shipmentRouteSegmentSeqId"/></entity-find><set field="shipmentRouteSegmentSeqId" from="routeSegList ? routeSegList[0].shipmentRouteSegmentSeqId : null"/></if><if condition="!shipmentRouteSegmentSeqId"><return error="true" message="No route segment found on Shipment ${shipmentId}"/></if><service-call name="update#mantle.shipment.ShipmentPackage" in-map="context" out-map="[shipmentId:context.shipmentId,shipmentPackageSeqId:context.shipmentPackageSeqId,shipmentBoxTypeId:context.shipmentBoxTypeId,weight:context.weight,weightUomId:context.weightUomId,gatewayPackageId:context.gatewayPackageId,lastUpdatedStamp:context.lastUpdatedStamp]"/><service-call name="update#mantle.shipment.ShipmentPackageRouteSeg" in-map="context" out-map="[shipmentId:context.shipmentId,shipmentPackageSeqId:context.shipmentPackageSeqId,shipmentRouteSegmentSeqId:context.shipmentRouteSegmentSeqId,trackingCode:context.trackingCode,trackingUrl:context.trackingUrl,trackingStatusEnumId:context.trackingStatusEnumId,trackingSubStatus:context.trackingSubStatus,trackingStatusDate:context.trackingStatusDate,trackingEta:context.trackingEta,trackingOrigEta:context.trackingOrigEta,boxNumber:context.boxNumber,labelDate:context.labelDate,labelUrl:context.labelUrl,labelImage:context.labelImage,labelIntlSignImage:context.labelIntlSignImage,labelHtml:context.labelHtml,labelPrinted:context.labelPrinted,internationalInvoice:context.internationalInvoice,internationalInvoiceUrl:context.internationalInvoiceUrl,gatewayStatus:context.gatewayStatus,gatewayMessage:context.gatewayMessage,gatewayLabelId:context.gatewayLabelId,gatewayRateId:context.gatewayRateId,gatewayRefundId:context.gatewayRefundId,gatewayRefundStatus:context.gatewayRefundStatus,returnTrackingCode:context.returnTrackingCode,returnTrackingUrl:context.returnTrackingUrl,returnTrackingStatusEnumId:context.returnTrackingStatusEnumId,returnTrackingSubStatus:context.returnTrackingSubStatus,returnTrackingStatusDate:context.returnTrackingStatusDate,returnLabelDate:context.returnLabelDate,returnLabelUrl:context.returnLabelUrl,returnLabelImage:context.returnLabelImage,returnIntlInvoiceUrl:context.returnIntlInvoiceUrl,returnGatewayStatus:context.returnGatewayStatus,returnGatewayMessage:context.returnGatewayMessage,returnGatewayLabelId:context.returnGatewayLabelId,returnGatewayRateId:context.returnGatewayRateId,returnGatewayRefundStatus:context.returnGatewayRefundStatus,returnEstimatedAmount:context.returnEstimatedAmount,returnBaseAmount:context.returnBaseAmount,returnActualAmount:context.returnActualAmount,estimatedAmount:context.estimatedAmount,baseAmount:context.baseAmount,actualAmount:context.actualAmount,packageTransportAmount:context.packageTransportAmount,packageServiceAmount:context.packageServiceAmount,packageOtherAmount:context.packageOtherAmount,codAmount:context.codAmount,insuranceAmount:context.insuranceAmount,insuredAmount:context.insuredAmount,lastUpdatedStamp:context.lastUpdatedStamp]"/></actions></service>