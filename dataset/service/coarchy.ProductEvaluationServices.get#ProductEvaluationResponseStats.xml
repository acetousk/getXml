<!--Service Location coarchy.ProductEvaluationServices.get#ProductEvaluationResponseStats--><service verb="get" noun="ProductEvaluationResponseStats"><in-parameters><parameter name="productEvaluationId" required="true"/></in-parameters><out-parameters><parameter name="internalResponseByActivity" type="Map"/><parameter name="vendorResponseByActivity" type="Map"/><parameter name="internalResponseByStatement" type="Map"/><parameter name="vendorResponseByStatement" type="Map"/></out-parameters><actions><entity-find-one entity-name="coarchy.product.ProductEvaluation" value-field="productEvaluation"/><set field="vendorResponseByActivity" from="[:]"/><set field="internalResponseByActivity" from="[:]"/><set field="vendorResponseByStatement" from="[:]"/><set field="internalResponseByStatement" from="[:]"/><service-call name="coarchy.ProductEvaluationServices.get#ProductEvaluationActivites" in-map="[productEvaluationId:productEvaluationId]" out-map="[processStoryIds:productEvalActivities.processStoryIds,activityIds:productEvalActivities.activityIds,activityList:productEvalActivities.activityList]"/><service-call name="coarchy.ProductEvaluationServices.get#ProductEvaluationStatements" in-map="[productEvaluationId:productEvaluationId]" out-map="[valueStatementIds:productEvalStatements.valueStatementIds,valueStatementList:productEvalStatements.valueStatementList,allValueStatementList:productEvalStatements.allValueStatementList,allValueStatementIds:productEvalStatements.allValueStatementIds]"/><entity-find entity-name="coarchy.product.ProductEvaluationParty" list="productEvalPartyList"><date-filter/><econdition field-name="productEvaluationId"/><econdition field-name="roleTypeId" value="VendorRepresentative"/><econdition field-name="statusId" operator="in" value="PepInvited,PepAccepted"/></entity-find><set field="vendorPartyIds" from="productEvalPartyList*.partyId"/><iterate list="productEvalActivities.activityIds" entry="activityId"><entity-find-count entity-name="coarchy.product.ProductEvaluationResponse" count-field="productEvalResponseCount"><econdition field-name="productEvaluationId"/><econdition field-name="activityId"/><econdition field-name="evaluationByEnumId" value="EbVendor"/></entity-find-count><script><![CDATA[addToBigDecimalInMap(activityId, productEvalResponseCount, vendorResponseByActivity)]]></script><entity-find-count entity-name="coarchy.product.ProductEvaluationResponse" count-field="productEvalResponseCount"><econdition field-name="productEvaluationId"/><econdition field-name="activityId"/><econdition field-name="evaluationByEnumId" value="EbInternal"/></entity-find-count><script><![CDATA[addToBigDecimalInMap(activityId, productEvalResponseCount, internalResponseByActivity)]]></script></iterate><iterate list="productEvalStatements.valueStatementIds" entry="valueStatementId"><entity-find-count entity-name="coarchy.product.ProductEvaluationResponse" count-field="productEvalResponseCount"><econdition field-name="productEvaluationId"/><econdition field-name="statementId" from="valueStatementId"/><econdition field-name="evaluationByEnumId" value="EbVendor"/></entity-find-count><script><![CDATA[addToBigDecimalInMap(valueStatementId, productEvalResponseCount, vendorResponseByStatement)]]></script><entity-find-count entity-name="coarchy.product.ProductEvaluationResponse" count-field="productEvalResponseCount"><econdition field-name="productEvaluationId"/><econdition field-name="statementId" from="valueStatementId"/><econdition field-name="evaluationByEnumId" value="EbInternal"/></entity-find-count><script><![CDATA[addToBigDecimalInMap(valueStatementId, productEvalResponseCount, internalResponseByStatement)]]></script></iterate></actions></service>