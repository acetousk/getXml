<!--Service Location mantle.order.OrderServices.clone#Order--><service verb="clone" noun="Order"><in-parameters><parameter name="baseOrderId" required="true" default="orderId"/><parameter name="orderId"/><parameter name="orderName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="orderName"/><parameter name="entryDate" type="Timestamp" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="entryDate" default="ec.user.nowTimestamp"/><parameter name="placedDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="placedDate"/><parameter name="approvedDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="approvedDate"/><parameter name="completedDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="completedDate"/><parameter name="statusId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="statusId" default-value="OrderOpen"/><parameter name="processingStatusId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="processingStatusId"/><parameter name="orderRevision" type="Integer" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="orderRevision" default="1"/><parameter name="currencyUomId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="currencyUomId"/><parameter name="billingAccountId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="billingAccountId"/><parameter name="productStoreId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="productStoreId"/><parameter name="salesChannelEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="salesChannelEnumId"/><parameter name="terminalId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="terminalId"/><parameter name="displayId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="displayId"/><parameter name="externalId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="externalId"/><parameter name="externalRevision" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="externalRevision"/><parameter name="originId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="originId"/><parameter name="originUrl" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="originUrl"/><parameter name="syncStatusId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="syncStatusId"/><parameter name="systemMessageRemoteId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="systemMessageRemoteId"/><parameter name="visitId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="visitId" default="ec.user.visitId"/><parameter name="enteredByPartyId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="enteredByPartyId"/><parameter name="recurCronExpression" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="recurCronExpression"/><parameter name="recurAutoInvoice" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="recurAutoInvoice"/><parameter name="remainingSubTotal" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="remainingSubTotal"/><parameter name="grandTotal" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.order.OrderHeader" field-name="grandTotal"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="lastUpdatedStamp"/><parameter name="parentPartSeqId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="parentPartSeqId"/><parameter name="partName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="partName"/><parameter name="vendorPartyId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="vendorPartyId"/><parameter name="customerPartyId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="customerPartyId"/><parameter name="otherPartyOrderId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="otherPartyOrderId"/><parameter name="otherPartyOrderDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="otherPartyOrderDate"/><parameter name="facilityId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="facilityId"/><parameter name="carrierPartyId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="carrierPartyId"/><parameter name="shipmentMethodEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="shipmentMethodEnumId"/><parameter name="tradeTermEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="tradeTermEnumId"/><parameter name="settlementTermId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="settlementTermId"/><parameter name="postalContactMechId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="postalContactMechId"/><parameter name="telecomContactMechId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="telecomContactMechId"/><parameter name="trackingNumber" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="trackingNumber"/><parameter name="shippingInstructions" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="shippingInstructions"/><parameter name="maySplit" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="maySplit"/><parameter name="signatureRequiredEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="signatureRequiredEnumId"/><parameter name="giftMessage" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="giftMessage"/><parameter name="isGift" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="isGift"/><parameter name="isNewCustomer" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="isNewCustomer"/><parameter name="partTotal" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="partTotal"/><parameter name="priority" type="java.lang.Long" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="priority"/><parameter name="shipAfterDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="shipAfterDate"/><parameter name="shipBeforeDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="shipBeforeDate"/><parameter name="estimatedShipDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="estimatedShipDate"/><parameter name="estimatedDeliveryDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="estimatedDeliveryDate"/><parameter name="estimatedPickUpDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="estimatedPickUpDate"/><parameter name="validFromDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="validFromDate"/><parameter name="validThruDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="validThruDate"/><parameter name="autoCancelDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="autoCancelDate"/><parameter name="dontCancelSetDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="dontCancelSetDate"/><parameter name="dontCancelSetUserId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="dontCancelSetUserId"/><parameter name="disablePromotions" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="disablePromotions"/><parameter name="disableShippingCalc" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="disableShippingCalc"/><parameter name="disableTaxCalc" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="disableTaxCalc"/><parameter name="reservationAutoEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="reservationAutoEnumId"/><parameter name="checkoutId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="checkoutId"/><parameter name="checkoutUrl" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.order.OrderPart" field-name="checkoutUrl"/><parameter name="requiredByDate" type="Timestamp"/><parameter name="clearDates" type="Boolean" default="true"/><parameter name="productItemsOnly" type="Boolean" default="true"/><parameter name="copyContactMech" type="Boolean" default="true"/><parameter name="copyContent" type="Boolean" default="true"/><parameter name="copyNote" type="Boolean" default="true"/><parameter name="copyPartParty" type="Boolean" default="true"/><parameter name="copyTerm" type="Boolean" default="true"/><parameter name="copyItemWorkEffort" type="Boolean" default="true"/><parameter name="copyPayment" type="Boolean" default="true"/><parameter name="paymentStatusId" default-value="PmntPromised"/></in-parameters><out-parameters><parameter name="orderId"/></out-parameters><actions><entity-find-one entity-name="mantle.order.OrderHeader" value-field="orderHeader"><field-map field-name="orderId" from="baseOrderId"/></entity-find-one><set field="orderHeader.orderId" from="null"/><entity-sequenced-id-primary value-field="orderHeader"/><entity-set value-field="orderHeader" include="nonpk"/><set field="orderHeader.parentOrderId" from="baseOrderId"/><set field="orderHeader.recurCronExpression" from="null"/><set field="orderHeader.lastOrderedDate" from="null"/><set field="orderHeader.recurAutoInvoice" from="null"/><if condition="clearDates"><set field="orderHeader.entryDate" from="entryDate"/><set field="orderHeader.placedDate" from="placedDate"/><set field="orderHeader.approvedDate" from="approvedDate"/><set field="orderHeader.completedDate" from="completedDate"/></if><entity-create value-field="orderHeader"/><set field="orderId" from="orderHeader.orderId"/><entity-find entity-name="mantle.order.OrderPart" list="valueList"><econdition field-name="orderId" from="baseOrderId"/></entity-find><iterate list="valueList" entry="value"><set field="value.orderId" from="orderId"/><entity-set value-field="value" include="nonpk"/><if condition="clearDates"><set field="value.shipAfterDate" from="shipAfterDate"/><set field="value.shipBeforeDate" from="shipBeforeDate"/><set field="value.estimatedShipDate" from="estimatedShipDate"/><set field="value.estimatedDeliveryDate" from="estimatedDeliveryDate"/><set field="value.validFromDate" from="validFromDate"/><set field="value.validThruDate" from="validThruDate"/><set field="value.autoCancelDate" from="autoCancelDate"/><set field="value.dontCancelSetDate" from="dontCancelSetDate"/></if><entity-create value-field="value"/></iterate><entity-find entity-name="moqui.basic.EnumGroupMember" list="productItemTypeEgms" cache="true"><econdition field-name="enumGroupEnumId" value="EngItemsProduct"/></entity-find><set field="productItemTypes" from="productItemTypeEgms*.enumId"/><entity-find entity-name="mantle.order.OrderItem" list="valueList"><econdition field-name="orderId" from="baseOrderId"/><order-by field-name="orderItemSeqId"/></entity-find><iterate list="valueList" entry="value"><if condition="productItemsOnly && (!value.productId || !productItemTypes.contains(value.itemTypeEnumId))"><continue/></if><set field="value.orderId" from="orderId"/><set field="value.orderItemSeqId" from="null"/><entity-sequenced-id-secondary value-field="value"/><if condition="clearDates"><set field="value.requiredByDate" from="requiredByDate"/></if><entity-create value-field="value"/></iterate><if condition="copyContactMech"><entity-find entity-name="mantle.order.OrderPartContactMech" list="valueList"><econdition field-name="orderId" from="baseOrderId"/></entity-find><iterate list="valueList" entry="value"><set field="value.orderId" from="orderId"/><entity-create value-field="value"/></iterate></if><if condition="copyContent"><entity-find entity-name="mantle.order.OrderContent" list="valueList"><econdition field-name="orderId" from="baseOrderId"/></entity-find><iterate list="valueList" entry="value"><set field="value.orderId" from="orderId"/><set field="value.orderContentId" from="null"/><entity-sequenced-id-primary value-field="value"/><entity-create value-field="value"/></iterate></if><if condition="copyNote"><entity-find entity-name="mantle.order.OrderNote" list="valueList"><econdition field-name="orderId" from="baseOrderId"/></entity-find><iterate list="valueList" entry="value"><set field="value.orderId" from="orderId"/><entity-create value-field="value"/></iterate></if><if condition="copyPartParty"><entity-find entity-name="mantle.order.OrderPartParty" list="valueList"><econdition field-name="orderId" from="baseOrderId"/></entity-find><iterate list="valueList" entry="value"><set field="value.orderId" from="orderId"/><entity-create value-field="value"/></iterate></if><if condition="copyTerm"><entity-find entity-name="mantle.order.OrderPartTerm" list="valueList"><econdition field-name="orderId" from="baseOrderId"/></entity-find><iterate list="valueList" entry="value"><set field="value.orderId" from="orderId"/><entity-create value-field="value"/></iterate></if><if condition="copyItemWorkEffort"><entity-find entity-name="mantle.order.OrderItemWorkEffort" list="valueList"><econdition field-name="orderId" from="baseOrderId"/></entity-find><iterate list="valueList" entry="value"><set field="value.orderId" from="orderId"/><entity-create value-field="value"/></iterate></if><if condition="copyPayment"><entity-find entity-name="mantle.account.payment.Payment" list="valueList"><econdition field-name="orderId" from="baseOrderId"/></entity-find><iterate list="valueList" entry="value"><set field="value.orderId" from="orderId"/><set field="value.statusId" from="paymentStatusId"/><set field="value.paymentAuthCode" from="null"/><set field="value.paymentRefNum" from="null"/><set field="value.presentFlag" from="null"/><set field="value.swipedFlag" from="null"/><set field="value.processAttempt" from="null"/><set field="value.needsNsfRetry" from="null"/><set field="value.visitId" from="visitId"/><if condition="clearDates"><set field="value.effectiveDate" from="null"/></if><set field="value.paymentId" from="null"/><entity-sequenced-id-primary value-field="value"/><entity-create value-field="value"/></iterate></if><message type="success"><![CDATA[Created Order ${orderId} as a clone of Order ${baseOrderId}]]></message></actions></service>