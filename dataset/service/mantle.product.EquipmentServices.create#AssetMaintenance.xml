<!--Service Location mantle.product.EquipmentServices.create#AssetMaintenance--><service verb="create" noun="AssetMaintenance"><in-parameters><parameter name="assetId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.maintenance.AssetMaintenance" field-name="assetId"/><parameter name="statusId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.maintenance.AssetMaintenance" field-name="statusId"/><parameter name="maintenanceDate" type="Timestamp" required="false" allow-html="none" entity-name="mantle.product.maintenance.AssetMaintenance" field-name="maintenanceDate" default="ec.user.nowTimestamp"/><parameter name="maintenanceTypeEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.maintenance.AssetMaintenance" field-name="maintenanceTypeEnumId"/><parameter name="productMaintenanceId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.maintenance.AssetMaintenance" field-name="productMaintenanceId"/><parameter name="taskWorkEffortId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.maintenance.AssetMaintenance" field-name="taskWorkEffortId"/><parameter name="intervalQuantity" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.product.maintenance.AssetMaintenance" field-name="intervalQuantity"/><parameter name="intervalUomId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.maintenance.AssetMaintenance" field-name="intervalUomId"/><parameter name="intervalProductMeterId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.maintenance.AssetMaintenance" field-name="intervalProductMeterId"/><parameter name="purchaseOrderId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.maintenance.AssetMaintenance" field-name="purchaseOrderId"/><parameter name="userId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.maintenance.AssetMaintenance" field-name="userId"/><parameter name="comments" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.product.maintenance.AssetMaintenance" field-name="comments"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.product.maintenance.AssetMaintenance" field-name="lastUpdatedStamp"/></in-parameters><out-parameters><parameter name="assetMaintenanceId" entity-name="mantle.product.maintenance.AssetMaintenance" field-name="assetMaintenanceId"/><parameter name="assetMeterId"/></out-parameters><actions><entity-find-one entity-name="mantle.product.maintenance.ProductMaintenance" value-field="productMaintenance"/><if condition="productMaintenance"><set field="maintenanceTypeEnumId" from="maintenanceTypeEnumId ?: productMaintenance.maintenanceTypeEnumId"/><set field="intervalUomId" from="intervalUomId ?: productMaintenance.intervalUomId"/><set field="intervalProductMeterId" from="intervalProductMeterId ?: productMaintenance.intervalProductMeterId"/></if><if condition="!intervalUomId && intervalProductMeterId"><entity-find-one entity-name="mantle.product.maintenance.ProductMeter" value-field="productMeter"><field-map field-name="productMeterId" from="intervalProductMeterId"/></entity-find-one><set field="intervalUomId" from="productMeter.meterUomId"/></if><service-call name="create#mantle.product.maintenance.AssetMaintenance" in-map="context" out-map="[assetMaintenanceId:context.assetMaintenanceId,assetId:context.assetId,statusId:context.statusId,maintenanceDate:context.maintenanceDate,maintenanceTypeEnumId:context.maintenanceTypeEnumId,productMaintenanceId:context.productMaintenanceId,taskWorkEffortId:context.taskWorkEffortId,intervalQuantity:context.intervalQuantity,intervalUomId:context.intervalUomId,intervalProductMeterId:context.intervalProductMeterId,purchaseOrderId:context.purchaseOrderId,userId:context.userId,comments:context.comments,lastUpdatedStamp:context.lastUpdatedStamp]"/><if condition="intervalQuantity"><service-call name="create#mantle.product.maintenance.AssetMeter" out-map="[assetId:context.assetId,readingDate:context.readingDate,productMeterTypeId:context.productMeterTypeId,productMeterId:context.productMeterId,meterValue:context.meterValue,readingReasonEnumId:context.readingReasonEnumId,assetMaintenanceId:context.assetMaintenanceId,workEffortId:context.workEffortId,userId:context.userId,lastUpdatedStamp:context.lastUpdatedStamp]" in-map="[assetId:assetId, readingDate:maintenanceDate, productMeterId:intervalProductMeterId,                             meterValue:intervalQuantity, assetMaintenanceId:assetMaintenanceId]"/></if></actions></service>