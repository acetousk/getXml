<!--Service Location mantle.humanres.PayrollDocumentServices.get#UsaIrs1099MiscFormData--><service verb="get" noun="UsaIrs1099MiscFormData"><in-parameters><parameter name="timePeriodId" required="true"><description><![CDATA[Should be a period for a Tax Year/Quarter/etc]]></description></parameter><parameter name="partyRelationshipId" required="true"/><parameter name="federalTaxAuthorityId" default-value="UsaIrs"/><parameter name="formId" default-value="UsaIrs1099Misc"/></in-parameters><out-parameters><parameter name="timePeriod" type="Map"/><parameter name="employment" type="Map"/><parameter name="employeeFirstName"/><parameter name="employeeMiddleName"/><parameter name="employeeLastName"/><parameter name="employeeSuffix"/><parameter name="employeeSsn"/><parameter name="employeeHomeContactInfo" type="Map"/><parameter name="employeeHomeStreetString"/><parameter name="employeeHomeCszString"/><parameter name="employeeHomeString"/><parameter name="employerName"/><parameter name="employerEin"/><parameter name="employerContactInfo" type="Map"/><parameter name="employerAddressString"/><parameter name="employerPhoneString"/><parameter name="taxablePayAmount" type="BigDecimal"/><parameter name="socialTaxablePayAmount" type="BigDecimal"/><parameter name="medicalTaxablePayAmount" type="BigDecimal"/><parameter name="currencyUomId"/><parameter name="hasAnyPay" type="Boolean"/><parameter name="wageAndTaxInfoByTaxAuthorityId" type="Map"><description><![CDATA[contains Map with: taxAuthority,
                taxAuthorityGeo, incomeTaxWithheldAmount, socialTaxWithheldAmount, medicalTaxWithheldAmount]]></description></parameter><parameter name="federalTaxAuthorityIdList" type="List"/><parameter name="stateTaxAuthorityIdList" type="List"/><parameter name="localTaxAuthorityIdList" type="List"/><parameter name="federalTaxAuthorityId"/><parameter name="formId"/><parameter name="formMap" type="Map"><parameter name="1099m_a"/><parameter name="1099m_b"/><parameter name="1099m_c"/><parameter name="1099m_d1"/><parameter name="1099m_d2"/><parameter name="1099m_d3"/><parameter name="1099m_03"/><parameter name="1099m_04"/><parameter name="1099m_07"/><parameter name="1099m_16a"/><parameter name="1099m_17a"/><parameter name="1099m_18a"/></parameter></out-parameters><actions><service-call name="mantle.humanres.PayrollDocumentServices.get#EmploymentWageAndTaxInfo" in-map="context" out-map="[timePeriod:context.timePeriod,employment:context.employment,employeeFirstName:context.employeeFirstName,employeeMiddleName:context.employeeMiddleName,employeeLastName:context.employeeLastName,employeeSuffix:context.employeeSuffix,employeeSsn:context.employeeSsn,employeeHomeContactInfo:context.employeeHomeContactInfo,employeeHomeStreetString:context.employeeHomeStreetString,employeeHomeCszString:context.employeeHomeCszString,employeeHomeString:context.employeeHomeString,employerName:context.employerName,employerEin:context.employerEin,employerContactInfo:context.employerContactInfo,employerAddressString:context.employerAddressString,employerPhoneString:context.employerPhoneString,taxablePayAmount:context.taxablePayAmount,socialTaxablePayAmount:context.socialTaxablePayAmount,medicalTaxablePayAmount:context.medicalTaxablePayAmount,currencyUomId:context.currencyUomId,hasAnyPay:context.hasAnyPay,wageAndTaxInfoByTaxAuthorityId:context.wageAndTaxInfoByTaxAuthorityId,federalTaxAuthorityIdList:context.federalTaxAuthorityIdList,stateTaxAuthorityIdList:context.stateTaxAuthorityIdList,localTaxAuthorityIdList:context.localTaxAuthorityIdList]"/><set field="formMap" from="[:]"/><set field="formMap.'1099m_a'" value="${employerName}\n${employerAddressString}\n${employerPhoneString}"/><set field="formMap.'1099m_b'" from="employerEin"/><set field="formMap.'1099m_c'" from="employeeSsn"/><set field="formMap.'1099m_d1'" value="${employeeFirstName?:''} ${employeeMiddleName? employeeMiddleName + ' ':''}${employeeLastName?:''} ${employeeSuffix?:''}"/><set field="formMap.'1099m_d2'" from="employeeHomeStreetString"/><set field="formMap.'1099m_d3'" from="employeeHomeCszString"/><set field="federalWageAndTaxInfo" from="wageAndTaxInfoByTaxAuthorityId.get(federalTaxAuthorityId)"/><if condition="federalWageAndTaxInfo?.incomeTaxWithheldAmount"><then><set field="formMap.'1099m_03'" from="ec.l10n.format(taxablePayAmount, '#,##0.00')"/><set field="formMap.'1099m_04'" from="ec.l10n.format(federalWageAndTaxInfo?.incomeTaxWithheldAmount, '#,##0.00')"/></then><else><set field="formMap.'1099m_07'" from="ec.l10n.format(taxablePayAmount, '#,##0.00')"/></else></if><set field="stateTaxAuthorityId" from="stateTaxAuthorityIdList ? stateTaxAuthorityIdList[0] : 0"/><set field="stateWageAndTaxInfo" from="wageAndTaxInfoByTaxAuthorityId.get(stateTaxAuthorityId)"/><if condition="stateWageAndTaxInfo"><set field="formMap.'1099m_16a'" from="ec.l10n.format(stateWageAndTaxInfo.incomeTaxWithheldAmount, '#,##0.00')"/><set field="formMap.'1099m_17a'" value="${stateWageAndTaxInfo.taxAuthorityGeo?.geoCodeAlpha2} ${employerEin}"/><set field="formMap.'1099m_18a'" from="ec.l10n.format(taxablePayAmount, '#,##0.00')"/></if></actions></service>