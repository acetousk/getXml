<!--Service Location mantle.work.WorkEffortServices.delete#WorkEffort--><service verb="delete" noun="WorkEffort"><in-parameters><parameter name="workEffortId" required="true" entity-name="mantle.work.effort.WorkEffort" field-name="workEffortId"/><parameter name="parentWorkEffortId" entity-name="mantle.work.effort.WorkEffort" field-name="parentWorkEffortId"/><parameter name="deleteChildWorkEfforts" type="Boolean" default-value="false"/><parameter name="deleteTimeEntries" type="Boolean" default-value="false"/><parameter name="deleteWorkEffortParties" type="Boolean" default-value="false"/></in-parameters><out-parameters/><actions><entity-find-one entity-name="mantle.work.effort.WorkEffort" value-field="workEffort"><field-map field-name="workEffortId"/></entity-find-one><if condition="!workEffort"><return/></if><entity-find entity-name="mantle.work.effort.WorkEffort" list="childWorkEfforts"><econditions combine="or"><econdition field-name="rootWorkEffortId" from="workEffortId"/><econdition field-name="parentWorkEffortId" from="workEffortId"/></econditions></entity-find><if condition="childWorkEfforts && !deleteChildWorkEfforts"><message error="true"><![CDATA[Cannot delete work effort ${workEffortId}. Found child Work Efforts.]]></message></if><entity-find entity-name="mantle.work.time.TimeEntry" list="timeEntries"><econdition field-name="workEffortId"/></entity-find><if condition="timeEntries && !deleteTimeEntries"><message error="true"><![CDATA[Cannot delete work effort ${workEffortId}. Found Time Entries.]]></message></if><entity-find entity-name="mantle.work.effort.WorkEffortParty" list="workEffortParties"><econdition field-name="workEffortId"/></entity-find><if condition="workEffortParties && !deleteWorkEffortParties"><message error="true"><![CDATA[Cannot delete work effort ${workEffortId}. Found Work Efforty Parties.]]></message></if><set field="relatedValues" from="workEffort.findRelatedFk(new HashSet(                 ['mantle.work.effort.WorkEffort', 'mantle.work.time.TimeEntry', 'mantle.work.effort.WorkEffortParty']))"/><iterate list="relatedValues" entry="relatedValue"><message error="true"><![CDATA[Cannot delete work effort ${workEffortId}. Found ${relatedValue.getEntityNamePretty()}.]]></message></iterate><check-errors/><iterate list="childWorkEfforts" entry="childWorkEffort"><service-call name="mantle.work.WorkEffortServices.delete#WorkEffort" ignore-error="true" in-map="context +                                           [workEffortId:childWorkEffort.workEffortId, parentWorkEffortId:workEffortId]"/></iterate><iterate list="timeEntries" entry="timeEntry"><service-call name="mantle.work.TimeServices.delete#TimeEntry" ignore-error="true" in-map="[timeEntryId:timeEntry.timeEntryId,deleteChildTimeEntries:true]"/></iterate><iterate list="workEffortParties" entry="workEffortParty"><service-call name="delete#mantle.work.effort.WorkEffortParty" ignore-error="true" in-map="[workEffortId:workEffortId,partyId:workEffortParty.partyId,                                            roleTypeId:workEffortParty.roleTypeId,fromDate:workEffortParty.fromDate]"/></iterate><service-call name="delete#mantle.work.effort.WorkEffort" in-map="context"/></actions></service>