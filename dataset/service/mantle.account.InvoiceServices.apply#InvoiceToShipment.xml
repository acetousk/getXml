<!--Service Location mantle.account.InvoiceServices.apply#InvoiceToShipment--><service verb="apply" noun="InvoiceToShipment"><in-parameters><parameter name="invoiceId" required="true"/><parameter name="shipmentId" required="true"/></in-parameters><out-parameters/><actions><entity-find entity-name="moqui.basic.EnumGroupMember" list="productItemTypeEgms" cache="true"><econdition field-name="enumGroupEnumId" value="EngItemsProduct"/></entity-find><set field="productItemTypes" from="productItemTypeEgms*.enumId"/><entity-find entity-name="mantle.account.invoice.InvoiceItem" list="invoiceItemList"><econdition field-name="invoiceId"/></entity-find><iterate list="invoiceItemList" entry="invoiceItem"><if condition="!(invoiceItem.itemTypeEnumId in productItemTypes)"><continue/></if><service-call name="mantle.account.InvoiceServices.apply#InvoiceItemToShipment" in-map="[invoiceId:invoiceId, invoiceItemSeqId:invoiceItem.invoiceItemSeqId, shipmentId:shipmentId]"/></iterate></actions></service>