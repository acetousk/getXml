<!--Service Location coarchy.CoarchyServices.buy#OrganizationMonthCredits--><service verb="buy" noun="OrganizationMonthCredits"><in-parameters><parameter name="quantity" required="true" type="Integer"/><parameter name="productId" default-value="c100000"/></in-parameters><out-parameters><parameter name="orderId" required="true"/><parameter name="orderPartSeqId" required="true"/><parameter name="orderItemSeqId" required="true"/></out-parameters><actions><if condition="quantity < 1"><return type="danger" message="${ec.resource.expand('CoarchyBuyCreditMin', null)}" error="true" public="true"/></if><if condition="quantity > 18"><return type="danger" message="${ec.resource.expand('CoarchyBuyCreditMax', null)}" error="true" public="true"/></if><entity-find entity-name="mantle.product.store.ProductStoreProduct" list="productStoreProductList" limit="1"><econdition field-name="productId"/><order-by field-name="-lastUpdatedStamp"/></entity-find><service-call name="coarchy.CoarchyServices.add#OrderProductQuantity" in-map="[quantity:quantity,productId:productId,                 productStoreId:productStoreProductList.getFirst()?.productStoreId,addToQuantity:false]" out-map="[orderId:context.orderId,orderPartSeqId:context.orderPartSeqId,orderItemSeqId:context.orderItemSeqId]"/></actions></service>