<!--Service Location mantle.account.PaymentServices.void#Payment--><service verb="void" noun="Payment"><in-parameters><parameter name="paymentId" required="true" entity-name="mantle.account.payment.Payment" field-name="paymentId"/></in-parameters><out-parameters/><actions><entity-find-one entity-name="mantle.account.payment.Payment" value-field="payment" for-update="true"/><if condition="!(payment.statusId in ['PmntCancelled', 'PmntVoid', 'PmntPromised', 'PmntAuthorized'])"><service-call name="update#mantle.account.payment.Payment" in-map="[paymentId:paymentId, statusId:'PmntVoid']"/></if><entity-find entity-name="mantle.account.payment.PaymentApplication" list="paymentApplicationList"><econdition field-name="paymentId"/></entity-find><iterate list="paymentApplicationList" entry="paymentApplication"><if condition="paymentApplication.amountApplied != 0.0"><service-call name="mantle.account.PaymentServices.unapply#PaymentApplication" in-map="[paymentApplicationId:paymentApplication.paymentApplicationId]"/></if></iterate></actions></service>