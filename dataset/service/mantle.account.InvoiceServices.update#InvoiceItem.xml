<!--Service Location mantle.account.InvoiceServices.update#InvoiceItem--><service verb="update" noun="InvoiceItem"><in-parameters><parameter name="invoiceId" required="true" entity-name="mantle.account.invoice.InvoiceItem" field-name="invoiceId"/><parameter name="invoiceItemSeqId" required="true" entity-name="mantle.account.invoice.InvoiceItem" field-name="invoiceItemSeqId"/><parameter name="parentItemSeqId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="parentItemSeqId"/><parameter name="itemTypeEnumId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="itemTypeEnumId"/><parameter name="overrideGlAccountId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="overrideGlAccountId"/><parameter name="assetId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="assetId"/><parameter name="productId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="productId"/><parameter name="otherPartyProductId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="otherPartyProductId"/><parameter name="parentInvoiceId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="parentInvoiceId"/><parameter name="parentInvoiceItemSeqId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="parentInvoiceItemSeqId"/><parameter name="taxableFlag" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="taxableFlag"/><parameter name="quantity" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="quantity"/><parameter name="quantityUomId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="quantityUomId"/><parameter name="amount" type="java.math.BigDecimal" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="amount"/><parameter name="description" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="description"/><parameter name="itemDate" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="itemDate"/><parameter name="salesOpportunityId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="salesOpportunityId"/><parameter name="taxAuthorityId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="taxAuthorityId"/><parameter name="payrollAdjustmentId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="payrollAdjustmentId"/><parameter name="finAccountId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="finAccountId"/><parameter name="finAccountTransId" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="finAccountTransId"/><parameter name="billThruVendorName" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="billThruVendorName"/><parameter name="billThruVendorRef" type="java.lang.String" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="billThruVendorRef"/><parameter name="lastUpdatedStamp" type="java.sql.Timestamp" required="false" allow-html="none" entity-name="mantle.account.invoice.InvoiceItem" field-name="lastUpdatedStamp"/></in-parameters><out-parameters/><actions><entity-find-one entity-name="mantle.account.invoice.Invoice" value-field="invoice"/><entity-find-one entity-name="mantle.account.invoice.InvoiceItem" value-field="invoiceItem"/><if condition="invoiceItem == null"><return error="true" message="Could not find Invoice Item with ID ${invoiceId}:${invoiceItemSeqId}"/></if><if condition="invoiceItem.isAdjustment == 'Y'"><then><service-call name="mantle.account.InvoiceServices.update#InvoiceItemAdjustment" in-map="context" out-map="[]"/></then><else-if condition="invoice.statusId in ['InvoiceInProcess', 'InvoiceIncoming', 'InvoiceReceived']"><service-call name="update#mantle.account.invoice.InvoiceItem" in-map="context" out-map="[invoiceId:context.invoiceId,invoiceItemSeqId:context.invoiceItemSeqId,parentItemSeqId:context.parentItemSeqId,itemTypeEnumId:context.itemTypeEnumId,overrideGlAccountId:context.overrideGlAccountId,assetId:context.assetId,productId:context.productId,otherPartyProductId:context.otherPartyProductId,parentInvoiceId:context.parentInvoiceId,parentInvoiceItemSeqId:context.parentInvoiceItemSeqId,taxableFlag:context.taxableFlag,quantity:context.quantity,quantityUomId:context.quantityUomId,amount:context.amount,description:context.description,itemDate:context.itemDate,isAdjustment:context.isAdjustment,salesOpportunityId:context.salesOpportunityId,taxAuthorityId:context.taxAuthorityId,payrollAdjustmentId:context.payrollAdjustmentId,finAccountId:context.finAccountId,finAccountTransId:context.finAccountTransId,billThruVendorName:context.billThruVendorName,billThruVendorRef:context.billThruVendorRef,lastUpdatedStamp:context.lastUpdatedStamp]"/></else-if><else><service-call name="mantle.account.InvoiceServices.update#InvoiceItemClosed" in-map="context" out-map="[]"/></else></if></actions></service>