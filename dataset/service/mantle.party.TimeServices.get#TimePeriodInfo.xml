<!--Service Location mantle.party.TimeServices.get#TimePeriodInfo--><service verb="get" noun="TimePeriodInfo"><in-parameters><parameter name="timePeriodId"/><parameter name="timePeriod" type="EntityValue"/></in-parameters><out-parameters><parameter name="timePeriod" type="EntityValue"/><parameter name="fromTimestamp" type="Timestamp"/><parameter name="thruTimestamp" type="Timestamp"><description><![CDATA[Meant to be used in an inclusive expression (last ms of period, use less than or equals)]]></description></parameter><parameter name="thruTimestampExclusive" type="Timestamp"><description><![CDATA[Meant to be used in an exclusive expression (first ms of next period, use less than)]]></description></parameter><parameter name="thruTimestampLate" type="Timestamp"><description><![CDATA[Late in the day (20:00) on the last day of the period, use as the Timestamp on automatic end of period records]]></description></parameter></out-parameters><actions><if condition="timePeriod == null"><if condition="!timePeriodId"><return error="true" message="Time Period or ID required"/></if><entity-find-one entity-name="mantle.party.time.TimePeriod" value-field="timePeriod"/><if condition="timePeriod == null"><return error="true" message="Time Period ${timePeriodId} not found"/></if></if><set field="timePeriodId" from="timePeriod.timePeriodId"/><if condition="timePeriod.fromDate == null"><return error="true" message="Time Period ${timePeriodId} has no fromDate"/></if><if condition="timePeriod.thruDate == null"><return error="true" message="Time Period ${timePeriodId} has no thruDate"/></if><set field="fromTimestamp" from="ec.l10n.parseTimestamp(timePeriod.fromDate.toString() + ' 00:00:00.000', 'yyyy-MM-dd HH:mm:ss.SSS', null, TimeZone.getDefault())"/><set field="thruTimestamp" from="ec.l10n.parseTimestamp(timePeriod.thruDate.toString() + ' 23:59:59.999', 'yyyy-MM-dd HH:mm:ss.SSS', null, TimeZone.getDefault())"/><set field="thruTimestampExclusive" from="ec.l10n.parseTimestamp((timePeriod.thruDate + 1).toString() + ' 00:00:00.000', 'yyyy-MM-dd HH:mm:ss.SSS', null, TimeZone.getDefault())"/><set field="thruTimestampLate" from="ec.l10n.parseTimestamp(timePeriod.thruDate.toString() + ' 20:00:00.000', 'yyyy-MM-dd HH:mm:ss.SSS', null, TimeZone.getDefault())"/></actions></service>